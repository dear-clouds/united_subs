function _rhc_check_visibility(){jQuery(document).ready(function(e){var t=!1;e(".fullCalendar").each(function(n,a){e(a).is(":visible")&&e(a).find(".fc-content").height()<10?e(a).fullCalendar("render"):e(a).find(".fc-content").height()<10&&(t=!0)}),t&&setTimeout("_rhc_check_visibility()",300)})}function _rhc_check_init_rhc(){jQuery(".rhc_holder").each(function(e,t){return jQuery(this).data("Calendarize")?!0:(init_rhc(),!1)}),setTimeout("_rhc_check_init_rhc()",1e3)}function rhc_in_array(e,t){var n=jQuery.inArray(e,t);return void 0!=n&&-1!=n}function _rhc_widget_link_click(e,t){var n=jQuery(t).data("rhc_event")||!1;if(n&&n.fc_click_target)var a=n.fc_click_target;else var a="_self";if(e.event_rdate||e.gotodate){jQuery("form#calendarizeit_repeat_instance").remove();var r='<form id="calendarizeit_repeat_instance" method="post"></form>';jQuery(r).attr("action",e.url).attr("target",a).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(t){t.stopPropagation();var n=e.url;return null==n||n.indexOf("javascript:void(0);")>0?!1:!0}).submit()}else{var i=e.url;if(null!=i&&0==i.indexOf("javascript:void(0);"))return!1;"_blank"==a?window.open(i):location.href=i}return!1}function _rhc_sort_events(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function fc_mouseover(e,t,n){}function fc_event_details(e,t,n){e.id=e.id.replace("@","_"),e.id=e.id.replace(".","_"),e.gcal&&e.description&&(e.description=e.description.replace(/\n/g,"<br />")),jQuery(document).ready(function(a){var r=n.calendar.options.tooltip.target||"_self";e.fc_click_target&&(r=e.fc_click_target),n.calendar.rhc_search(n.calendar,t,!0);var i="fct-"+e.id;if(a("BODY").find("#"+i).length>0&&a("BODY").find("#"+i).remove(),0==a("BODY").find("#"+i).length&&a("BODY").find("#fct-item-template").clone().attr("id",i).addClass("fct-tooltip").bind("close-tooltip",function(e){a(this).animate({opacity:0},"fast","swing",function(e){a(this).remove()})}).find(".fc-close-tooltip a").on("click",function(e){a(".fct-tooltip").trigger("close-tooltip")}).end().appendTo("BODY"),a("BODY").find("#"+i).length>0){var o=a(t.target).offset(),s=n.element.offset(),l=o.left<s.left+n.element.width()/2?!0:!1,d=l?"fc-tip-left":"fc-tip-right";a(".fct-tooltip:not(#"+i+")").trigger("close-tooltip");var c=a("BODY").find("#"+i);if(a("BODY").trigger("rhc_tooltip_before_show",[e,c,n]),c.stop().addClass(d).find(".fc-description").html(e.description).end().css("opacity",0).show(),e.color&&c.css("border-left-color",e.color),e.source&&e.source.fc_click_target&&"_nolink"==e.source.fc_click_target&&(e.url=!1),parseInt(n.calendar.options.tooltip.image)||(e.image=!1),e.url){var f=e.url;e.fc_rrule&&""!=e.fc_rrule,tooltip_click=function(t){jQuery("form#calendarizeit_repeat_instance").remove();var n='<form id="calendarizeit_repeat_instance" method="post"></form>';return jQuery(n).attr("target",r).attr("action",e.url).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(e){return e.stopPropagation(),!0}).submit(),!1};var u=!(n.calendar.options.tooltip&&n.calendar.options.tooltip.disableTitleLink&&"1"==n.calendar.options.tooltip.disableTitleLink);!u||e.gcal||"javascript:void(0);"==e.url?c.find(".fc-title").html(e.title):e.direct_link?a("<a></a>").attr("href",f).html(e.title).attr("target",r).appendTo(c.find(".fc-title")):a("<a></a>").attr("href",f).bind("click",tooltip_click).html(e.title).attr("target",r).appendTo(c.find(".fc-title")),e.image&&e.image[0]&&(e.direct_link?a("<a></a>").attr("href",f).attr("target",r).append(a("<img />").attr("src",e.image[0])).appendTo(c.find(".fc-image")):a("<a></a>").attr("href",f).bind("click",tooltip_click).attr("target",r).append(a("<img />").attr("src",e.image[0])).appendTo(c.find(".fc-image")))}else c.find(".fc-title").html(e.title),e.image&&e.image[0]&&a("<img />").attr("src",e.image[0]).appendTo(c.find(".fc-image"));c.find(".fc-start,.fc-end,.fc-hide").hide(),e.allDay?(e.start&&c.find(".fc-start").append(a("<span></span>").html(a.fullCalendar.formatDate(e.start,n.calendar.options.tooltip.startDateAllDay,n.calendar.options))).show(),e.end&&c.find(".fc-end").append(a("<span></span>").html(a.fullCalendar.formatDate(e.end,n.calendar.options.tooltip.endDateAllDay||n.calendar.options.tooltip.startDateAllDay,n.calendar.options))).show()):(e.start&&c.find(".fc-start").append(a("<span></span>").html(a.fullCalendar.formatDate(e.start,n.calendar.options.tooltip.startDate,n.calendar.options))).show(),e.end&&c.find(".fc-end").append(a("<span></span>").html(a.fullCalendar.formatDate(e.end,n.calendar.options.tooltip.endDate||n.calendar.options.tooltip.startDate,n.calendar.options))).show()),e.terms&&e.terms.length>0&&a.each(e.terms,function(t,i){if(i.gaddress&&e.local_feed){var o=".fc-term-"+i.taxonomy+"-gaddress";c.find(o).find("a").length>0&&c.find(o).append('<span class="rhc-tooltip tax-term-divider"></span>'),a("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(i.gaddress)).html(i.gaddress).attr("target","_blank").appendTo(c.find(o).show())}c.find(".fc-tax-"+i.taxonomy).length>0&&(""==i.name?c.find(".fc-tax-"+i.taxonomy).hide():(c.find(".fc-tax-"+i.taxonomy).find("a").length>0&&c.find(".fc-tax-"+i.taxonomy).append('<span class="rhc-tooltip tax-term-divider"></span>'),i.gaddress&&0==e.local_feed?a("<a></a>").attr("href","http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(i.gaddress)).html(i.name).attr("target",r).appendTo(c.find(".fc-tax-"+i.taxonomy)):i.url&&""!=i.url&&n.calendar.options.tooltip.taxonomy_links?a("<a></a>").attr("href",i.url).html(i.name).attr("target",r).appendTo(c.find(".fc-tax-"+i.taxonomy)):a("<span></span>").html(i.name).appendTo(c.find(".fc-tax-"+i.taxonomy)),c.find(".fc-tax-"+i.taxonomy).find(".tax-label").html(i.taxonomy_label).end().show()))}),o.top=o.top-c.height()/2+a(t.srcElement).height()/2;var h=n.element.offset(),p=h.top-o.top-5;p>0&&(o.top=o.top+p,c.find(".fct-arrow-holder").css("margin-top",-1*p)),l?o.left=o.left+a(t.target).width():o.left=o.left+-1*c.width(),"agendaDay"==n.name&&(o.left=o.left-c.width()+50),c.css("min-height","").css("height","auto").offset(o);var v=document.documentElement.clientWidth||window.innerWidth;client_right=a(document).scrollLeft()+v;var m=o.left+c.width();m>client_right&&(o.left=o.left-(m-client_right)-12,c.offset(o)),c.animate({opacity:1},"fast","swing"),c.unbind("mouseleave").bind("mouseleave",function(e){var t=this;return setTimeout(function(){return a(t).is(":hover")?!1:void(n.calendar.options.tooltip_on_hover&&"1"==n.calendar.options.tooltip_on_hover&&a(t).trigger("close-tooltip"))},200),!0}),a("BODY").trigger("rhc_tooltip_after_show",[e,c,n])}})}function no_link(e,t,n){return t.stopPropagation(),!1}function fc_click_no_action(e,t,n){return t.stopPropagation(),!1}function fc_click(e,t,n){var a=e.fc_click_link?e.fc_click_link:"view";return n&&"rhc_event"==n.name&&"view"==a&&(a="page"),"none"==a?!1:("undefined"==typeof e.fc_click_target&&(e.fc_click_target="_self"),e.url&&"page"==a?e.fc_click_target&&""!=e.fc_click_target?(fc_event_links_to_page(e,t,n),!1):!0:(fc_event_details(e,t,n),!1))}function fc_event_links_to_page(e,t,n){jQuery("form#calendarizeit_repeat_instance").remove();var a='<form id="calendarizeit_repeat_instance" method="post" target="'+e.fc_click_target+'"></form>';jQuery(a).attr("action",e.url).appendTo("BODY"),e.gotodate&&jQuery('<input type="hidden" name="gotodate" value="'+e.gotodate+'"/>').appendTo("form#calendarizeit_repeat_instance"),e.event_rdate&&jQuery('<input type="hidden" name="event_rdate" value="'+e.event_rdate+'" />').appendTo("form#calendarizeit_repeat_instance"),jQuery("form#calendarizeit_repeat_instance").submit(function(e){return e.stopPropagation(),!0}).submit()}function fc_select(e,t,n,a,r){jQuery(document).ready(function(e){var t=e(a.target).offset(),n=e(a.target).width();e(".fc-dialog").CalendarizeDialog("open",{offset:t,margin_left:n})})}function _add_param_to_url(e,t,n){if("javascript:void(0);"==e)return e;var a="",r=e.split("?"),o=r[0],s=r[1],l="";if(s){var r=s.split("&");for(i=0;i<r.length;i++)r[i].split("=")[0]!=t&&(a+=l+r[i],l="&")}var d=l+""+t+"="+n;return o+"?"+a+d}function _add_repeat_instance_data_to_url(e){if(e.repeat_instance&&(e.fc_rrule&&""!=e.fc_rrule||e.fc_rdate&&""!=e.fc_rdate))if(e.using_calendar_url){var t=jQuery.fullCalendar.formatDate(e.start,"yyyy-MM-dd");t&&""!=t&&(e.url=_add_param_to_url(e.url,"gotodate",t))}else if(e.src_start&&e.fc_date_time&&e.src_start==e.fc_date_time);else{var t=jQuery.fullCalendar.formatDate(e.start,"yyyyMMddHHmmss"),n=jQuery.fullCalendar.formatDate(e.end,"yyyyMMddHHmmss");t&&""!=t&&(n&&""!=n&&(t=t+","+n),e.url=""==e.url?"":_add_param_to_url(e.url,"event_rdate",t))}return e}function _add_repeat_instance_data_to_event(e){if(e.repeat_instance&&(e.fc_rrule&&""!=e.fc_rrule||e.fc_rdate&&""!=e.fc_rdate))if(e.using_calendar_url){var t=jQuery.fullCalendar.formatDate(e.start,"yyyy-MM-dd");t&&""!=t&&(e.gotodate=t)}else if(e.src_start&&e.fc_date_time&&e.src_start==e.fc_date_time);else{var t=jQuery.fullCalendar.formatDate(e.start,"yyyyMMddHHmmss"),n=jQuery.fullCalendar.formatDate(e.end,"yyyyMMddHHmmss");t&&""!=t&&(n&&""!=n&&(t=t+","+n),e.event_rdate=t,e.url=""==e.url?"":_add_param_to_url(e.url,"event_rdate",e.event_rdate))}return e}function exdate_to_array_of_dates(e){var t=""==e?[]:e.split(",");if(t.length>0){var n=[];for(a=0;a<t.length;a++){var r=t[a];n[n.length]=new Date(r.substring(0,4),r.substring(4,6)-1,r.substring(6,8),r.substring(9,11),r.substring(11,13),r.substring(13,15))}return n}return[]}function init_rhc(){jQuery(document).ready(function($){init_sc_ical_feed(),$("BODY").bind("dbox.loaded",function(){init_sc_ical_feed()}),$(".rhc_holder").each(function(i,el){var ui_theme=$(el).data("rhc_ui_theme");""!=ui_theme&&$("#fullcalendar-theme-css").attr("href",ui_theme);var rhc_options=$(el).data("rhc_options");eval("$(el).Calendarize("+rhc_options+")")}),$(".fc-button-custom").hover(function(){$(this).addClass("fc-state-hover")},function(){$(this).removeClass("fc-state-hover")}),$(window).resize(function(){$(".rhcalendar.not-widget .fullCalendar ").each(function(e,t){set_fc_small(t)})}),$("BODY").data("rhc_tooltip_before_show")||$("BODY").data("rhc_tooltip_before_show",!0).bind("rhc_tooltip_before_show",rhc_tooltip_before_show),$("BODY").data("rhc_tooltip_contend_loaded")||$("BODY").data("rhc_tooltip_contend_loaded",!0).bind("rhc_tooltip_contend_loaded",rhc_tooltip_contend_loaded),$(".rhc-next").on("click",function(e){})})}function init_sc_ical_feed(){jQuery(document).ready(function(e){e(".rhc-ical-feed-cont").length>0&&e(".rhc-ical-feed-cont").each(function(t,n){if("1"!=e(n).data("sc_ical_feed_init")){e(n).data("sc_ical_feed_init","1");var a=this,r=e(this).parent(),i=e(this).data("icalendar_button"),o=e(this).attr("data-theme"),s="icalendar",l=(e(this).attr("data-title"),function(t,n){e(t).width(e(t).data("width"));var a=e(n.target).offset(),r=e(n.target).width();e(t).removeClass("ical-tooltip-holder").addClass("ical-tooltip").CalendarizeDialog("open",{offset:a,margin_left:r})});if(e(a).find(".ical-close").unbind("click").click(function(t){e(a).CalendarizeDialog("close")}),l){var d=e("<span class='fc-button fc-button-"+s+" "+o+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+i+"</span><span class='fc-button-effect'><span></span></span></span></span>");d&&(d.click(function(e){d.hasClass(o+"-state-disabled")||l(a,e)}).mousedown(function(){d.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){d.removeClass(o+"-state-down")}).hover(function(){d.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){d.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(r),d.addClass(o+"-corner-left"),d.addClass(o+"-corner-right"))}}})})}function get_event_ocurrences(e){var t=jQuery.fullCalendar.parseDate(e.start);if(e.fc_rrule=""==e.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":e.fc_rrule,scheduler=new Scheduler(t,e.fc_rrule,!0),""!=e.fc_interval&&e.fc_exdate){var n=exdate_to_array_of_dates(e.fc_exdate);n.length>0&&scheduler.add_exception_dates(n)}if(e.fc_rdate&&""!=e.fc_rdate){var a=exdate_to_array_of_dates(e.fc_rdate);a.length>0&&scheduler.add_rdates(a)}occurrences=scheduler.occurrences_between(start,end)}function set_fc_small(e){if(jQuery(e).parent().hasClass("not-widget")){var t=parseInt(jQuery(e).width());if(mobile_width=RHC.mobile_width||480,t>0&&t<=mobile_width){var n=jQuery(e).fullCalendar("getView");"agendaWeek"==n.name&&(jQuery(e).data("restore_agenda_week",!0),jQuery(e).fullCalendar("changeView","basicWeek")),"agendaDay"==n.name&&(jQuery(e).data("restore_agenda_day",!0),jQuery(e).fullCalendar("changeView","basicDay")),jQuery(e).parent().addClass("fc-small"),jQuery(e).find("td:first-child").each(function(e,t){jQuery(t).find("> div").css("min-height","")})}else{jQuery(e).parent().removeClass("fc-small");var n=jQuery(e).fullCalendar("getView");"basicWeek"==n.name&&jQuery(e).data("restore_agenda_week")&&(jQuery(e).data("restore_agenda_week",!1),jQuery(e).fullCalendar("changeView","agendaWeek")),"basicDay"==n.name&&jQuery(e).data("restore_agenda_day")&&(jQuery(e).data("restore_agenda_day",!1),jQuery(e).fullCalendar("changeView","agendaDay"))}}}function rhc_tooltip_before_show(e,t,n,a){return jQuery(document).ready(function(r){if(a.calendar.options.tooltip.enableCustom&&t.local_feed)if(n.find(".fct-dbox").hide(),RHC.tooltip_details[t.id]&&"loading"==RHC.tooltip_details[t.id])setTimeout(function(){rhc_tooltip_before_show(e,t,n,a)},200);else if(RHC.tooltip_details[t.id]){if(!0===RHC.tooltip_details[t.id])return n.find(".fct-dbox").show(),!0;n.find(".fct-dbox").empty().show().append(RHC.tooltip_details[t.id].clone()),t.allDay?(t.start&&n.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.start,a.calendar.options.tooltip.startDateAllDay,a.calendar.options)),t.end&&n.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.end,a.calendar.options.tooltip.endDateAllDay||a.calendar.options.tooltip.startDateAllDay,a.calendar.options))):(t.start&&n.find(".postmeta-fc_start .fe-extrainfo-value,.postmeta-fc_start_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.start,a.calendar.options.tooltip.startDate,a.calendar.options)),t.end&&n.find(".postmeta-fc_end .fe-extrainfo-value,.postmeta-fc_end_datetime .fe-extrainfo-value").html(r.fullCalendar.formatDate(t.end,a.calendar.options.tooltip.endDate||a.calendar.options.tooltip.startDate,a.calendar.options))),r("BODY").trigger("rhc_tooltip_contend_loaded",[e,t,n,a])}else r.post(RHC.ajaxurl,{rhc_action:"rhc_tooltip_detail",id:t.id,event_rdate:t.event_rdate},function(i){r(i).find(".fe-extrainfo-holder").length>0?(RHC.tooltip_details[t.id]=r(i).clone(),rhc_tooltip_before_show(e,t,n,a)):RHC.tooltip_details[t.id]=!0},"html")}),!0}function cb_event_mouseover(e,t,n){return jQuery(document).ready(function(t){if(n.calendar.options.tooltip.enableCustom&&e.local_feed)if(RHC.tooltip_details[e.id]);else{RHC.tooltip_details[e.id]="loading",url=RHC.ajaxurl,url=url+"?rhc_action=rhc_tooltip_detail&id="+e.id+"&event_rdate="+e.event_rdate;var a=new Date;ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:a.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u,t.get(url,{},function(n){t(n).find(".fe-extrainfo-holder").length>0?RHC.tooltip_details[e.id]=t(n).clone():RHC.tooltip_details[e.id]=!0},"html")}}),!0}function rhc_tooltip_contend_loaded(e){init_sc_ical_feed()}function calendar_widget_day_click(e,t,n,a,r,i,o){var s=jQuery(o).find(".rhc_calendar_widget_day_click_holder");return s.children().length>0?s.children().fadeOut("fast",function(){_calendar_widget_day_click(e,t,n,a,r,i,o)}):_calendar_widget_day_click(e,t,n,a,r,i,o),!0}function _calendar_widget_day_click(e,t,n,a,r,i,o){if(client_events=jQuery("#"+i.calendar_id).find(".fullCalendar").fullCalendar("clientEvents"),client_events.length>0){var s=[],l=[],d=jQuery.fullCalendar.cloneDate(e);d.setHours(0,0,0),jQuery.each(client_events,function(e,t){if(ev_uid=t.id+"-"+t._start.getTime(),-1==jQuery.inArray(ev_uid,s)){var n=jQuery.fullCalendar.cloneDate(t._start);n.setHours(0,0,0),n.getTime()==d.getTime()&&(s.push(ev_uid),l.push(t))}}),l.sort(_rhc_sort_events);var c=jQuery(o).find(".rhc_calendar_widget_day_click_holder"),f=jQuery(o).find(".rhc_calendar_widget_day_click_template").children();c.empty(),jQuery.each(l,function(e,t){t.fc_click_link="page";var n=f.clone();n.find(".rhc_title").append(jQuery(jQuery("<span></span>").html(t.title)).RHCLink(t,a)),t.image&&t.image[0]&&n.find(".rhc_featured_image").append(jQuery(jQuery("<img />").attr("src",t.image[0])).RHCLink(t,a)),n.find(".rhc_date").each(function(e,n){field=jQuery(n).data("fc_field"),date_format=jQuery(n).data("fc_date_format"),(value=t[field])&&jQuery(n).html(jQuery.fullCalendar.formatDate(value,date_format,i))}),t.allDay&&n.find(".rhc-event-time").hide(),n.find(".rhc_description").html(t.description),t.terms&&t.terms.length>0&&jQuery.each(t.terms,function(e,t){if(n.find(".taxonomy-"+t.taxonomy).parent().find("a").length>0&&n.find(".taxonomy-"+t.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),t.name&&""!=t.name&&n.find(".taxonomy-"+t.taxonomy).length>0&&(""==t.url?jQuery("<span>"+t.name+"</span>").appendTo(n.find(".taxonomy-"+t.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):jQuery("<a>"+t.name+"</a>").attr("href",t.url).appendTo(n.find(".taxonomy-"+t.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),n.find(".taxonomy-"+t.taxonomy+"-gaddress").length>0&&t.gaddress&&""!=t.gaddress){n.find(".taxonomy-"+t.taxonomy+"-gaddress").parent().find("a").length>0&&n.find(".taxonomy-"+t.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var a="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(t.gaddress);jQuery("<a>"+t.gaddress+"</a>").attr("href",a).attr("target","_blank").appendTo(n.find(".taxonomy-"+t.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}});var r=t.color||t.source.color||"",o=t.textColor||t.source.textColor||"";o=o.length<=1?"#ffffff":o,r.length>1&&o.length>1&&n.find(".rhc-widget-event-list-date").css("background-color",r).css("color",o),i.widget_autoclick&&1==parseInt(i.widget_autoclick)?n.find(".rhc-widget-event-list-head").parents(".rhc-widget-event-list").addClass("open").find(".rhc-widget-event-list-body").show():n.find(".rhc-widget-event-list-head").unbind("click").bind("click",function(e){var t=jQuery(this).parents(".rhc-widget-event-list");t.toggleClass("open"),t.is(".open")?t.find(".rhc-widget-event-list-body").slideDown("fast"):t.find(".rhc-widget-event-list-body").slideUp("fast")}),i.widget_autohover&&1==parseInt(i.widget_autohover)?n.find(".rhc-widget-event-list-head").addClass("hover"):n.find(".rhc-widget-event-list-head").mouseenter(function(){jQuery(this).addClass("hover")}).mouseleave(function(){jQuery(this).removeClass("hover")});var s=t.local_id||0;if(s>0){var l=i.events_source+i.events_source_query;l=l.replace("get_calendar_events","get_icalendar_events");var d=l+"&ics=1";d=d+"&ID="+s,n.find(".rhc-icon-ical").click(function(e){window.open(d,"_self")})}t.terms&&t.terms.length>0&&jQuery.each(t.terms,function(e,a){var r=a.glon||!1,o=a.glat||!1,s=a.gaddress||!1,l="",d=n.find(".rhc-map-view"),c=d.data("size"),f=d.data("zoom"),u=d.data("maptype"),p=t.color||t.source.color||"";if(p=p.length>1?p.toUpperCase(p).replace("#","0x"):"blue",!1!==r&&!1!==o?l="http://maps.googleapis.com/maps/api/staticmap?center="+o+","+r+"&zoom="+f+"&size="+c+"&maptype="+u+"&markers=color:"+p+"%7C"+o+","+r:!1!==s&&""!=s&&(l="http://maps.googleapis.com/maps/api/staticmap?center="+escape(s)+"&zoom="+f+"&size="+c+"&maptype="+u+"&markers=color:"+p+"%7C"+escape(s)),""!=l&&"none"!=i.widget_google_map)if(n.find(".rhc-icon-map").unbind("click").bind("click",function(e){var t=n.find(".rhc-map-view .sws-gmap3-cont");if(t.data("gmap_inited"));else if(n.find(".rhc-map-view .sws-gmap3-cont").length>0){t.data("gmap_inited",!0),ratio=n.find(".rhc-map-view").data("ratio"),arr=ratio.split(":"),ratio=arr[1]/arr[0],w=n.find(".rhc-map-view").width(),h=w*ratio,t.height(h);var a=t.data("maptype"),r=t.data("uid"),i=t.data("address");return void rhc_gmap3_init({glat:t.data("glat"),glon:t.data("glon"),zoom:t.data("zoom"),disableDefaultUI:!1,map_type:google.maps.MapTypeId[a],uid:r,name:"",info_windows:"sws-gmap3-info-"+r,markers:"#sws-gmap3-marker-"+r,address:i,scrollwheel:1,traffic:!1})}jQuery(this).parents(".rhc-widget-event-list").find(".rhc-map-view").slideToggle("fast")}).show(),"static"==i.widget_google_map)""!=l&&n.find(".rhc-map-view").empty().hide().append(jQuery("<img />").attr("src",l));else if("interactive"==i.widget_google_map){var v='<div class="sws-gmap3-frame"><div id="map_canvas{uid}" class="sws-gmap3-cont"></div></div><div id="sws-gmap3-marker-{uid}" class="sws-gmap3-marker">|||::</div><div class="sws-gmap3-marker"><div id="sws-gmap3-info-{uid}" >{info_windows}</div></div>',m=t.id+"-"+t.start.getTime();v=v.replace(/\{uid\}/g,m),v=v.replace(/\{info_windows\}/g,a.name),n.find(".rhc-map-view").empty().append(v),n.find(".rhc-map-view .sws-gmap3-cont").data("glat",o).data("glon",r).data("zoom",f).data("maptype",u).data("uid",m).data("address",s)}}),"undefined"!=typeof rhp_vars&&(n.find(".rhc-icon-facebook").length>0&&n.find(".rhc-icon-facebook").show().unbind("click").bind("click",function(e){function n(e){}e.preventDefault(),FB.init({appId:rhp_vars.fb_appID,status:!0,cookie:!0});var a={method:"share",href:t.url,link:t.url,name:t.title,caption:t.title,description:t.description};FB.ui(a,n)}),n.find(".rhc-icon-twitter").length>0&&n.find(".rhc-icon-twitter").show().unbind("click").bind("click",function(e){var n=(encodeURIComponent(t.url),encodeURIComponent(t.description),"https://twitter.com/share?&url="+t.url+"&text="+t.title+"&counturl="+t.url);window.open(n,"Twitter","width=660,height=400,scrollbars=no;resizable=no")}),n.find(".rhc-icon-linkedin").length>0&&n.find(".rhc-icon-linkedin").show().unbind("click").bind("click",function(e){var n=encodeURIComponent(t.url),a=encodeURIComponent(t.title),r=encodeURIComponent(t.description),i=encodeURIComponent(t.url),o="http://www.linkedin.com/shareArticle?mini=true&url="+n+"&title="+a+"&summary="+r+n+"&source="+i;window.open(o,"LinkedIn","width=660,height=400,scrollbars=no;resizable=no")}),n.find(".rhc-icon-googleplus").length>0&&n.find(".rhc-icon-googleplus").show().unbind("click").bind("click",function(e){var n=encodeURIComponent(t.url),a="https://plus.google.com/share?url="+n;window.open(a,"Google+","width=660,height=400,scrollbars=no;resizable=no")})),n.hide(),c.append(n.fadeIn("fast"))}),jQuery("BODY").trigger("dbox.loaded")}}function _rhc_sort_events(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function btn_tax_dropdown(e,t){}function dayclick_tooltip_evenlits(e,t,n,a,r,i){console.log("day click",e,i)}function rhc_console(){console&&console.log.apply(console,arguments)}jQuery(document).ready(function(e){RHC.visibility_check&&(jQuery(".fullCalendar").length>0&&setTimeout("_rhc_check_visibility()",200),setTimeout("_rhc_check_init_rhc()",500))}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,a,r){return jQuery.easing[jQuery.easing.def](e,t,n,a,r)},easeInQuad:function(e,t,n,a,r){return a*(t/=r)*t+n},easeOutQuad:function(e,t,n,a,r){return-a*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t+n:-a/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,a,r){return a*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,a,r){return a*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t+n:a/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,a,r){return a*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,a,r){return-a*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t*t+n:-a/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,a,r){return a*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,a,r){return a*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,a,r){return(t/=r/2)<1?a/2*t*t*t*t*t+n:a/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,a,r){return-a*Math.cos(t/r*(Math.PI/2))+a+n},easeOutSine:function(e,t,n,a,r){return a*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,a,r){return-a/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,a,r){return 0==t?n:a*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,a,r){return t==r?n+a:a*(-Math.pow(2,-10*t/r)+1)+n},easeInOutExpo:function(e,t,n,a,r){return 0==t?n:t==r?n+a:(t/=r/2)<1?a/2*Math.pow(2,10*(t-1))+n:a/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,a,r){return-a*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,a,r){return a*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,a,r){return(t/=r/2)<1?-a/2*(Math.sqrt(1-t*t)-1)+n:a/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(1==(t/=r))return n+a;if(o||(o=.3*r),s<Math.abs(a)){s=a;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(a/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o))+n},easeOutElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(1==(t/=r))return n+a;if(o||(o=.3*r),s<Math.abs(a)){s=a;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(a/s);return s*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+a+n},easeInOutElastic:function(e,t,n,a,r){var i=1.70158,o=0,s=a;if(0==t)return n;if(2==(t/=r/2))return n+a;if(o||(o=r*(.3*1.5)),s<Math.abs(a)){s=a;var i=o/4}else var i=o/(2*Math.PI)*Math.asin(a/s);return 1>t?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o))+n:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*.5+a+n},easeInBack:function(e,t,n,a,r,i){return void 0==i&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+n},easeOutBack:function(e,t,n,a,r,i){return void 0==i&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+n},easeInOutBack:function(e,t,n,a,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+n:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+n},easeInBounce:function(e,t,n,a,r){return a-jQuery.easing.easeOutBounce(e,r-t,0,a,r)+n},easeOutBounce:function(e,t,n,a,r){return(t/=r)<1/2.75?a*(7.5625*t*t)+n:2/2.75>t?a*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?a*(7.5625*(t-=2.25/2.75)*t+.9375)+n:a*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,a,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,a,r)+n:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,a,r)+.5*a+n}}),function(e){var t="undefined"!=typeof module&&module.exports,n=function(){if(!n._nlp)if(t)n._nlp=require("./nlp");else if(!(n._nlp=e._RRuleNLP))throw new Error("You need to include rrule/nlp.js for fromText/toText to work.");return n._nlp},a={MONTH_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31],ONE_DAY:864e5,MAXYEAR:9999,ORDINAL_BASE:new Date(1970,0,1),PY_WEEKDAYS:[6,0,1,2,3,4,5],getYearDay:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.ceil((t-new Date(e.getFullYear(),0,1))/a.ONE_DAY)+1},isLeapYear:function(e){return e instanceof Date&&(e=e.getFullYear()),e%4===0&&e%100!==0||e%400===0},tzOffset:function(e){return 60*e.getTimezoneOffset()*1e3},daysBetween:function(e,t){var n=e.getTime()-a.tzOffset(e),r=t.getTime()-a.tzOffset(t),i=Math.abs(n-r);return Math.round(i/a.ONE_DAY)},toOrdinal:function(e){return a.daysBetween(e,a.ORDINAL_BASE)},fromOrdinal:function(e){var t=e*a.ONE_DAY;return new Date(a.ORDINAL_BASE.getTime()-a.tzOffset(a.ORDINAL_BASE)+t+a.tzOffset(new Date(t)))},monthRange:function(e,t){var n=new Date(e,t,1);return[a.getWeekday(n),a.getMonthDays(n)]},getMonthDays:function(e){var t=e.getMonth();return 1==t&&a.isLeapYear(e)?29:a.MONTH_DAYS[t]},getWeekday:function(e){return a.PY_WEEKDAYS[e.getDay()]},combine:function(e,t){return t=t||e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},clone:function(e){var t=new Date(e.getTime());return t.setMilliseconds(0),t},cloneDates:function(e){for(var t=[],n=0;n<e.length;n++)t.push(a.clone(e[n]));return t},sort:function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},timeToUntilString:function(e){for(var t,n=new Date(e),a=[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),"T",n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),"Z"],r=0;r<a.length;r++)t=a[r],!/[TZ]/.test(t)&&10>t&&(a[r]="0"+String(t));return a.join("")},untilStringToDate:function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(n[1],n[2]-1,n[3],n[5]||0,n[6]||0,n[7]||0))}};a.Time=function(e,t,n){this.hour=e,this.minute=t,this.second=n},a.Time.prototype={getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getTime:function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)}};var r=function(e,t){1===arguments.length&&(t=e,e=0);for(var n=[],a=e;t>a;a++)n.push(a);return n},i=function(e,t){var n=0,a=[];if(e instanceof Array)for(;t>n;n++)a[n]=[].concat(e);else for(;t>n;n++)a[n]=e;return a},o=function(e,t){var n=e%t;return 0>n*t?n+t:n},s=function(e,t){return{div:Math.floor(e/t),mod:o(e,t)}},l=function(e){return e instanceof Array&&0==e.length?!1:Boolean(e)},d=function(e,t){return-1!=e.indexOf(t)},c=[].concat(i(1,31),i(2,28),i(3,31),i(4,30),i(5,31),i(6,30),i(7,31),i(8,31),i(9,30),i(10,31),i(11,30),i(12,31),i(1,7)),f=[].concat(i(1,31),i(2,29),i(3,31),i(4,30),i(5,31),i(6,30),i(7,31),i(8,31),i(9,30),i(10,31),i(11,30),i(12,31),i(1,7)),u=r(1,29),h=r(1,30),p=r(1,31),v=r(1,32),m=[].concat(v,h,v,p,v,p,v,v,p,v,p,v,v.slice(0,7)),g=[].concat(v,u,v,p,v,p,v,v,p,v,p,v,v.slice(0,7));u=r(-28,0),h=r(-29,0),p=r(-30,0),v=r(-31,0);var y=[].concat(v,h,v,p,v,p,v,v,p,v,p,v,v.slice(0,7)),_=[].concat(v,u,v,p,v,p,v,v,p,v,p,v,v.slice(0,7)),w=[0,31,60,91,121,152,182,213,244,274,305,335,366],b=[0,31,59,90,120,151,181,212,243,273,304,334,365],k=function(){for(var e=[],t=0;55>t;t++)e=e.concat(r(7));return e}(),C=function(e,t){if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t};C.prototype={nth:function(e){return this.n==e?this:new C(this.weekday,e)},equals:function(e){return this.weekday==e.weekday&&this.n==e.n},toString:function(){var e=["MO","TU","WE","TH","FR","SA","SU"][this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},getJsWeekday:function(){return 6==this.weekday?0:this.weekday+1}};var D=function(e,t){this._string=null,e=e||{},this._cache=t?null:{all:!1,before:[],after:[],between:[]},this.origOptions={};var n=[],r=Object.keys(e),i=Object.keys(D.DEFAULT_OPTIONS);if(r.forEach(function(t){this.origOptions[t]=e[t],d(i,t)||n.push(t)},this),n.length)throw new Error("Invalid options: "+n.join(", "));if(!D.FREQUENCIES[e.freq]&&null===e.byeaster)throw new Error("Invalid frequency: "+String(e.freq));i.forEach(function(t){d(r,t)||(e[t]=D.DEFAULT_OPTIONS[t])});var o=this.options=e;if(null!==o.byeaster&&(o.freq=D.YEARLY),o.dtstart||(o.dtstart=new Date,o.dtstart.setMilliseconds(0)),null===o.wkst?o.wkst=D.MO.weekday:"number"==typeof o.wkst||(o.wkst=o.wkst.weekday),null!==o.bysetpos){"number"==typeof o.bysetpos&&(o.bysetpos=[o.bysetpos]);
for(var s=0;s<o.bysetpos.length;s++){var c=o.bysetpos[s];if(0==c||!(c>=-366&&366>=c))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(l(o.byweekno)||l(o.byyearday)||l(o.bymonthday)||null!==o.byweekday||null!==o.byeaster))switch(o.freq){case D.YEARLY:o.bymonth||(o.bymonth=o.dtstart.getMonth()+1),o.bymonthday=o.dtstart.getDate();break;case D.MONTHLY:o.bymonthday=o.dtstart.getDate();break;case D.WEEKLY:o.byweekday=a.getWeekday(o.dtstart)}if(null===o.bymonth||o.bymonth instanceof Array||(o.bymonth=[o.bymonth]),null===o.byyearday||o.byyearday instanceof Array||(o.byyearday=[o.byyearday]),null===o.bymonthday)o.bymonthday=[],o.bynmonthday=[];else if(o.bymonthday instanceof Array){var f=[],u=[];for(s=0;s<o.bymonthday.length;s++){var c=o.bymonthday[s];c>0?f.push(c):0>c&&u.push(c)}o.bymonthday=f,o.bynmonthday=u}else o.bymonthday<0?(o.bynmonthday=[o.bymonthday],o.bymonthday=[]):(o.bynmonthday=[],o.bymonthday=[o.bymonthday]);if(null===o.byweekno||o.byweekno instanceof Array||(o.byweekno=[o.byweekno]),null===o.byweekday)o.bynweekday=null;else if("number"==typeof o.byweekday)o.byweekday=[o.byweekday],o.bynweekday=null;else if(o.byweekday instanceof C)!o.byweekday.n||o.freq>D.MONTHLY?(o.byweekday=[o.byweekday.weekday],o.bynweekday=null):(o.bynweekday=[[o.byweekday.weekday,o.byweekday.n]],o.byweekday=null);else{var h=[],p=[];for(s=0;s<o.byweekday.length;s++){var v=o.byweekday[s];"number"==typeof v?h.push(v):!v.n||o.freq>D.MONTHLY?h.push(v.weekday):p.push([v.weekday,v.n])}o.byweekday=l(h)?h:null,o.bynweekday=l(p)?p:null}if(null===o.byhour?o.byhour=o.freq<D.HOURLY?[o.dtstart.getHours()]:null:"number"==typeof o.byhour&&(o.byhour=[o.byhour]),null===o.byminute?o.byminute=o.freq<D.MINUTELY?[o.dtstart.getMinutes()]:null:"number"==typeof o.byminute&&(o.byminute=[o.byminute]),null===o.bysecond?o.bysecond=o.freq<D.SECONDLY?[o.dtstart.getSeconds()]:null:"number"==typeof o.bysecond&&(o.bysecond=[o.bysecond]),o.freq>=D.HOURLY)this.timeset=null;else{for(this.timeset=[],s=0;s<o.byhour.length;s++)for(var m=o.byhour[s],g=0;g<o.byminute.length;g++)for(var y=o.byminute[g],_=0;_<o.bysecond.length;_++){var w=o.bysecond[_];this.timeset.push(new a.Time(m,y,w))}a.sort(this.timeset)}};D.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],D.YEARLY=0,D.MONTHLY=1,D.WEEKLY=2,D.DAILY=3,D.HOURLY=4,D.MINUTELY=5,D.SECONDLY=6,D.MO=new C(0),D.TU=new C(1),D.WE=new C(2),D.TH=new C(3),D.FR=new C(4),D.SA=new C(5),D.SU=new C(6),D.DEFAULT_OPTIONS={freq:null,dtstart:null,interval:1,wkst:D.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},D.parseText=function(e,t){return n().parseText(e,t)},D.fromText=function(e,t){return n().fromText(e,t)},D.optionsToString=function(e){var t,n,r,i,o,s=[];n=Object.keys(e),r=Object.keys(D.DEFAULT_OPTIONS);for(var l=0;l<n.length;l++)if(d(r,n[l])&&(t=n[l].toUpperCase(),i=e[n[l]],o=[],!(null===i||i instanceof Array&&!i.length))){switch(t){case"FREQ":i=D.FREQUENCIES[e.freq];break;case"WKST":i=i.toString();break;case"BYWEEKDAY":t="BYDAY",i instanceof Array||(i=[i]);for(var c,f=0;f<i.length;f++)c=i[f],c instanceof C||(c=c instanceof Array?new C(c[0],c[1]):new C(c)),o[f]=c.toString();i=o;break;case"DTSTART":case"UNTIL":i=a.timeToUntilString(i);break;default:if(i instanceof Array){for(var f=0;f<i.length;f++)o[f]=String(i[f]);i=o}else i=String(i)}s.push([t,i])}for(var u=[],l=0;l<s.length;l++){var h=s[l];u.push(h[0]+"="+h[1].toString())}return u.join(";")},D.prototype={all:function(e){if(e)return this._iter(new M("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new T("all",{})),this._cacheAdd("all",t)),t},between:function(e,t,n,a){var r={before:t,after:e,inc:n};if(a)return this._iter(new M("between",r,a));var i=this._cacheGet("between",r);return i===!1&&(i=this._iter(new T("between",r)),this._cacheAdd("between",i,r)),i},before:function(e,t){var n={dt:e,inc:t},a=this._cacheGet("before",n);return a===!1&&(a=this._iter(new T("before",n)),this._cacheAdd("before",a,n)),a},after:function(e,t){var n={dt:e,inc:t},a=this._cacheGet("after",n);return a===!1&&(a=this._iter(new T("after",n)),this._cacheAdd("after",a,n)),a},count:function(){return this.all().length},toString:function(){return D.optionsToString(this.origOptions)},toText:function(e,t){return n().toText(this,e,t)},isFullyConvertibleToText:function(){return n().isFullyConvertible(this)},_cacheAdd:function(e,t,n){this._cache&&(t&&(t=t instanceof Date?a.clone(t):a.cloneDates(t)),"all"==e?this._cache.all=t:(n._value=t,this._cache[e].push(n)))},_cacheGet:function(e,t){if(!this._cache)return!1;var n=!1;if("all"==e)n=this._cache.all;else e:for(var r,i=0;i<this._cache[e].length;i++){r=this._cache[e][i];for(var o in t)if(t.hasOwnProperty(o)&&String(t[o])!=String(r[o]))continue e;n=r._value;break}if(!n&&this._cache.all){for(var s=new T(e,t),i=0;i<this._cache.all.length&&s.accept(this._cache.all[i]);i++);n=s.getValue(),this._cacheAdd(e,n,t)}return n instanceof Array?a.cloneDates(n):n instanceof Date?a.clone(n):n},clone:function(){return new D(this.origOptions)},_iter:function(e){var t=this.options.dtstart,n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),c=t.getHours(),f=t.getMinutes(),u=t.getSeconds(),h=a.getWeekday(t),p=(a.getYearDay(t),this.options.freq),v=this.options.interval,m=this.options.wkst,g=this.options.until,y=this.options.bymonth,_=this.options.byweekno,w=this.options.byyearday,b=this.options.byweekday,k=this.options.byeaster,C=this.options.bymonthday,T=this.options.bynmonthday,M=this.options.bysetpos,$=this.options.byhour,E=this.options.byminute,S=this.options.bysecond,O=new x(this);O.rebuild(n,r);var L={};L[D.YEARLY]=O.ydayset,L[D.MONTHLY]=O.mdayset,L[D.WEEKLY]=O.wdayset,L[D.DAILY]=O.ddayset,L[D.HOURLY]=O.ddayset,L[D.MINUTELY]=O.ddayset,L[D.SECONDLY]=O.ddayset,L=L[p];var j;if(p<D.HOURLY)j=this.timeset;else{var R={};R[D.HOURLY]=O.htimeset,R[D.MINUTELY]=O.mtimeset,R[D.SECONDLY]=O.stimeset,R=R[p],j=p>=D.HOURLY&&l($)&&!d($,c)||p>=D.MINUTELY&&l(E)&&!d(E,f)||p>=D.SECONDLY&&l(S)&&!d(S,f)?[]:R.call(O,c,f,u)}for(var H,I,A,z,Y,N,Q,F,W,B,q,U,P,V=0,K=this.options.count;;){for(F=L.call(O,n,r,i),B=F[0],q=F[1],U=F[2],H=!1,A=q;U>A;A++)I=B[A],(l(y)&&!d(y,O.mmask[I])||l(_)&&!O.wnomask[I]||l(b)&&!d(b,O.wdaymask[I])||l(O.nwdaymask)&&!O.nwdaymask[I]||null!==k&&!d(O.eastermask,I)||(l(C)||l(T))&&!d(C,O.mdaymask[I])&&!d(T,O.nmdaymask[I])||l(w)&&(I<O.yearlen&&!d(w,I+1)&&!d(w,-O.yearlen+I)||I>=O.yearlen&&!d(w,I+1-O.yearlen)&&!d(w,-O.nextyearlen+I-O.yearlen)))&&(B[I]=null,H=!0);if(l(M)&&l(j)){var J,G,X=[];for(A=0;A<M.length;A++){var W=M[A];0>W?(J=Math.floor(W/j.length),G=o(W,j.length)):(J=Math.floor((W-1)/j.length),G=o(W-1,j.length));try{for(F=[],z=q;U>z;z++){var Z=B[z];null!==Z&&F.push(Z)}I=0>J?F.slice(J)[0]:F[J];var ee=j[G],te=a.fromOrdinal(O.yearordinal+I),ne=a.combine(te,ee);d(X,ne)||X.push(ne)}catch(ae){}}for(a.sort(X),A=0;A<X.length;A++){var ne=X[A];if(g&&ne>g)return this._len=V,e.getValue();if(ne>=t){if(++V,!e.accept(ne))return e.getValue();if(K&&(--K,!K))return this._len=V,e.getValue()}}}else for(A=q;U>A;A++)if(I=B[A],null!==I){var te=a.fromOrdinal(O.yearordinal+I);for(z=0;z<j.length;z++){var ee=j[z],ne=a.combine(te,ee);if(g&&ne>g)return this._len=V,e.getValue();if(ne>=t){if(++V,!e.accept(ne))return e.getValue();if(K&&(--K,!K))return this._len=V,e.getValue()}}}if(P=!1,p==D.YEARLY){if(n+=v,n>a.MAXYEAR)return this._len=V,e.getValue();O.rebuild(n,r)}else if(p==D.MONTHLY){if(r+=v,r>12&&(N=Math.floor(r/12),Q=o(r,12),r=Q,n+=N,0==r&&(r=12,--n),n>a.MAXYEAR))return this._len=V,e.getValue();O.rebuild(n,r)}else if(p==D.WEEKLY)i+=m>h?-(h+1+(6-m))+7*v:-(h-m)+7*v,h=m,P=!0;else if(p==D.DAILY)i+=v,P=!0;else if(p==D.HOURLY){for(H&&(c+=Math.floor((23-c)/v)*v);;)if(c+=v,Y=s(c,24),N=Y.div,Q=Y.mod,N&&(c=Q,i+=N,P=!0),!l($)||d($,c))break;j=R.call(O,c,f,u)}else if(p==D.MINUTELY){for(H&&(f+=Math.floor((1439-(60*c+f))/v)*v);;)if(f+=v,Y=s(f,60),N=Y.div,Q=Y.mod,N&&(f=Q,c+=N,Y=s(c,24),N=Y.div,Q=Y.mod,N&&(c=Q,i+=N,P=!0,H=!1)),(!l($)||d($,c))&&(!l(E)||d(E,f)))break;j=R.call(O,c,f,u)}else if(p==D.SECONDLY){for(H&&(u+=Math.floor((86399-(3600*c+60*f+u))/v)*v);;)if(u+=v,Y=s(u,60),N=Y.div,Q=Y.mod,N&&(u=Q,f+=N,Y=s(f,60),N=Y.div,Q=Y.mod,N&&(f=Q,c+=N,Y=s(c,24),N=Y.div,Q=Y.mod,N&&(c=Q,i+=N,P=!0))),(!l($)||d($,c))&&(!l(E)||d(E,f))&&(!l(S)||d(S,u)))break;j=R.call(O,c,f,u)}if(P&&i>28){var re=a.monthRange(n,r-1)[1];if(i>re){for(;i>re;){if(i-=re,++r,13==r&&(r=1,++n,n>a.MAXYEAR))return this._len=V,e.getValue();re=a.monthRange(n,r-1)[1]}O.rebuild(n,r)}}}}},D.parseString=function(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t,n,r,i,o,s=e.split(";"),l={};for(t=0;t<s.length;t++)switch(o=s[t].split("="),r=o[0],i=o[1],r){case"FREQ":l.freq=D[i];break;case"WKST":l.wkst=D[i];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(-1!=i.indexOf(","))for(i=i.split(","),n=0;n<i.length;n++)/^[+-]?\d+$/.test(i[n])&&(i[n]=Number(i[n]));else/^[+-]?\d+$/.test(i)&&(i=Number(i));r=r.toLowerCase(),l[r]=i;break;case"BYDAY":var d,c,f,u=i.split(",");for(l.byweekday=[],n=0;n<u.length;n++)f=u[n],2==f.length?(c=D[f],l.byweekday.push(c)):(f=f.match(/^([+-]?\d)([A-Z]{2})$/),d=Number(f[1]),c=f[2],c=D[c].weekday,l.byweekday.push(new C(c,d)));break;case"DTSTART":l.dtstart=a.untilStringToDate(i);break;case"UNTIL":l.until=a.untilStringToDate(i);break;case"BYEASTER":l.byeaster=Number(i);break;default:throw new Error("Unknown RRULE property '"+r+"'")}return l},D.fromString=function(e){return new D(D.parseString(e))};var x=function(e){this.rrule=e,this.lastyear=null,this.lastmonth=null,this.yearlen=null,this.nextyearlen=null,this.yearordinal=null,this.yearweekday=null,this.mmask=null,this.mrange=null,this.mdaymask=null,this.nmdaymask=null,this.wdaymask=null,this.wnomask=null,this.nwdaymask=null,this.eastermask=null};x.prototype.easter=function(e,t){t=t||0;var n=e%19,a=Math.floor(e/100),r=e%100,i=Math.floor(a/4),o=a%4,s=Math.floor((a+8)/25),l=Math.floor((a-s+1)/3),d=Math.floor(19*n+a-i-l+15)%30,c=Math.floor(r/4),f=r%4,u=Math.floor(32+2*o+2*c-d-f)%7,h=Math.floor((n+11*d+22*u)/451),p=Math.floor((d+u-7*h+114)/31),v=(d+u-7*h+114)%31+1,m=Date.UTC(e,p-1,v+t),g=Date.UTC(e,0,1);return[Math.ceil((m-g)/864e5)]},x.prototype.rebuild=function(e,t){var n=this.rrule;if(e!=this.lastyear){this.yearlen=a.isLeapYear(e)?366:365,this.nextyearlen=a.isLeapYear(e+1)?366:365;var r=new Date(e,0,1);this.yearordinal=a.toOrdinal(r),this.yearweekday=a.getWeekday(r);var s=a.getWeekday(new Date(e,0,1));if(365==this.yearlen?(this.mmask=[].concat(c),this.mdaymask=[].concat(g),this.nmdaymask=[].concat(_),this.wdaymask=k.slice(s),this.mrange=[].concat(b)):(this.mmask=[].concat(f),this.mdaymask=[].concat(m),this.nmdaymask=[].concat(y),this.wdaymask=k.slice(s),this.mrange=[].concat(w)),l(n.options.byweekno)){this.wnomask=i(0,this.yearlen+7);var u,h,p;u=h=o(7-this.yearweekday+n.options.wkst,7),u>=4?(u=0,p=this.yearlen+o(this.yearweekday-n.options.wkst,7)):p=this.yearlen-u;for(var v,C,x=Math.floor(p/7),T=o(p,7),M=Math.floor(x+T/4),$=0;$<n.options.byweekno.length;$++)if(v=n.options.byweekno[$],0>v&&(v+=M+1),v>0&&M>=v){v>1?(C=u+7*(v-1),u!=h&&(C-=7-h)):C=u;for(var E=0;7>E&&(this.wnomask[C]=1,C++,this.wdaymask[C]!=n.options.wkst);E++);}if(d(n.options.byweekno,1)){var C=u+7*M;if(u!=h&&(C-=7-h),C<this.yearlen)for(var $=0;7>$&&(this.wnomask[C]=1,C+=1,this.wdaymask[C]!=n.options.wkst);$++);}if(u){var S;if(d(n.options.byweekno,-1))S=-1;else{var O=a.getWeekday(new Date(e-1,0,1)),L=o(7-O+n.options.wkst,7),j=a.isLeapYear(e-1)?366:365;L>=4?(L=0,S=Math.floor(52+o(j+o(O-n.options.wkst,7),7)/4)):S=Math.floor(52+o(this.yearlen-u,7)/4)}if(d(n.options.byweekno,S))for(var C=0;u>C;C++)this.wnomask[C]=1}}else this.wnomask=null}if(l(n.options.bynweekday)&&(t!=this.lastmonth||e!=this.lastyear)){var R=[];if(n.options.freq==D.YEARLY)if(l(n.options.bymonth))for($=0;$<n.options.bymonth.length;$++)t=n.options.bymonth[$],R.push(this.mrange.slice(t-1,t+1));else R=[[0,this.yearlen]];else n.options.freq==D.MONTHLY&&(R=[this.mrange.slice(t-1,t+1)]);if(l(R)){this.nwdaymask=i(0,this.yearlen);for(var $=0;$<R.length;$++){var H=R[$],I=H[0],A=H[1];A-=1;for(var E=0;E<n.options.bynweekday.length;E++){var s=n.options.bynweekday[E][0],v=n.options.bynweekday[E][1];0>v?(C=A+7*(v+1),C-=o(this.wdaymask[C]-s,7)):(C=I+7*(v-1),C+=o(7-this.wdaymask[C]+s,7)),C>=I&&A>=C&&(this.nwdaymask[C]=1)}}}this.lastyear=e,this.lastmonth=t}null!==n.options.byeaster&&(this.eastermask=this.easter(e,n.options.byeaster))},x.prototype.ydayset=function(e,t,n){return[r(this.yearlen),0,this.yearlen]},x.prototype.mdayset=function(e,t,n){for(var a=i(null,this.yearlen),r=this.mrange[t-1],o=this.mrange[t],s=r;o>s;s++)a[s]=s;return[a,r,o]},x.prototype.wdayset=function(e,t,n){for(var r=i(null,this.yearlen+7),o=a.toOrdinal(new Date(e,t-1,n))-this.yearordinal,s=o,l=0;7>l&&(r[o]=o,++o,this.wdaymask[o]!=this.rrule.options.wkst);l++);return[r,s,o]},x.prototype.ddayset=function(e,t,n){var r=i(null,this.yearlen),o=a.toOrdinal(new Date(e,t-1,n))-this.yearordinal;return r[o]=o,[r,o,o+1]},x.prototype.htimeset=function(e,t,n){for(var r=[],i=this.rrule,o=0;o<i.options.byminute.length;o++){t=i.options.byminute[o];for(var s=0;s<i.options.bysecond.length;s++)n=i.options.bysecond[s],r.push(new a.Time(e,t,n))}return a.sort(r),r},x.prototype.mtimeset=function(e,t,n){for(var r=[],i=this.rrule,o=0;o<i.options.bysecond.length;o++)n=i.options.bysecond[o],r.push(new a.Time(e,t,n));return a.sort(r),r},x.prototype.stimeset=function(e,t,n){return[new a.Time(e,t,n)]};var T=function(e,t){this.init(e,t)};T.prototype={init:function(e,t){this.method=e,this.args=t,this._result=[],this.minDate=null,this.maxDate=null,"between"==e?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):"before"==e?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):"after"==e&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))},accept:function(e){var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if("between"==this.method){if(t)return!0;if(n)return!1}else if("before"==this.method){if(n)return!1}else if("after"==this.method)return t?!0:(this.add(e),!1);return this.add(e)},add:function(e){return this._result.push(e),!0},getValue:function(){switch(this.method){case"all":case"between":return this._result;case"before":case"after":return this._result.length?this._result[this._result.length-1]:null}}};var M=function(e,t,n){var a=["all","between"];if(!d(a,e))throw new Error('Invalid method "'+e+'". Only all and between works with iterator.');this.add=function(e){return n(e,this._result.length)?(this._result.push(e),!0):!1},this.init(e,t)};M.prototype=T.prototype,t&&(module.exports={RRule:D}),"undefined"==typeof ender&&(e.RRule=D),"function"==typeof define&&define.amd&&define("rrule",[],function(){return D})}(this),function(e){var t,n="undefined"!=typeof module&&module.exports;if(n)t=require("./rrule").RRule;else if(e.RRule)t=e.RRule;else{if("undefined"==typeof require)throw new Error("rrule.js is required for rrule/nlp.js to work");t||(t=require("rrule"))}var a=function(e,t){return-1!=e.indexOf(t)},r=function(e,t,n){if(this.gettext=t||function(e){return e},this.language=n||d,this.text="",this.rrule=e,this.freq=e.options.freq,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),r=[].concat(this.options.bynmonthday);a.sort(),r.sort(),r.reverse(),this.bymonthday=a.concat(r),this.bymonthday.length||(this.bymonthday=null)}if(this.origOptions.byweekday){var i=this.origOptions.byweekday instanceof Array?this.origOptions.byweekday:[this.origOptions.byweekday],o=String(i);this.byweekday={allWeeks:i.filter(function(e){return!Boolean(e.n)}),someWeeks:i.filter(function(e){return Boolean(e.n)}),isWeekdays:-1!=o.indexOf("MO")&&-1!=o.indexOf("TU")&&-1!=o.indexOf("WE")&&-1!=o.indexOf("TH")&&-1!=o.indexOf("FR")&&-1==o.indexOf("SA")&&-1==o.indexOf("SU")};var s=function(e,t){return e.weekday-t.weekday};this.byweekday.allWeeks.sort(s),this.byweekday.someWeeks.sort(s),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null};r.IMPLEMENTED=[];var i=["count","until","interval","byweekday","bymonthday","bymonth"];r.IMPLEMENTED[t.DAILY]=i,r.IMPLEMENTED[t.WEEKLY]=i,r.IMPLEMENTED[t.MONTHLY]=i,r.IMPLEMENTED[t.YEARLY]=["byweekno","byyearday"].concat(i),r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED))return!1;if(e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(a(["dtstart","wkst","freq"],n))return!0;if(!a(r.IMPLEMENTED[e.options.freq],n))return t=!1,!1}return t},r.prototype={isFullyConvertible:function(){return r.isFullyConvertible(this.rrule)},toString:function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[t.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var n=this.options.until;this.add(this.language.monthNames[n.getMonth()]).add(n.getDate()+",").add(n.getFullYear())}else this.options.count&&this.add(e("for")).add(this.options.count).add(e(this.plural(this.options.count)?"times":"time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},DAILY:function(){var e=this.gettext;1!=this.options.interval&&this.add(this.options.interval),this.byweekday&&this.byweekday.isWeekdays?this.add(e(this.plural(this.options.interval)?"weekdays":"weekday")):this.add(e(this.plural(this.options.interval)?"days":"day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday()},WEEKLY:function(){var e=this.gettext;1!=this.options.interval&&this.add(this.options.interval).add(e(this.plural(this.options.interval)?"weeks":"week")),this.byweekday&&this.byweekday.isWeekdays?1==this.options.interval?this.add(e(this.plural(this.options.interval)?"weekdays":"weekday")):this.add(e("on")).add(e("weekdays")):(1==this.options.interval&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},MONTHLY:function(){var e=this.gettext;this.origOptions.bymonth?(1!=this.options.interval&&(this.add(this.options.interval).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(1!=this.options.interval&&this.add(this.options.interval),this.add(e(this.plural(this.options.interval)?"months":"month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},YEARLY:function(){var e=this.gettext;this.origOptions.bymonth?(1!=this.options.interval&&(this.add(this.options.interval),this.add(e("years"))),this._bymonth()):(1!=this.options.interval&&this.add(this.options.interval),this.add(e(this.plural(this.options.interval)?"years":"year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(e(this.plural(this.options.byweekno.length)?"weeks":"week")).add(this.list(this.options.byweekno,null,e("and")))},_bymonthday:function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},_byweekday:function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},_bymonth:function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},nth:function(e){var t,n,a=this.gettext;if(-1==e)return a("last");switch(n=Math.abs(e)){case 1:case 21:case 31:t=n+a("st");break;case 2:case 22:t=n+a("nd");break;case 3:case 23:t=n+a("rd");break;default:t=n+a("th")}return 0>e?t+" "+a("last"):t},monthtext:function(e){return this.language.monthNames[e-1]},weekdaytext:function(e){var t="number"==typeof e?e:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},plural:function(e){return e%100!=1},add:function(e){return this.text.push(" "),this.text.push(e),this},list:function(e,t,n,a){var r=function(e,t,n){for(var a="",r=0;r<e.length;r++)0!=r&&(a+=r==e.length-1?" "+n+" ":t+" "),a+=e[r];return a};a=a||",",t=t||function(e){return e};var i=this,o=function(e){return t.call(i,e)};return n?r(e.map(o),a,n):e.map(o).join(a+" ")}};var o=function(e,n){return new t(s(e,n))},s=function(e,n){function a(){u.expect("every");var e;if((e=u.accept("number"))&&(h.interval=parseInt(e[0])),u.isDone())throw new Error("Unexpected end");switch(u.symbol){case"day(s)":h.freq=t.DAILY,u.nextSymbol()&&(r(),f());break;case"weekday(s)":h.freq=t.WEEKLY,h.byweekday=[t.MO,t.TU,t.WE,t.TH,t.FR],u.nextSymbol(),f();break;case"week(s)":h.freq=t.WEEKLY,u.nextSymbol()&&(r(),f());break;case"month(s)":h.freq=t.MONTHLY,u.nextSymbol()&&(r(),f());break;case"year(s)":h.freq=t.YEARLY,u.nextSymbol()&&(r(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":if(h.freq=t.WEEKLY,h.byweekday=[t[u.symbol.substr(0,2).toUpperCase()]],!u.nextSymbol())return;for(;u.accept("comma");){if(u.isDone())throw new Error("Unexpected end");var n;if(!(n=o()))throw new Error("Unexpected symbol "+u.symbol+", expected weekday");h.byweekday.push(t[n]),u.nextSymbol()}c(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(h.freq=t.YEARLY,h.bymonth=[i()],!u.nextSymbol())return;for(;u.accept("comma");){if(u.isDone())throw new Error("Unexpected end");var a;if(!(a=i()))throw new Error("Unexpected symbol "+u.symbol+", expected month");h.bymonth.push(a),u.nextSymbol()}r(),f();break;default:throw new Error("Unknown symbol")}}function r(){var e=u.accept("on"),n=u.accept("the");if(e||n)do{var a,r,l;if(a=s())(r=o())?(u.nextSymbol(),h.byweekday||(h.byweekday=[]),h.byweekday.push(t[r].nth(a))):(h.bymonthday||(h.bymonthday=[]),h.bymonthday.push(a),u.accept("day(s)"));else if(r=o())u.nextSymbol(),h.byweekday||(h.byweekday=[]),h.byweekday.push(t[r]);else if("weekday(s)"==u.symbol)u.nextSymbol(),h.byweekday||(h.byweekday=[]),h.byweekday.push(t.MO),h.byweekday.push(t.TU),h.byweekday.push(t.WE),h.byweekday.push(t.TH),h.byweekday.push(t.FR);else if("week(s)"==u.symbol){u.nextSymbol();var d;if(!(d=u.accept("number")))throw new Error("Unexpected symbol "+u.symbol+", expected week number");for(h.byweekno=[d[0]];u.accept("comma");){if(!(d=u.accept("number")))throw new Error("Unexpected symbol "+u.symbol+"; expected monthday");h.byweekno.push(d[0])}}else{if(!(l=i()))return;u.nextSymbol(),h.bymonth||(h.bymonth=[]),h.bymonth.push(l)}}while(u.accept("comma")||u.accept("the")||u.accept("on"))}function i(){switch(u.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function o(){switch(u.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return u.symbol.substr(0,2).toUpperCase();default:return!1}}function s(){switch(u.symbol){case"last":return u.nextSymbol(),-1;case"first":return u.nextSymbol(),1;case"second":return u.nextSymbol(),u.accept("last")?-2:2;case"third":return u.nextSymbol(),u.accept("last")?-3:3;case"nth":var e=parseInt(u.value[1]);if(-366>e||e>366)throw new Error("Nth out of range: "+e);return u.nextSymbol(),u.accept("last")?-e:e;default:return!1}}function c(){u.accept("on"),u.accept("the");var e;if(e=s())for(h.bymonthday=[e],u.nextSymbol();u.accept("comma");){if(!(e=s()))throw new Error("Unexpected symbol "+u.symbol+"; expected monthday");h.bymonthday.push(e),u.nextSymbol()}}function f(){if("until"==u.symbol){var e=Date.parse(u.text);if(!e)throw new Error("Cannot parse until date:"+u.text);h.until=new Date(e)}else u.accept("for")&&(h.count=u.value[0],u.expect("number"))}var u=new l((n||d).tokens);if(!u.start(e))return null;var h={};return a(),h},l=function(e){this.rules=e};l.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},l.prototype.isDone=function(){return this.done&&null==this.symbol},l.prototype.nextSymbol=function(){var e,t,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;e=null;var a,r;for(var i in this.rules)r=this.rules[i],(a=r.exec(n.text))&&(null==e||a[0].length>e[0].length)&&(e=a,t=i);if(null!=e&&(this.text=this.text.substr(e[0].length),""==this.text&&(this.done=!0)),null==e)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"==t);return this.symbol=t,this.value=e,!0},l.prototype.accept=function(e){if(this.symbol==e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},l.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)};var d={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,"for":/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},c={fromText:o,parseText:s,isFullyConvertible:r.isFullyConvertible,toText:function(e,t,n){return new r(e,t,n).toString()}};n?module.exports=c:e._RRuleNLP=c,"function"==typeof define&&define.amd&&define("rrule",[],function(){return t})}(this),Scheduler=function(e,t,n){this.test_mode=n===!0?!0:!1,this.start_date=e,this.exception_dates=[],this.repeat_dates=[],this.rule=null,t&&(this.rule=RRule.fromString("DTSTART="+this.timeToUntilString(e)+";"+t),this.rule.dtstart=e)},Scheduler.prototype.timeToUntilString=function(e){for(var t,n=new Date(e),a=[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),"T",n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),"Z"],r=0;r<a.length;r++)t=a[r],!/[TZ]/.test(t)&&10>t&&(a[r]="0"+String(t));return a.join("")},Scheduler.prototype.all_occurrences=function(e,t){if(null==this.rule)return[this.start_date];var n=[];if(n=this.rule.between(new Date(e),new Date(t)),this.repeat_dates.length>0){for(var a=0;a<this.repeat_dates.length;a++){var r=new Date(this.repeat_dates[a]);rhc_in_array(s,n)||n.push(r)}n.sort()}for(var i=n.length,o=[],a=0;i>a;a++){var r=n[a],s=r.getTime();rhc_in_array(s,this.exception_dates)||o.push(this.test_mode?s:r)}return o},Scheduler.prototype.occurrences_between=function(e,t){var n=e.getTime(),a=t.getTime();return this.all_occurrences(n,a)},Scheduler.prototype.limited_occurrences=function(e,t,n){var a=begin_date.getTime(),r=end_date.getTime();return this.all_occurrences(a,r).slice(0,n)},Scheduler.prototype.add_exception_dates=function(e){for(var t=e.length,n=0;t>n;n++)this.exception_dates.push(e[n].getTime());this.exception_dates.sort()},Scheduler.prototype.add_rdates=function(e){for(var t=e.length,n=0;t>n;n++)this.repeat_dates.push(e[n].getTime());this.repeat_dates.sort()},function(e,t){function n(t){e.extend(!0,De,t)}function r(n,a,r){function c(t,n,a){e(he).find(".fc-filters-dialog").length>0&&(a||e(he).find(".fc-filters-dialog").is(":visible")?e(he).find(".fc-filters-dialog").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){e(this).hide()}):(jQuery(".fct-tooltip").trigger("close-tooltip"),e(he).find(".fc-filters-dialog").stop().show().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:1,top:0},"fast","linear",function(){e(this).find(".fbd-unchecked").css("overflow-y","auto")})))}function f(e){ie?m()&&(T(),D(e)):u()}function u(){oe=a.theme?"ui":"fc",n.addClass("fc"),a.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),a.theme&&n.addClass("ui-widget"),ie=e("<div class='fc-content' style='position:relative'/>").prependTo(n),ae=new i(ne,a),re=ae.render(),re&&n.prepend(re),_(a.defaultView),a.handleWindowResize&&e(window).resize($),y()||h()}function h(){setTimeout(function(){!se.start&&y()&&C()},0)}function v(){se&&(te("viewDestroy",se,se,se.element),se.triggerEventDestroy()),e(window).unbind("resize",$),ae.destroy(),ie.remove(),n.removeClass("fc fc-rtl ui-widget")}function m(){return n.is(":visible")}function y(){return e("body").is(":visible")}function _(e){se&&e==se.name||w(e)}function w(t){firstTime=0==ie.find(".fc-view").length?!0:!1,noTransition=firstTime||ne.options.transition.notransition&&1==parseInt(ne.options.transition.notransition)?!0:!1;var n=se;if(jQuery(".fct-tooltip").trigger("close-tooltip"),ve++,se&&(te("viewDestroy",se,se,se.element),F(),se.triggerEventDestroy(),G(),noTransition&&se.element.remove(),ae.deactivateButton(se.name)),ae.activateButton(t),se=new Me[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(ie),ne),n&&n.viewLeave&&n.viewLeave(n,se,ne),se.transitionStarted&&se.transitionStarted(n),!noTransition){ie.css("overflow","hidden");var a=ie.width(),r=ie.height(),i={rtl:{newView:{left:a,top:0},oldView:{left:-1*a,top:0}},ltr:{newView:{left:-1*a,top:0},oldView:{left:a,top:0}},ttb:{newView:{left:0,top:-1*r},oldView:{left:0,top:r}},btt:{newView:{left:0,top:r},oldView:{left:0,top:-1*r}}},o=ne.options.transition.direction?ne.options.transition.direction:"horizontal";if(n){if(0==e(".fc-button-"+t).length)var s="horizontal"==o?i.rtl:i.ttb;else if(e(".fc-button-"+n.name).length>0&&e(".fc-button-"+t).length>0&&e(".fc-button-"+n.name).position().left<e(".fc-button-"+t).position().left)var s="horizontal"==o?i.rtl:i.ttb;else var s="horizontal"==o?i.ltr:i.btt;se.lastView=n.name}else{var s="horizontal"==o?i.rtl:i.ttb;se.lastView=!1}return n&&n.element.css("z-index",0).css("position","absolute"),se.element.appendTo(ie).css("left",s.newView.left).css("top",s.newView.top).css("opacity",0).css("z-index",1).show(),n.element.animate({opacity:0,left:s.oldView.left,top:s.oldView.top},ne.options.transition.duration||"slow",ne.options.transition.easing||"linear",function(){n.element.hide().css("position","relative").css("opacity",1).css("left",0)}),C(),G(),void se.element.animate({opacity:1,left:0,top:0},ne.options.transition.duration||"slow",ne.options.transition.easing||"linear",function(){n.element.hide().css("position","relative"),se.transitionEnded&&se.transitionEnded(n),X(),ve--,ie.find(".fc-view:hidden").remove()})}se.transitionEnded&&se.transitionEnded(n),C(),X(),ve--}function C(e){(!se.start||e||me<se.start||me>=se.end)&&m()&&D(e)}function D(t){
if(ve++,se.start&&(te("viewDestroy",se,se,se.element),F(),L()),G(),se.render(me,t||0),ne.options.skipMonths&&-1!=e.inArray(me.getMonth(),ne.options.skipMonths)){increase=t||1;for(var n=0;n++<366;){if(-1==e.inArray(me.getMonth(),ne.options.skipMonths)){se.render(me,0);break}me.setDate(me.getDate()+increase)}}M(),X(),(se.afterRender||A)(),Y(),N(),te("viewRender",se,se,se.element),se.trigger("viewDisplay",he),ve--,R()}function x(){if(m()){if(F(),L(),T(),M(),"rhc_event"==se.name)return;O()}}function T(){de=a.contentHeight?a.contentHeight:a.height?a.height-(re?re.height():0)-j(ie):Math.round(ie.width()/Math.max(a.aspectRatio,.5))}function M(){de===t&&T(),ve++,se.setHeight(de),se.setWidth(ie.width()),ve--,le=n.outerWidth()}function $(){if(!ve)if(se.start){var e=++pe;setTimeout(function(){e==pe&&!ve&&m()&&le!=(le=n.outerWidth())&&(ve++,x(),se.trigger("windowResize",he),ve--)},200)}else h()}function E(){L(),H()}function S(e){L(),O(e)}function O(e){m()&&(se.setEventData(ge),se.renderEvents(ge,e),se.trigger("eventAfterAllRender"))}function L(){se.triggerEventDestroy(),se.clearEvents(),se.clearEventData()}function R(){!a.lazyFetching||fe(se.visStart,se.visEnd)?H():O()}function H(){ue(se.visStart,se.visEnd)}function I(e){ge=e,O()}function z(e){S(e)}function Y(){ae.updateTitle(se.title)}function N(){var e=new Date;e>=se.start&&e<se.end?ae.disableButton("today"):ae.enableButton("today")}function Q(e,n,a){se.select(e,n,a===t?!0:a)}function F(){se&&se.unselect()}function W(){C(-1)}function B(){C(1)}function q(){s(me,-1),C()}function U(){s(me,1),C()}function P(){me=new Date,C()}function V(e,t,n){e instanceof Date?me=p(e):g(me,e,t,n),C()}function K(e,n,a){e!==t&&s(me,e),n!==t&&l(me,n),a!==t&&d(me,a),C()}function J(){return p(me)}function G(){ie.css({width:"100%",height:ie.height(),overflow:"hidden"})}function X(){ie.css({width:"",height:"",overflow:""})}function Z(){return se}function ee(e,n){return n===t?a[e]:void(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(a[e]=n,x()))}function te(e,t){return a[e]?a[e].apply(t||he,Array.prototype.slice.call(arguments,2)):void 0}var ne=this;ne.options=a,ne.render=f,ne.destroy=v,ne.refetchEvents=E,ne.reportEvents=I,ne.reportEventChange=z,ne.rerenderEvents=S,ne.changeView=_,ne.select=Q,ne.unselect=F,ne.prev=W,ne.next=B,ne.prevYear=q,ne.nextYear=U,ne.today=P,ne.gotoDate=V,ne.incrementDate=K,ne.formatDate=function(e,t){return b(e,t,a)},ne.formatDates=function(e,t,n){return k(e,t,n,a)},ne.getDate=J,ne.getView=Z,ne.option=ee,ne.trigger=te,ne.rhc_search=c,o.call(ne,a,r);var ae,re,ie,oe,se,le,de,ce,fe=ne.isFetchNeeded,ue=ne.fetchEvents,he=n[0],pe=0,ve=0,me=new Date,ge=[];ne.date=me,g(me,a.year,a.month,a.date),a.droppable&&e(document).bind("dragstart",function(t,n){var r=t.target,i=e(r);if(!i.parents(".fc").length){var o=a.dropAccept;(e.isFunction(o)?o.call(r,i):i.is(o))&&(ce=r,se.dragStart(ce,t,n))}}).bind("dragstop",function(e,t){ce&&(se.dragStop(ce,e,t),ce=null)})}function i(t,n){function a(){u=n.theme?"ui":"fc";var t=n.header;return t?h=e("<div class='fc-header'/>").append(e("<div class='fc-header-row' />").append(i("center")).append(i("left")).append(i("right"))):void 0}function r(){h.remove()}function i(a){var r=e("<div class='fc-header-cell fc-header-"+a+"'/>"),i=n.header[a];return i&&e.each(i.split(" "),function(a){a>0&&r.append("<span class='fc-header-space'/>");var i;e.each(this.split(","),function(a,o){if("title"==o)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(u+"-corner-right"),i=null;else{var s;if(t[o]?s=t[o]:Me[o]?s=function(){c.removeClass(u+"-state-hover"),t.changeView(o)}:n[o]&&(s=function(){s=n[o]}),s){var l=n.theme?Q(n.buttonIcons,o):null,d=Q(n.buttonText,o),c=e("<span class='fc-button fc-button-"+o+" "+u+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":d)+"</span>").click(function(){c.hasClass(u+"-state-disabled")||s(t,r)}).mousedown(function(){c.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){c.removeClass(u+"-state-down")}).hover(function(){c.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){c.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(r);W(c),i||c.addClass(u+"-corner-left"),i=c}}}),i&&i.addClass(u+"-corner-right")}),r}function o(e){h.find("h2").html(e)}function s(e){h.find("span.fc-button-"+e).addClass(u+"-state-active")}function l(e){h.find("span.fc-button-"+e).removeClass(u+"-state-active")}function d(e){h.find("span.fc-button-"+e).addClass(u+"-state-disabled")}function c(e){h.find("span.fc-button-"+e).removeClass(u+"-state-disabled")}var f=this;f.render=a,f.destroy=r,f.updateTitle=o,f.activateButton=s,f.deactivateButton=l,f.disableButton=d,f.enableButton=c;var u,h=e([])}function o(n,a){function r(e,t){return!x||x>e||t>T}function i(e,t){x=e,T=t,H=[];var n=++L,a=O.length;j=a;for(var r=0;a>r;r++)o(O[r],n)}function o(t,a){s(t,function(r){if(a==L){if(r){n.eventDataTransform&&(r=e.map(r,n.eventDataTransform)),t.eventDataTransform&&(r=e.map(r,t.eventDataTransform));for(var i=0;i<r.length;i++)r[i].source=t,w(r[i]);H=H.concat(r)}j--,j||E(H)}})}function s(t,a){var r,i,o=Te.sourceFetchers;for(r=0;r<o.length;r++){if(i=o[r](t,x,T,a),i===!0)return;if("object"==typeof i)return void s(i,a)}var l=t.events;if(l)e.isFunction(l)?(g(),l(p(x),p(T),function(e){a(e),_()})):e.isArray(l)?a(l):a();else{var d=t.url;if(d){var c,f=t.success,u=t.error,h=t.complete;c=e.isFunction(t.data)?t.data():t.data;var v=e.extend({},c||{}),m=P(t.startParam,n.startParam),y=P(t.endParam,n.endParam);m&&(v[m]=Math.round(+x/1e3)),y&&(v[y]=Math.round(+T/1e3)),g(),e.ajax(e.extend({},$e,t,{data:v,success:function(t){t=t||[];var n=U(f,this,arguments);e.isArray(n)&&(t=n),a(t)},error:function(){U(u,this,arguments),a()},complete:function(){U(h,this,arguments),_()}}))}else a()}}function l(e){e=d(e),e&&(j++,o(e,L))}function d(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(b(t),O.push(t),t):void 0}function c(t){O=e.grep(O,function(e){return!k(e,t)}),H=e.grep(H,function(e){return!k(e.source,t)}),E(H)}function f(){O=[],H=[],E(H)}function u(e){var t,n,a=H.length,r=$().defaultEventEnd,i=e.start-e._start,o=e.end?e.end-(e._end||r(e)):0;for(t=0;a>t;t++)n=H[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+i),e.end?n.end?n.end=new Date(+n.end+o):n.end=new Date(+r(n)+o):n.end=null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,w(n));w(e),E(H)}function h(e,t){w(e),e.source||(t&&(S.events.push(e),e.source=S),H.push(e)),E(H)}function v(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}H=e.grep(H,t,!0);for(var a=0;a<O.length;a++)e.isArray(O[a].events)&&(O[a].events=e.grep(O[a].events,t,!0))}else{H=[];for(var a=0;a<O.length;a++)e.isArray(O[a].events)&&(O[a].events=[])}E(H)}function m(t){return e.isFunction(t)?e.grep(H,t):t?(t+="",e.grep(H,function(e){return e._id==t})):H}function g(){R++||M("loading",null,!0,$())}function _(){--R||M("loading",null,!1,$())}function w(e){var a=e.source||{},r=P(a.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+Ee++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=p(e.start=y(e.start,r)),e.end=y(e.end,r),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?p(e.end):null,e.allDay===t&&(e.allDay=P(a.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function b(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Te.sourceNormalizers,n=0;n<t.length;n++)t[n](e)}function k(e,t){return e&&t&&C(e)==C(t)}function C(e){return("object"==typeof e?e.events||e.url:"")||e}var D=this;D.isFetchNeeded=r,D.fetchEvents=i,D.addEventSource=l,D.removeEventSource=c,D.updateEvent=u,D.renderEvent=h,D.removeEvents=v,D.clientEvents=m,D.normalizeEvent=w,D.removeEventSources=f;for(var x,T,M=D.trigger,$=D.getView,E=D.reportEvents,S={events:[]},O=[S],L=0,j=0,R=0,H=[],I=0;I<a.length;I++)d(a[I])}function s(e,t,n){return e.setFullYear(e.getFullYear()+t),n||u(e),e}function l(e,t,n){if(+e){var a=e.getMonth()+t,r=p(e);for(r.setDate(1),r.setMonth(a),e.setMonth(a),n||u(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(r>e?1:-1))}return e}function d(e,t,n){if(+e){var a=e.getDate()+t,r=p(e);r.setHours(9),r.setDate(a),e.setDate(a),n||u(e),c(e,r)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Le)}function f(e,t){return e.setMinutes(e.getMinutes()+t),e}function u(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function p(e,t){return t?u(new Date(+e)):new Date(+e)}function v(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function m(e,t){return Math.round((p(e,!0)-p(t,!0))/Oe)}function g(e,n,a,r){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),a!==t&&a!=e.getMonth()&&(e.setDate(1),e.setMonth(a)),r!==t&&e.setDate(r)}function y(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),_(e,n)||(e?new Date(e):null)):null}function _(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var a=new Date(n[1],0,1);if(t||!n[13]){var r=new Date(n[1],0,1,9,0);n[3]&&(a.setMonth(n[3]-1),r.setMonth(n[3]-1)),n[5]&&(a.setDate(n[5]),r.setDate(n[5])),c(a,r),n[7]&&a.setHours(n[7]),n[8]&&a.setMinutes(n[8]),n[10]&&a.setSeconds(n[10]),n[12]&&a.setMilliseconds(1e3*Number("0."+n[12])),c(a,r)}else if(a.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),a.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var i=60*Number(n[16])+(n[18]?Number(n[18]):0);i*="-"==n[15]?1:-1,a=new Date(+a+60*i*1e3)}return a}function w(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function b(e,t,n){return k(e,null,t,n)}function k(e,t,n,a){a=a||De;var r,i,o,s,l=e,d=t,c=n.length,f="";for(r=0;c>r;r++)if(i=n.charAt(r),"'"==i){for(o=r+1;c>o;o++)if("'"==n.charAt(o)){l&&(f+=o==r+1?"'":n.substring(r+1,o),r=o);break}}else if("("==i){for(o=r+1;c>o;o++)if(")"==n.charAt(o)){var u=b(l,n.substring(r+1,o),a);parseInt(u.replace(/\D/,""),10)&&(f+=u),r=o;break}}else if("["==i){for(o=r+1;c>o;o++)if("]"==n.charAt(o)){var h=n.substring(r+1,o),u=b(l,h,a);u!=b(d,h,a)&&(f+=u),r=o;break}}else if("{"==i)l=t,d=e;else if("}"==i)l=e,d=t;else{for(o=c;o>r;o--)if(s=Re[n.substring(r,o)]){l&&(f+=s(l,a)),r=o-1;break}o==r&&l&&(f+=i)}return f}function C(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function D(e){return e.end?x(e.end,e.allDay):d(p(e.start),1)}function x(e,t){return e=p(e),t||e.getHours()||e.getMinutes()?d(e,1):u(e)}function T(n,a,r){n.unbind("mouseover").mouseover(function(n){for(var i,o,s,l=n.target;l!=this;)i=l,l=l.parentNode;(o=i._fci)!==t&&(i._fci=t,s=a[o],r(s.event,s.element,s),e(n.target).trigger(n)),n.stopPropagation()})}function M(t,n,a){for(var r,i=0;i<t.length;i++)r=e(t[i]),r.width(Math.max(0,n-E(r,a)))}function $(t,n,a){for(var r,i=0;i<t.length;i++)r=e(t[i]),r.height(Math.max(0,n-j(r,a)))}function E(e,t){return S(e)+L(e)+(t?O(e):0)}function S(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function O(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function L(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function j(e,t){return R(e)+I(e)+(t?H(e):0)}function R(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function H(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function I(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function A(){}function z(e,t){return e-t}function Y(e){return Math.max.apply(Math,e)}function N(e){return(10>e?"0":"")+e}function Q(e,n){if(e[n]!==t)return e[n];for(var a,r=n.split(/(?=[A-Z])/),i=r.length-1;i>=0;i--)if(a=e[r[i].toLowerCase()],a!==t)return a;return e[""]}function F(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function W(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function B(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function q(e,t){var n=e.source||{},a=e.color,r=n.color,i=t("eventColor"),o=e.backgroundColor||a||n.backgroundColor||r||t("eventBackgroundColor")||i,s=e.borderColor||a||n.borderColor||r||t("eventBorderColor")||i,l=e.textColor||n.textColor||t("eventTextColor"),d=[];return o&&d.push("background-color:"+o),s&&d.push("border-color:"+s),l&&d.push("color:"+l),d.join(";")}function U(t,n,a){if(e.isFunction(t)&&(t=[t]),t){var r,i;for(r=0;r<t.length;r++)i=t[r].apply(n,a)||i;return i}}function P(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function V(e,t){function n(e,n){var f=r("left_trim_date")?Math.abs(parseInt(r("left_trim_date"))):0,u=r("right_trim_date")?Math.abs(parseInt(r("right_trim_date"))):0;f=f>28?28:f,u=u>28?28:u,f&&u&&f>u&&(_tmp=f,f=u,u=_tmp);var h=!1;r("upcoming")&&r("upcoming_trim_past")&&(h=parseInt(r("upcoming_trim_past")),h=0==h?!1:!0);var v=new Date;n&&(l(e,n),e.setDate(1));var g=r("firstDay"),y=p(e,!0);if(y.setDate(1),end=l(p(y),1),h&&end.getTime()<v.getTime())return void t.next();h=h&&y.getTime()<v.getTime(),h&&(y=new Date,e=p(y,!0),end=l(p(y),1),end.setDate(0),end.setHours(23,59,59)),f&&y.setDate(f),u&&(end=p(y),end.setDate(u),end.setHours(23,59,59));var _=p(y);d(_,-((_.getDay()-g+7)%7)),o(_);var w=p(end);d(w,(7-w.getDay()+g)%7),o(w,-1,!0);var b=s(),k=Math.ceil(m(w,_)/7);if("fixed"==r("weekMode")&&(_weeks_to_add=6-k,_weeks_to_add>0&&d(w,7*_weeks_to_add),k=6,h))var k=Math.ceil(m(w,_)/7);a.title=c(y,r("titleFormat")),a.start=y,a.end=end,a.visStart=_,a.visEnd=w,i(k,b,!0)}var a=this;a.render=n,G.call(a,e,t,"month");var r=a.opt,i=a.renderBasic,o=a.skipHiddenDays,s=a.getCellsPerWeek,c=t.formatDate}function K(e,t){function n(e,t){t&&d(e,7*t);var n=d(p(e),-((e.getDay()-r("firstDay")+7)%7)),c=d(p(n),7),f=p(n);o(f);var u=p(c);o(u,-1,!0);var h=s();a.start=n,a.end=c,a.visStart=f,a.visEnd=u,a.title=l(f,d(p(u),-1),r("titleFormat")),i(1,h,!0)}var a=this;a.render=n,G.call(a,e,t,"basicWeek");var r=a.opt,i=a.renderBasic,o=a.skipHiddenDays,s=a.getCellsPerWeek,l=t.formatDates}function J(e,t){function n(e,t){t&&d(e,t),o(e,0>t?-1:1);var n=p(e,!0),l=d(p(n),1);a.title=s(e,r("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=l,i(1,1,!1)}var a=this;a.render=n,G.call(a,e,t,"basicDay");var r=a.opt,i=a.renderBasic,o=a.skipHiddenDays,s=t.formatDate}function G(t,n,a){function r(e,t,n){te=e,ne=t,ae=n,i(),N||o(),s()}function i(){le=pe("theme")?"ui":"fc",de=pe("columnFormat"),ce=pe("weekNumbers"),fe=pe("weekNumberTitle"),ue="iso"!=pe("weekNumberCalculation")?"w":"W"}function o(){K=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function s(){var n=l();A&&A.remove(),A=e(n).appendTo(t),z=A.find("thead"),Y=z.find(".fc-day-header"),N=A.find("tbody"),Q=N.find("tr"),q=N.find(".fc-day"),U=Q.find("td:first-child"),P=Q.eq(0).find(".fc-day > div"),V=Q.eq(0).find(".fc-day-content > div"),B(z.add(z.find("tr"))),B(Q),Q.eq(0).addClass("fc-first"),Q.filter(":last").addClass("fc-last"),q.each(function(t,n){var a=De(Math.floor(t/ne),t%ne);ve("dayRender",I,a,e(n))}),g(q)}function l(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+f()+"</table>";return e}function c(){var e,t,n=le+"-widget-header",a="";for(a+="<thead><tr>",ce&&(a+="<th class='fc-week-number "+n+"'>"+F(fe)+"</th>"),e=0;ne>e;e++)t=De(0,e),a+="<th class='fc-day-header fc-"+Se[t.getDay()]+" "+n+"'>"+F(Me(t,de))+"</th>";return a+="</tr></thead>"}function f(){var e,t,n,a=le+"-widget-content",r="";for(r+="<tbody>",e=0;te>e;e++){for(r+="<tr class='fc-week'>",ce&&(n=De(e,0),r+="<td class='fc-week-number "+a+"'><div>"+F(Me(n,ue))+"</div></td>"),t=0;ne>t;t++)n=De(e,t),r+=h(n);r+="</tr>"}return r+="</tbody>"}function h(e){var t=le+"-widget-content",n=I.start.getMonth(),r=u(new Date),i="",o=["fc-day","fc-"+Se[e.getDay()],t];if(e.getMonth()!=n&&o.push("fc-other-month"),+e==+r?o.push("fc-today",le+"-state-highlight"):r>e?o.push("fc-past"):o.push("fc-future"),i+="<td class='"+o.join(" ")+"' data-date='"+Me(e,"yyyy-MM-dd")+"'><div>",ae){switch(a){case"basicWeek":value=F(Me(e,de));break;default:value=e.getDate()}i+="<div class='fc-day-number'>"+value+"</div>"}return i+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function v(t){if(!e(I.element).closest(".rhc_holder").is(".fc-small")){G=t;var n,a,r,i=G-z.height();"variable"==pe("weekMode")?n=a=Math.floor(i/(1==te?2:6)):(n=Math.floor(i/te),a=i-n*(te-1)),U.each(function(t,i){te>t&&(r=e(i),r.find("> div").css("min-height",(t==te-1?a:n)-j(r)))})}}function m(e){J=e,oe.clear(),se.clear(),ee=0,ce&&(ee=z.find("th.fc-week-number").outerWidth()),Z=Math.floor((J-ee)/ne),M(Y.slice(0,-1),Z)}function g(e){e.click(y).mousedown(ke)}function y(t){if(!pe("selectable")){var n=_(e(this).data("date"));ve("dayClick",this,n,!0,t)}}function w(e,t,n){n&&re.build();for(var a=Te(e,t,null),r=0;r<a.length;r++){var i=a[r];g(b(i.row,i.leftCol,i.row,i.rightCol))}}function b(e,n,a,r){var i=re.rect(e,n,a,r,t);return me(i,t)}function k(e,t){return p(e)}function C(e,t,n){w(e,d(p(t),1),!0)}function D(){ge()}function x(e,t,n){var a=xe(e),r=q[a.row*ne+a.col];ve("dayClick",r,e,t,n)}function T(e,t,n){ie.start(function(e){ge(),e&&b(e.row,e.col,e.row,e.col)},t)}function $(e,t,n){var a=ie.stop();if(ge(),a){var r=De(a);ve("drop",e,r,!0,t,n)}}function E(e){return p(e.start)}function S(e){return oe.left(e)}function O(e){return oe.right(e)}function L(e){return se.left(e)}function R(e){return se.right(e)}function H(e){return Q.eq(e)}var I=this;I.renderBasic=r,I.setHeight=v,I.setWidth=m,I.renderDayOverlay=w,I.defaultSelectionEnd=k,I.renderSelection=C,I.clearSelection=D,I.reportDayClick=x,I.dragStart=T,I.dragStop=$,I.defaultEventEnd=E,I.getHoverListener=function(){return ie},I.colLeft=S,I.colRight=O,I.colContentLeft=L,I.colContentRight=R,I.getIsCellAllDay=function(){return!0},I.allDayRow=H,I.getRowCnt=function(){return te},I.getColCnt=function(){return ne},I.getColWidth=function(){return Z},I.getDaySegmentContainer=function(){return K},he.call(I,t,n,a),_e.call(I),ye.call(I),X.call(I);var A,z,Y,N,Q,q,U,P,V,K,J,G,Z,ee,te,ne,ae,re,ie,oe,se,le,de,ce,fe,ue,pe=I.opt,ve=I.trigger,me=I.renderOverlay,ge=I.clearOverlays,ke=I.daySelectionMousedown,De=I.cellToDate,xe=I.dateToCell,Te=I.rangeToSegments,Me=n.formatDate;W(t.addClass("fc-grid")),re=new we(function(t,n){var a,r,i;Y.each(function(t,o){a=e(o),r=a.offset().left,t&&(i[1]=r),i=[r],n[t]=i}),i[1]=r+a.outerWidth(),Q.each(function(n,o){te>n&&(a=e(o),r=a.offset().top,n&&(i[1]=r),i=[r],t[n]=i)}),i[1]=r+a.outerHeight()}),ie=new be(re),oe=new Ce(function(e){return P.eq(e)}),se=new Ce(function(e){return V.eq(e)})}function X(){function e(e,t){n.renderDayEvents(e,t)}function t(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=e,n.clearEvents=t,pe.call(n)}function Z(e,t){function n(e,t){t&&d(e,7*t);var n=d(p(e),-((e.getDay()-r("firstDay")+7)%7)),c=d(p(n),7),f=p(n);o(f);var u=p(c);o(u,-1,!0);var h=s();a.title=l(f,d(p(u),-1),r("titleFormat")),a.start=n,a.end=c,a.visStart=f,a.visEnd=u,i(h)}var a=this;a.render=n,te.call(a,e,t,"agendaWeek");var r=a.opt,i=a.renderAgenda,o=a.skipHiddenDays,s=a.getCellsPerWeek,l=t.formatDates}function ee(e,t){function n(e,t){t&&d(e,t),o(e,0>t?-1:1);var n=p(e,!0),l=d(p(n),1);a.title=s(e,r("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=l,i(1)}var a=this;a.render=n,te.call(a,e,t,"agendaDay");var r=a.opt,i=a.renderAgenda,o=a.skipHiddenDays,s=t.formatDate}function te(n,a,r){function i(e){Re=e,o(),Z?l():s()}function o(){Ne=Ve("theme")?"ui":"fc",Qe=Ve("isRTL"),Fe=w(Ve("minTime")),We=w(Ve("maxTime")),Be=Ve("columnFormat"),qe=Ve("weekNumbers"),Ue=Ve("weekNumberTitle"),Pe="iso"!=Ve("weekNumberCalculation")?"w":"W",Oe=Ve("snapMinutes")||Ve("slotMinutes")}function s(){var t,a,r,i,o,s=Ne+"-widget-header",d=Ne+"-widget-content",c=Ve("slotMinutes")%15==0;for(l(),de=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ve("allDaySlot")?(ce=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(de),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ve("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",fe=e(t).appendTo(de),ue=fe.find("tr"),k(ue.find("td")),de.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):ce=e([]),pe=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(de),ve=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(pe),me=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ve),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=v(),i=f(p(a),We),f(a,Fe),He=0,r=0;i>a;r++)o=a.getMinutes(),t+="<tr class='fc-slot"+r+" "+(o?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(c&&o?"&nbsp;":it(a,Ve("axisFormat")))+"</th><td class='"+d+"'><div style='position:relative'>&nbsp;</div></td></tr>",f(a,Ve("slotMinutes")),He++;t+="</tbody></table>",ge=e(t).appendTo(ve),C(ge.find("td"))}function l(){var t=c();Z&&Z.remove(),Z=e(t).appendTo(n),ee=Z.find("thead"),te=ee.find("th").slice(1,-1),ae=Z.find("tbody"),re=ae.find("td").slice(0,-1),ie=re.find("> div"),oe=re.find(".fc-day-content > div"),se=re.eq(0),le=ie.eq(0),B(ee.add(ee.find("tr"))),B(ae.add(ae.find("tr")))}function c(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+h()+m()+"</table>";return e}function h(){var e,t,n,a=Ne+"-widget-header",r="";for(r+="<thead><tr>",qe?(e=nt(0,0),t=it(e,Pe),Qe?t+=Ue:t=Ue+t,r+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+F(t)+"</th>"):r+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;Re>n;n++)e=nt(0,n),r+="<th class='fc-"+Se[e.getDay()]+" fc-col"+n+" "+a+"'>"+F(it(e,Be))+"</th>";return r+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>"}function m(){var e,t,n,a,r,i=Ne+"-widget-header",o=Ne+"-widget-content",s=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n="",t=0;Re>t;t++)e=nt(0,t),r=["fc-col"+t,"fc-"+Se[e.getDay()],o],+e==+s?r.push(Ne+"-state-highlight","fc-today"):s>e?r.push("fc-past"):r.push("fc-future"),a="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=a;return l+=n,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}function g(e){e===t&&(e=xe),xe=e,ot={};var n=ae.position().top,a=pe.position().top,r=Math.min(e-n,ge.height()+a+1);le.height(r-j(se)),de.css("top",n),pe.height(r-a-1),Ee=ge.find("tr:first").height()+1,Le=Ve("slotMinutes")/Oe,je=Ee/Le}function y(t){De=t,ze.clear(),Ye.clear();var n=ee.find("th:first");fe&&(n=n.add(fe.find("th:first"))),n=n.add(ge.find("th:first")),Te=0,M(n.width("").each(function(t,n){Te=Math.max(Te,e(n).outerWidth())}),Te);var a=Z.find(".fc-agenda-gutter");fe&&(a=a.add(fe.find("th.fc-agenda-gutter")));var r=pe[0].clientWidth;$e=pe.width()-r,$e?(M(a,$e),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last"),Me=Math.floor((r-Te)/Re),M(te.slice(0,-1),Me)}function _(){function e(){pe.scrollTop(a)}var t=v(),n=p(t);n.setHours(Ve("firstHour"));var a=A(t,n)+1;e(),setTimeout(e,0)}function b(){_()}function k(e){e.click(D).mousedown(et)}function C(e){e.click(D).mousedown(V)}function D(e){if(!Ve("selectable")){var t=Math.min(Re-1,Math.floor((e.pageX-Z.offset().left-Te)/Me)),n=nt(0,t),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var r=parseInt(a[1])*Ve("slotMinutes"),i=Math.floor(r/60);n.setHours(i),n.setMinutes(r%60+Fe),Ke("dayClick",re[t],n,!1,e)}else Ke("dayClick",re[t],n,!0,e)}}function x(e,t,n){n&&Ie.build();for(var a=rt(e,t,null),r=0;r<a.length;r++){var i=a[r];k(T(i.row,i.leftCol,i.row,i.rightCol))}}function T(e,t,n,a){var r=Ie.rect(e,t,n,a,de);return Je(r,de)}function E(e,t){for(var n=0;Re>n;n++){var a=nt(0,n),r=d(p(a),1),i=new Date(Math.max(a,e)),o=new Date(Math.min(r,t));if(o>i){var s=Ie.rect(0,n,0,n,ve),l=A(a,i),c=A(a,o);s.top=l,s.height=c-l,C(Je(s,ve))}}}function S(e){return ze.left(e)}function O(e){return Ye.left(e)}function L(e){return ze.right(e)}function R(e){return Ye.right(e)}function H(e){return Ve("allDaySlot")&&!e.row}function I(e){var t=nt(0,e.col),n=e.row;return Ve("allDaySlot")&&n--,n>=0&&f(t,Fe+n*Oe),t}function A(e,n){if(e=p(e,!0),n<f(p(e),Fe))return 0;if(n>=f(p(e),We))return ge.height();var a=Ve("slotMinutes"),r=60*n.getHours()+n.getMinutes()-Fe,i=Math.floor(r/a),o=ot[i];return o===t&&(o=ot[i]=ge.find("tr").eq(i).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+Ee*(r%a/a)))}function Y(e){return ue}function N(e){var t=p(e.start);return e.allDay?t:f(t,Ve("defaultEventMinutes"))}function Q(e,t){return t?p(e):f(p(e),Ve("slotMinutes"))}function q(e,t,n){n?Ve("allDaySlot")&&x(e,d(p(t),1),!0):U(e,t)}function U(t,n){var a=Ve("selectHelper");if(Ie.build(),a){var r=at(t).col;if(r>=0&&Re>r){var i=Ie.rect(0,r,0,r,ve),o=A(t,t),s=A(t,n);if(s>o){if(i.top=o,i.height=s-o,i.left+=2,i.width-=5,e.isFunction(a)){var l=a(t,n);l&&(i.position="absolute",ke=e(l).css(i).appendTo(ve))}else i.isStart=!0,i.isEnd=!0,ke=e(tt({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},i)),ke.css("opacity",Ve("dragOpacity"));ke&&(C(ke),ve.append(ke),M(ke,i.width,!0),$(ke,i.height,!0))}}}else E(t,n)}function P(){Ge(),ke&&(ke.remove(),ke=null)}function V(t){if(1==t.which&&Ve("selectable")){Ze(t);var n;Ae.start(function(e,t){if(P(),e&&e.col==t.col&&!H(e)){var a=I(t),r=I(e);n=[a,f(p(a),Oe),r,f(p(r),Oe)].sort(z),U(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){Ae.stop(),n&&(+n[0]==+n[1]&&K(n[0],!1,e),Xe(n[0],n[3],!1,e))})}}function K(e,t,n){Ke("dayClick",re[at(e).col],e,t,n)}function J(e,t,n){Ae.start(function(e){if(Ge(),e)if(H(e))T(e.row,e.col,e.row,e.col);else{var t=I(e),n=f(p(t),Ve("defaultEventMinutes"));E(t,n)}},t)}function G(e,t,n){var a=Ae.stop();Ge(),a&&Ke("drop",e,I(a),H(a),t,n)}var X=this;X.renderAgenda=i,X.setWidth=y,X.setHeight=g,X.afterRender=b,X.defaultEventEnd=N,X.timePosition=A,X.getIsCellAllDay=H,X.allDayRow=Y,X.getCoordinateGrid=function(){return Ie},X.getHoverListener=function(){return Ae},X.colLeft=S,X.colRight=L,X.colContentLeft=O,X.colContentRight=R,X.getDaySegmentContainer=function(){return ce},X.getSlotSegmentContainer=function(){return me},X.getMinMinute=function(){return Fe},X.getMaxMinute=function(){return We},X.getSlotContainer=function(){return ve},X.getRowCnt=function(){return 1},X.getColCnt=function(){return Re},X.getColWidth=function(){return Me},X.getSnapHeight=function(){return je},X.getSnapMinutes=function(){return Oe},X.defaultSelectionEnd=Q,X.renderDayOverlay=x,X.renderSelection=q,X.clearSelection=P,X.reportDayClick=K,X.dragStart=J,X.dragStop=G,he.call(X,n,a,r),_e.call(X),ye.call(X),ne.call(X);var Z,ee,te,ae,re,ie,oe,se,le,de,ce,fe,ue,pe,ve,me,ge,ke,De,xe,Te,Me,$e,Ee,Oe,Le,je,Re,He,Ie,Ae,ze,Ye,Ne,Qe,Fe,We,Be,qe,Ue,Pe,Ve=X.opt,Ke=X.trigger,Je=X.renderOverlay,Ge=X.clearOverlays,Xe=X.reportSelection,Ze=X.unselect,et=X.daySelectionMousedown,tt=X.slotSegHtml,nt=X.cellToDate,at=X.dateToCell,rt=X.rangeToSegments,it=a.formatDate,ot={};W(n.addClass("fc-agenda")),Ie=new we(function(t,n){function a(e){return Math.max(l,Math.min(d,e))}var r,i,o;te.each(function(t,a){r=e(a),i=r.offset().left,t&&(o[1]=i),o=[i],n[t]=o}),o[1]=i+r.outerWidth(),Ve("allDaySlot")&&(r=ue,i=r.offset().top,t[0]=[i,i+r.outerHeight()]);for(var s=ve.offset().top,l=pe.offset().top,d=l+pe.outerHeight(),c=0;He*Le>c;c++)t.push([a(s+je*c),a(s+je*(c+1))])}),Ae=new be(Ie),ze=new Ce(function(e){return ie.eq(e)}),Ye=new Ce(function(e){return oe.eq(e)})}function ne(){function n(e,t){var n,a=e.length,i=[],o=[];for(n=0;a>n;n++)e[n].allDay?i.push(e[n]):o.push(e[n]);y("allDaySlot")&&(ee(i,t),x()),s(r(o),t)}function a(){M().empty(),S().empty()}function r(t){var n,a,r,s,l,d=N(),c=R(),u=L(),h=e.map(t,o),v=[];for(a=0;d>a;a++)for(n=Y(0,a),f(n,c),l=i(t,h,n,f(p(n),u-c)),l=ae(l),r=0;r<l.length;r++)s=l[r],s.col=a,v.push(s);return v}function i(e,t,n,a){var r,i,o,s,l,d,c,f,u=[],h=e.length;for(r=0;h>r;r++)i=e[r],o=i.start,s=t[r],s>n&&a>o&&(n>o?(l=p(n),c=!1):(l=o,c=!0),s>a?(d=p(a),f=!1):(d=s,f=!0),u.push({event:i,start:l,end:d,isStart:c,isEnd:f}));return u.sort(ue)}function o(e){return e.end?p(e.end):f(p(e.start),y("defaultEventMinutes"))}function s(n,a){var r,i,o,s,d,f,u,h,p,v,m,g,w,b,k,C,D=n.length,x="",M=S(),$=y("isRTL");for(r=0;D>r;r++)i=n[r],o=i.event,s=H(i.start,i.start),d=H(i.start,i.end),f=A(i.col),u=z(i.col),h=u-f,u-=.025*h,h=u-f,p=h*(i.forwardCoord-i.backwardCoord),y("slotEventOverlap")&&(p=Math.max(2*(p-10),p)),$?(m=u-i.backwardCoord*h,v=m-p):(v=f+i.backwardCoord*h,m=v+p),v=Math.max(v,f),m=Math.min(m,u),p=m-v,i.top=s,i.left=v,i.outerWidth=p,i.outerHeight=d-s,x+=l(o,i);for(M[0].innerHTML=x,g=M.children(),r=0;D>r;r++)i=n[r],o=i.event,w=e(g[r]),b=_("eventRender",o,o,w),b===!1?w.remove():(b&&b!==!0&&(w.remove(),w=e(b).css({position:"absolute",top:i.top,left:i.left}).appendTo(M)),i.element=w,o._id===a?c(o,w,i):w[0]._fci=r,P(o,w));for(T(M,n,c),r=0;D>r;r++)i=n[r],(w=i.element)&&(i.vsides=j(w,!0),i.hsides=E(w,!0),k=w.find(".fc-event-title"),k.length&&(i.contentTop=k[0].offsetTop));for(r=0;D>r;r++)i=n[r],(w=i.element)&&(w[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px",C=Math.max(0,i.outerHeight-i.vsides),w[0].style.height=C+"px",o=i.event,i.contentTop!==t&&C-i.contentTop<10&&(w.find("div.fc-event-time").text(ne(o.start,y("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),_("eventAfterRender",o,o,w))}function l(e,t){var n="<",a=e.url,r=q(e,y),i=["fc-event","fc-event-vert"];return w(e)&&i.push("fc-event-draggable"),t.isStart&&i.push("fc-event-start"),t.isEnd&&i.push("fc-event-end"),i=i.concat(e.className),e.source&&(i=i.concat(e.source.className||[])),n+=a?"a href='"+F(e.url)+"'":"div",n+=" class='"+i.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+r+"'><div class='fc-event-inner'><div class='fc-event-time'>"+F(re(e.start,e.end,y("timeFormat")))+"</div><div class='fc-event-title'>"+F(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&b(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function c(e,t,n){var a=t.find("div.fc-event-time");w(e)&&h(e,t,a),n.isEnd&&b(e)&&v(e,t,a),C(e,t)}function u(e,t,n){function a(){l||(t.width(r).height("").draggable("option","grid",null),l=!0)}var r,i,o,s=n.isStart,l=!0,c=O(),f=Q(),u=W(),h=B(),v=R();t.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,v){_("eventDragStart",t,e,n,v),K(e,t),r=t.width(),c.start(function(n,r){if(Z(),n){i=!1;var c=Y(0,r.col),v=Y(0,n.col);o=m(v,c),n.row?s?l&&(t.width(f-10),$(t,u*Math.round((e.end?(e.end-e.start)/je:y("defaultEventMinutes"))/h)),
t.draggable("option","grid",[f,1]),l=!1):i=!0:(X(d(p(e.start),o),d(D(e),o)),a()),i=i||l&&!o}else a(),i=!0;t.draggable("option","revert",i)},n,"drag")},stop:function(n,r){if(c.stop(),Z(),_("eventDragStop",t,e,n,r),i)a(),t.css("filter",""),V(e,t);else{var s=0;l||(s=Math.round((t.offset().top-U().offset().top)/u)*h+v-(60*e.start.getHours()+e.start.getMinutes())),J(this,e,o,s,l,n,r)}}})}function h(e,t,n){function a(){Z(),s&&(c?(n.hide(),t.draggable("option","grid",null),X(d(p(e.start),w),d(D(e),w))):(r(b),n.css("display",""),t.draggable("option","grid",[T,M])))}function r(t){var a,r=f(p(e.start),t);e.end&&(a=f(p(e.end),t)),n.text(re(r,a,y("timeFormat")))}var i,o,s,l,c,u,h,v,w,b,k,C=g.getCoordinateGrid(),x=N(),T=Q(),M=W(),$=B();t.draggable({scroll:!1,grid:[T,M],axis:1==x?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,a){_("eventDragStart",t,e,n,a),K(e,t),C.build(),i=t.position(),o=C.cell(n.pageX,n.pageY),s=l=!0,c=u=I(o),h=v=0,w=0,b=k=0},drag:function(e,n){var r=C.cell(e.pageX,e.pageY);if(s=!!r){if(c=I(r),h=Math.round((n.position.left-i.left)/T),h!=v){var d=Y(0,o.col),f=o.col+h;f=Math.max(0,f),f=Math.min(x-1,f);var p=Y(0,f);w=m(p,d)}c||(b=Math.round((n.position.top-i.top)/M)*$)}(s!=l||c!=u||h!=v||b!=k)&&(a(),l=s,u=c,v=h,k=b),t.draggable("option","revert",!s)},stop:function(n,r){Z(),_("eventDragStop",t,e,n,r),s&&(c||w||b)?J(this,e,w,c?0:b,c,n,r):(s=!0,c=!1,h=0,w=0,b=0,a(),t.css("filter",""),t.css(i),V(e,t))}})}function v(e,t,n){var a,r,i=W(),o=B();t.resizable({handles:{s:".ui-resizable-handle"},grid:i,start:function(n,i){a=r=0,K(e,t),_("eventResizeStart",this,e,n,i)},resize:function(s,l){a=Math.round((Math.max(i,t.height())-l.originalSize.height)/i),a!=r&&(n.text(re(e.start,a||e.end?f(k(e),o*a):null,y("timeFormat"))),r=a)},stop:function(n,r){_("eventResizeStop",this,e,n,r),a?G(this,e,0,o*a,n,r):V(e,t)}})}var g=this;g.renderEvents=n,g.clearEvents=a,g.slotSegHtml=l,pe.call(g);var y=g.opt,_=g.trigger,w=g.isEventDraggable,b=g.isEventResizable,k=g.eventEnd,C=g.eventElementHandlers,x=g.setHeight,M=g.getDaySegmentContainer,S=g.getSlotSegmentContainer,O=g.getHoverListener,L=g.getMaxMinute,R=g.getMinMinute,H=g.timePosition,I=g.getIsCellAllDay,A=g.colContentLeft,z=g.colContentRight,Y=g.cellToDate,N=g.getColCnt,Q=g.getColWidth,W=g.getSnapHeight,B=g.getSnapMinutes,U=g.getSlotContainer,P=g.reportEventElement,V=g.showEvents,K=g.hideEvents,J=g.eventDrop,G=g.eventResize,X=g.renderDayOverlay,Z=g.clearOverlays,ee=g.renderDayEvents,te=g.calendar,ne=te.formatDate,re=te.formatDates;g.draggableDayEvent=u}function ae(e){var t,n=re(e),a=n[0];if(ie(n),a){for(t=0;t<a.length;t++)oe(a[t]);for(t=0;t<a.length;t++)se(a[t],0,0)}return le(n)}function re(e){var t,n,a,r=[];for(t=0;t<e.length;t++){for(n=e[t],a=0;a<r.length&&de(n,r[a]).length;a++);(r[a]||(r[a]=[])).push(n)}return r}function ie(e){var t,n,a,r,i;for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)for(r=n[a],r.forwardSegs=[],i=t+1;i<e.length;i++)de(r,e[i],r.forwardSegs)}function oe(e){var n,a,r=e.forwardSegs,i=0;if(e.forwardPressure===t){for(n=0;n<r.length;n++)a=r[n],oe(a),i=Math.max(i,1+a.forwardPressure);e.forwardPressure=i}}function se(e,n,a){var r,i=e.forwardSegs;if(e.forwardCoord===t)for(i.length?(i.sort(fe),se(i[0],n+1,a),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-a)/(n+1),r=0;r<i.length;r++)se(i[r],0,e.forwardCoord)}function le(e){var t,n,a,r=[];for(t=0;t<e.length;t++)for(n=e[t],a=0;a<n.length;a++)r.push(n[a]);return r}function de(e,t,n){n=n||[];for(var a=0;a<t.length;a++)ce(e,t[a])&&n.push(t[a]);return n}function ce(e,t){return e.end>t.start&&e.start<t.end}function fe(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ue(e,t)}function ue(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function he(n,r,i){function o(t,n){var a=V[t];return e.isPlainObject(a)?Q(a,n||i):a}function s(e,t){return r.trigger.apply(r,[e,t||Y].concat(Array.prototype.slice.call(arguments,2),[Y]))}function l(e){var t=e.source||{};return P(e.startEditable,t.startEditable,o("eventStartEditable"),e.editable,t.editable,o("editable"))&&!o("disableDragging")}function c(e){var t=e.source||{};return P(e.durationEditable,t.durationEditable,o("eventDurationEditable"),e.editable,t.editable,o("editable"))&&!o("disableResizing")}function u(e){B={};var t,n,a=e.length;for(t=0;a>t;t++)n=e[t],B[n._id]?B[n._id].push(n):B[n._id]=[n]}function h(){B={},q={},U=[]}function v(e){return e.end?p(e.end):N(e)}function g(e,t){U.push({event:e,element:t}),q[e._id]?q[e._id].push(t):q[e._id]=[t]}function y(){e.each(U,function(e,t){Y.trigger("eventDestroy",t.event,t.event,t.element)})}function _(e,t){t.click(function(n){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:s("eventClick",this,e,n)}).hover(function(t){s("eventMouseover",this,e,t)},function(t){s("eventMouseout",this,e,t)})}function w(e,t){k(e,t,"show")}function b(e,t){k(e,t,"hide")}function k(e,t,n){var a,r=q[e._id],i=r.length;for(a=0;i>a;a++)t&&r[a][0]==t[0]||r[a][n]()}function C(e,t,n,a,r,i,o){var l=t.allDay,d=t._id;x(B[d],n,a,r),s("eventDrop",e,t,n,a,r,function(){x(B[d],-n,-a,l),W(d)},i,o),W(d)}function D(e,t,n,a,r,i){var o=t._id;T(B[o],n,a),s("eventResize",e,t,n,a,function(){T(B[o],-n,-a),W(o)},r,i),W(o)}function x(e,n,a,r){a=a||0;for(var i,o=e.length,s=0;o>s;s++)i=e[s],r!==t&&(i.allDay=r),f(d(i.start,n,!0),a),i.end&&(i.end=f(d(i.end,n,!0),a)),F(i,V)}function T(e,t,n){n=n||0;for(var a,r=e.length,i=0;r>i;i++)a=e[i],a.end=f(d(v(a),t,!0),n),F(a,V)}function M(e){return"object"==typeof e&&(e=e.getDay()),G[e]}function $(){return K}function E(e,t,n){for(t=t||1;G[(e.getDay()+(n?t:0)+7)%7];)d(e,t)}function S(){var e=O.apply(null,arguments),t=L(e),n=j(t);return n}function O(e,t){var n=Y.getColCnt(),a=ee?-1:1,r=ee?n-1:0;"object"==typeof e&&(t=e.col,e=e.row);var i=e*n+(t*a+r);return i}function L(e){var t=Y.visStart.getDay();return e+=X[t],7*Math.floor(e/K)+Z[(e%K+K)%K]-t}function j(e){var t=p(Y.visStart);return d(t,e),t}function R(e){var t=H(e),n=I(t),a=A(n);return a}function H(e){return m(e,Y.visStart)}function I(e){var t=Y.visStart.getDay();return e+=t,Math.floor(e/7)*K+X[(e%7+7)%7]-X[t]}function A(e){var t=Y.getColCnt(),n=ee?-1:1,a=ee?t-1:0,r=Math.floor(e/t),i=(e%t+t)%t*n+a;return{row:r,col:i}}function z(t,n,r){var i=Y.getRowCnt(),o=Y.getColCnt(),s=[],l=H(t),d=H(n);nextDayThreshold=V.nextDayThreshold&&""!=V.nextDayThreshold?parseInt(V.nextDayThreshold):!1,r&&r.end&&r.end.getHours&&!1!==nextDayThreshold&&d-l>1&&r.end.getHours()<=nextDayThreshold&&(d-=1);for(var c=I(l),f=I(d)-1,u=0;i>u;u++){var h=u*o,p=h+o-1,v=Math.max(c,h),m=Math.min(f,p);if(m>=v){var g=A(v),y=A(m),_=[g.col,y.col].sort(),w=L(v)==l,b=L(m)+1==d;s.push({row:u,leftCol:_[0],rightCol:_[1],isStart:w,isEnd:b})}}return e(Y.element).parents(".rhcalendar.not-widget").hasClass("fc-small")?(new_segments=[],e.each(s,function(e,t){if(leftCol=t.leftCol,rightCol=t.rightCol,leftCol<rightCol)for(a=leftCol;a<=rightCol;a++){var n=jQuery.extend({},t);n.leftCol=a,n.rightCol=a,new_segments.push(n)}else new_segments.push(t)}),new_segments):s}var Y=this;Y.element=n,Y.calendar=r,Y.name=i,Y.opt=o,Y.trigger=s,Y.isEventDraggable=l,Y.isEventResizable=c,Y.setEventData=u,Y.clearEventData=h,Y.eventEnd=v,Y.reportEventElement=g,Y.triggerEventDestroy=y,Y.eventElementHandlers=_,Y.showEvents=w,Y.hideEvents=b,Y.eventDrop=C,Y.eventResize=D;var N=Y.defaultEventEnd,F=r.normalizeEvent,W=r.reportEventChange,B={},q={},U=[],V=r.options;Y.isHiddenDay=M,Y.skipHiddenDays=E,Y.getCellsPerWeek=$,Y.dateToCell=R,Y.dateToDayOffset=H,Y.dayOffsetToCellOffset=I,Y.cellOffsetToCell=A,Y.cellToDate=S,Y.cellToCellOffset=O,Y.cellOffsetToDayOffset=L,Y.dayOffsetToDate=j,Y.rangeToSegments=z;var K,J=o("hiddenDays")||[],G=[],X=[],Z=[],ee=o("isRTL");!function(){o("weekends")===!1&&J.push(0,6);for(var t=0,n=0;7>t;t++)X[t]=n,G[t]=-1!=e.inArray(t,J),G[t]||(Z[n]=t,n++);if(K=n,!K)throw"invalid hiddenDays"}()}function pe(){function t(e,t){var n=a(e,!1,!0);me(n,function(e,t){j(e.event,t)}),w(n,t),me(n,function(e,t){$("eventAfterRender",e.event,e.event,t)})}function n(e,t,n){var r=a([e],!0,!1),i=[];return me(r,function(e,a){e.row===t&&a.css("top",n),i.push(a[0])}),i}function a(t,n,a){var i,l,d=J(),u=n?e("<div/>"):d,h=r(t);return o(h),i=s(h),u[0].innerHTML=i,l=u.children(),n&&d.append(l),c(h,l),me(h,function(e,t){e.hsides=E(t,!0)}),me(h,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),me(h,function(e,t){e.outerHeight=t.outerHeight(!0)}),f(h,a),h}function r(e){for(var t=[],n=0;n<e.length;n++){var a=i(e[n]);t.push.apply(t,a)}return t}function i(e){for(var t=e.start,n=D(e),a=ne(t,n,e),r=0;r<a.length;r++)a[r].event=e;return a}function o(e){for(var t=M("isRTL"),n=0;n<e.length;n++){var a=e[n],r=(t?a.isEnd:a.isStart)?V:U,i=(t?a.isStart:a.isEnd)?K:P,o=r(a.leftCol),s=i(a.rightCol);a.left=o,a.outerWidth=s-o}}function s(e){for(var t="",n=0;n<e.length;n++)t+=l(e[n]);return t}function l(e){var t="",n=M("isRTL"),a=e.event,r=a.url,i=["fc-event","fc-event-hori"];S(a)&&i.push("fc-event-draggable"),e.isStart&&i.push("fc-event-start"),e.isEnd&&i.push("fc-event-end"),i=i.concat(a.className),a.source&&(i=i.concat(a.source.className||[]));var o=q(a,M);return t+=r?"<a href='"+F(r)+"'":"<div",t+=" class='"+i.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+o+"'><div class='fc-event-inner'>",!a.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+F(G(a.start,a.end,M("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+F(a.title||"")+"</span></div>",e.isEnd&&O(a)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(r?"a":"div")+">"}function c(t,n){for(var a=0;a<t.length;a++){var r=t[a],i=r.event,o=n.eq(a),s=$("eventRender",i,i,o);s===!1?o.remove():(s&&s!==!0&&(s=e(s).css({position:"absolute",left:r.left}),o.replaceWith(s),o=s),r.element=o)}}function f(t,n){var a,a,r=(u(t),_()),i=[],o=N(),s=(Q(),[]);for(row=0;row<o;row++)s[row]=[],me(t,function(e,t){if(e.row==row&&!(e.leftCol>e.rightcol))for(col=e.leftCol;col<=e.rightCol;col++)s[row][col]=s[row][col]||0,s[row][col]+=e.outerHeight});if(n)for(var a=0;a<r.length;a++)if(r[a].length>=s[a].length)for(var l=0;l<r[a].length;l++)h=s[a]&&s[a][l]?s[a][l]:!1,!1===h?r[a].eq(l).addClass("fc-day-no-events"):r[a].eq(l).height(h);else new_h=0,e.each(s[a],function(e,t){new_h=t>new_h?t:new_h}),r[a].height(new_h);for(var a=0;a<r.length;a++)for(var l=0;l<r[a].length;l++)i[a]=i[a]||[],i[a][l]=r[a].eq(l).position().top;me(t,function(e,t){contentTop=i[e.row][e.leftCol]||i[e.row][0],t.css("top",contentTop+e.top)})}function u(e){for(var t=N(),n=Q(),a=[],r=v(e),i=0;t>i;i++){for(var o=r[i],s=[],l=0;n>l;l++)s.push(0);for(var d=0;d<o.length;d++){var c=o[d];c.top=Y(s.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;l<=c.rightCol;l++)s[l]=c.top+c.outerHeight}a.push(Y(s))}return a}function v(e){var t,n,a,r=N(),i=[];for(t=0;t<e.length;t++)n=e[t],a=n.row,n.element&&(i[a]?i[a].push(n):i[a]=[n]);for(a=0;r>a;a++)i[a]=g(i[a]||[]);return i}function g(e){for(var t=[],n=y(e),a=0;a<n.length;a++)t.push.apply(t,n[a]);return t}function y(e){e.sort(ge);for(var t=[],n=0;n<e.length;n++){for(var a=e[n],r=0;r<t.length&&ve(a,t[r]);r++);t[r]?t[r].push(a):t[r]=[a]}return t}function _(){var e,t=N(),n=[];for(e=0;t>e;e++)n[e]=B(e).find("div.fc-day-content > div");return n}function w(e,t){var n=J();me(e,function(e,n,a){var r=e.event;r._id===t?b(r,n,e):n[0]._fci=a}),T(n,e,b)}function b(e,t,n){S(e)&&x.draggableDayEvent(e,t,n),n.isEnd&&O(e)&&x.resizableDayEvent(e,t,n),R(e,t)}function k(e,t){var n,a=te();t.draggable({delay:50,opacity:M("dragOpacity"),revertDuration:M("dragRevertDuration"),start:function(r,i){$("eventDragStart",t,e,r,i),I(e,t),a.start(function(a,r,i,o){if(t.draggable("option","revert",!a||!i&&!o),Z(),a){var s=ae(r),l=ae(a);n=m(l,s),X(d(p(e.start),n),d(D(e),n))}else n=0},r,"drag")},stop:function(r,i){a.stop(),Z(),$("eventDragStop",t,e,r,i),n?A(this,e,n,0,e.allDay,r,i):(t.css("filter",""),H(e,t))}})}function C(t,a,r){var i=M("isRTL"),o=i?"w":"e",s=a.find(".ui-resizable-"+o),l=!1;W(a),a.mousedown(function(e){e.preventDefault()}).click(function(e){l&&(e.preventDefault(),e.stopImmediatePropagation())}),s.mousedown(function(i){function s(n){$("eventResizeStop",this,t,n),e("body").css("cursor",""),u.stop(),Z(),c&&z(this,t,c,0,n),setTimeout(function(){l=!1},0)}if(1==i.which){l=!0;var c,f,u=te(),h=(N(),Q(),a.css("top")),p=e.extend({},t),v=se(oe(t.start));ee(),e("body").css("cursor",o+"-resize").one("mouseup",s),$("eventResizeStart",this,t,i),u.start(function(a,i){if(a){var s=re(i),l=re(a);if(l=Math.max(l,v),c=ie(l)-ie(s)){p.end=d(L(t),c,!0);var u=f;f=n(p,r.row,h),f=e(f),f.find("*").css("cursor",o+"-resize"),u&&u.remove(),I(t)}else f&&(H(t),f.remove(),f=null);Z(),X(t.start,d(D(t),c))}},i)}})}var x=this;x.renderDayEvents=t,x.draggableDayEvent=k,x.resizableDayEvent=C;var M=x.opt,$=x.trigger,S=x.isEventDraggable,O=x.isEventResizable,L=x.eventEnd,j=x.reportEventElement,R=x.eventElementHandlers,H=x.showEvents,I=x.hideEvents,A=x.eventDrop,z=x.eventResize,N=x.getRowCnt,Q=x.getColCnt,B=(x.getColWidth,x.allDayRow),U=x.colLeft,P=x.colRight,V=x.colContentLeft,K=x.colContentRight,J=(x.dateToCell,x.getDaySegmentContainer),G=x.calendar.formatDates,X=x.renderDayOverlay,Z=x.clearOverlays,ee=x.clearSelection,te=x.getHoverListener,ne=x.rangeToSegments,ae=x.cellToDate,re=x.cellToCellOffset,ie=x.cellOffsetToDayOffset,oe=x.dateToDayOffset,se=x.dayOffsetToCellOffset}function ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.leftCol<=e.rightCol&&a.rightCol>=e.leftCol)return!0}return!1}function me(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=a.element;r&&t(a,r,n)}}function ge(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function ye(){function t(e,t,r){n(),t||(t=l(e,r)),d(e,t,r),a(e,t,r)}function n(e){f&&(f=!1,c(),s("unselect",null,e))}function a(e,t,n,a){f=!0,s("select",null,e,t,n,a)}function r(t){var r=i.cellToDate,s=i.getIsCellAllDay,l=i.getHoverListener(),f=i.reportDayClick;if(1==t.which&&o("selectable")){n(t);var u;l.start(function(e,t){c(),e&&s(e)?(u=[r(t),r(e)].sort(z),d(u[0],u[1],!0)):u=null},t),e(document).one("mouseup",function(e){l.stop(),u&&(+u[0]==+u[1]&&f(u[0],!0,e),a(u[0],u[1],!0,e))})}}var i=this;i.select=t,i.unselect=n,i.reportSelection=a,i.daySelectionMousedown=r;var o=i.opt,s=i.trigger,l=i.defaultSelectionEnd,d=i.renderSelection,c=i.clearSelection,f=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var a=o("unselectCancel");a&&e(t.target).parents(a).length||n(t)})}function _e(){function t(t,n){var a=i.shift();return a||(a=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),a[0].parentNode!=n[0]&&a.appendTo(n),r.push(a.css(t).show()),a}function n(){for(var e;e=r.shift();)i.push(e.hide().unbind())}var a=this;a.renderOverlay=t,a.clearOverlays=n;var r=[],i=[]}function we(e){var t,n,a=this;a.build=function(){t=[],n=[],e(t,n)},a.cell=function(e,a){var r,i=t.length,o=n.length,s=-1,l=-1;for(r=0;i>r;r++)if(a>=t[r][0]&&a<t[r][1]){s=r;break}for(r=0;o>r;r++)if(e>=n[r][0]&&e<n[r][1]){l=r;break}return s>=0&&l>=0?{row:s,col:l}:null},a.rect=function(e,a,r,i,o){var s=o.offset();return{top:t[e][0]-s.top,left:n[a][0]-s.left,width:n[i][1]-n[a][0],height:t[r][1]-t[e][0]}}}function be(t){function n(e){ke(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(i||(i=n),r(n,i,n.row-i.row,n.col-i.col)):r(n,i),o=n)}var a,r,i,o,s=this;s.start=function(s,l,d){r=s,i=o=null,t.build(),n(l),a=d||"mousemove",e(document).bind(a,n)},s.stop=function(){return e(document).unbind(a,n),o}}function ke(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function Ce(e){function n(t){return r[t]=r[t]||e(t)}var a=this,r={},i={},o={};a.left=function(e){return i[e]=i[e]===t?n(e).position().left:i[e]},a.right=function(e){return o[e]=o[e]===t?a.left(e)+n(e).width():o[e]},a.clear=function(){r={},i={},o={}}}var De={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},xe={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Te=e.fullCalendar={version:"1.6.4"},Me=Te.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var a,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e.data(this,"fullCalendar");if(r&&e.isFunction(r[n])){var o=r[n].apply(r,i);a===t&&(a=o),"destroy"==n&&e.removeData(this,"fullCalendar")}}),a!==t?a:this}n=n||{};var o=n.eventSources||[];return delete n.eventSources,n.events&&(o.push(n.events),delete n.events),n=e.extend(!0,{},De,n.isRTL||n.isRTL===t&&De.isRTL?xe:{},n),this.each(function(t,a){var i=e(a),s=new r(i,n,o);i.data("fullCalendar",s),s.render()}),this},Te.sourceNormalizers=[],Te.sourceFetchers=[];var $e={dataType:"json",cache:!1},Ee=1;Te.addDays=d,Te.cloneDate=p,Te.parseDate=y,Te.parseISO8601=_,Te.parseTime=w,Te.formatDate=b,Te.formatDates=k,Te.addMonths=l;var Se=["sun","mon","tue","wed","thu","fri","sat"],Oe=864e5,Le=36e5,je=6e4,Re={s:function(e){return e.getSeconds()},ss:function(e){return N(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return N(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return N(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return N(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return N(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return N(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return C(e)}};Te.dateFormatters=Re,Te.applyAll=U,Me.month=V,Me.basicWeek=K,Me.basicDay=J,n({weekMode:"fixed"}),Me.agendaWeek=Z,Me.agendaDay=ee,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e){function t(t,n,s){var l=t.success,d=e.extend({},t.data||{},{"start-min":a(n,"u"),"start-max":a(s,"u"),singleevents:!0,"max-results":9999}),c=t.currentTimezone;return c&&(d.ctz=c=c.replace(" ","_")),e.extend({},t,{url:t.url.replace(/\/basic$/,"/full")+"?alt=json-in-script&callback=?",dataType:"jsonp",data:d,startParam:!1,endParam:!1,success:function(t){var n=[];t.feed.entry&&e.each(t.feed.entry,function(t,a){var o,s=a.gd$when[0].startTime,l=r(s,!0),d=r(a.gd$when[0].endTime,!0),f=-1==s.indexOf("T");e.each(a.link,function(e,t){"text/html"==t.type&&(o=t.href,c&&(o+=(-1==o.indexOf("?")?"?":"&")+"ctz="+c))}),f&&i(d,-1),n.push({id:a.gCal$uid.value,title:a.title.$t,url:o,start:l,end:d,allDay:f,location:a.gd$where[0].valueString,description:a.content.$t})});var a=[n].concat(Array.prototype.slice.call(arguments,1)),s=o(l,this,a);return e.isArray(s)?s:n}})}var n=e.fullCalendar,a=n.formatDate,r=n.parseISO8601,i=n.addDays,o=n.applyAll;n.sourceNormalizers.push(function(e){("gcal"==e.dataType||void 0===e.dataType&&(e.url||"").match(/^(http|https):\/\/www.google.com\/calendar\/feeds\//))&&(e.dataType="gcal",void 0===e.editable&&(e.editable=!1))}),n.sourceFetchers.push(function(e,n,a){return"gcal"==e.dataType?t(e,n,a):void 0}),n.gcalFeed=function(t,n){return e.extend({},n,{url:t,dataType:"gcal"})}}(jQuery),function(e){function t(t,a){function r(n,r){r&&d(n,7*r);var i=d(c(n),-((n.getDay()-o("firstDay")+7)%7)),u=d(c(i),7),h=c(i),p=c(u);a.options.titleFormat.week&&(a.options.titleFormat.week=a.options.titleFormat.week.replace(/&#91;/g,"["),a.options.titleFormat.week=a.options.titleFormat.week.replace(/&#93;/g,"]"),l.title=f(h,d(c(p),-1),a.options.titleFormat.week,a.options)),l.start=i,l.end=u,l.visStart=h,l.visEnd=p;var v=!s;v&&(e('<div class="fc-events-holder"></div>').appendTo(t),s=!0)}function i(){}function o(e,t){var n=options[e];return n}var s,l=this,d=e.fullCalendar.addDays,c=e.fullCalendar.cloneDate,f=e.fullCalendar.formatDates;options=a.options,n.call(l,t,a),l.render=r,l.viewChanged=i}function n(t,n){function a(e){if(e&&e.visStart&&e.visEnd){if(k.title=e.title,k.visStart=e.start,k.visEnd=e.visEnd,k.oldView=e,n.options.eventList.upcoming&&"1"==n.options.eventList.upcoming){var t=new Date;k.visStart=k.visStart.getTime()>t.getTime()?k.visStart:t}var a=n.options.eventList.monthsahead?n.options.eventList.monthsahead:"";if(a=""==a.replace(" ","")?1:parseInt(a),a>0){var r=new Date(k.visStart);r.setMonth(r.getMonth()+a),k.visEnd=r}var i=n.options.eventList.daysahead?n.options.eventList.daysahead:"";if(i=""==i.replace(" ","")?0:parseInt(i),i>0){var r=new Date(k.visStart);r.setDate(r.getDate()+i-1),r.setHours(23,59,59),k.visEnd=r}}}function r(e){}function i(){}function o(){}function s(e){}function l(a,r){var i=n.options.eventList.stack&&1==parseInt(n.options.eventList.stack)||!1;k.direction=r,custom_delta=parseInt(n.options.eventList.delta),custom_delta=isNaN(custom_delta)?0:custom_delta,date_changed=!1,i&&custom_delta>0&&k.first_date&&k.direction<0&&a>k.first_date&&(a=fc.cloneDate(k.first_date),date_changed=!0),0==k.direction?k.first_date=fc.cloneDate(a):k.direction<0&&k.first_date<a&&(k.first_date=fc.cloneDate(a)),r&&custom_delta>0&&(fc.addDays(a,custom_delta*r),r=0),date_changed&&n.gotoDate(a),custom_delta>0?(start=fc.cloneDate(a,!0),end=fc.addDays(fc.cloneDate(start),custom_delta),_end=fc.cloneDate(end)):_end=!1,k.start=fc.cloneDate(a,!0);var o=!b;if(o&&(e('<div class="fc-events-holder"></div>').appendTo(t),b=!0),k.oldView||(k.oldView=new e.fullCalendar.views.month(e("<div>"),n)),k.oldView&&(custom_delta?k.oldView.render(fc.cloneDate(a),r):k.oldView.render(a,r),_end=!1===_end?fc.cloneDate(k.oldView.visEnd):_end,k.oldView.visStart&&k.oldView.visEnd&&(k.title=k.oldView.title,custom_delta?(k.start=fc.cloneDate(start),k.end=fc.cloneDate(end),k.visStart=fc.cloneDate(start),k.visEnd=fc.cloneDate(end)):(k.start=fc.cloneDate(k.oldView.start),k.end=fc.cloneDate(k.oldView.end),k.visStart=fc.cloneDate(k.oldView.start),k.visEnd=fc.cloneDate(k.oldView.visEnd)),n.options.eventList.TitleFormat&&(n.options.eventList.TitleFormat=n.options.eventList.TitleFormat.replace(/&#91;/g,"["),n.options.eventList.TitleFormat=n.options.eventList.TitleFormat.replace(/&#93;/g,"]"),k.title=fc.formatDates(fc.cloneDate(k.visStart),fc.addDays(fc.cloneDate(_end),-1),n.options.eventList.TitleFormat,n.options)))),n.options.eventList.upcoming&&"1"==n.options.eventList.upcoming){var s=new Date;s.setHours(0,0,0),dayspast=n.options.widgetlist.dayspast||0,s.setDate(s.getDate()-parseInt(dayspast)),k.visStart=k.visStart.getTime()>s.getTime()?k.visStart:s}var l=n.options.eventList.monthsahead?n.options.eventList.monthsahead:"";if(l=""==l.replace(" ","")?custom_delta>0?0:1:parseInt(l),l>0){var c=new Date(k.visStart);c.setMonth(c.getMonth()+l),k.visEnd=c}var f=n.options.eventList.daysahead?n.options.eventList.daysahead:"";if(f=""==f.replace(" ","")?0:parseInt(f),f>0){var c=new Date(k.visStart);c.setDate(c.getDate()+f-1),c.setHours(23,59,59),k.visEnd=c}if(parseInt(n.options.eventList.auto)&&parseInt(n.options.eventList.stack)){var u=e(t).parents(".rhc_holder").attr("id");"undefined"==typeof e(document).data("rhc_event_scroll")&&(e(document).data("rhc_event_scroll",u),jQuery(document).scroll(function(){d(u)}))}}function d(t){if(!1!==k.have_events){var a=e("#"+t+" .fc-view-rhc_event");if(a.is(":visible")&&!k.scroll_lockdown){var r=e(a).parents(".rhc_holder"),i=r.offset();if(window.mobile?paddingForMobile=1e3:paddingForMobile=0,e(window).scrollTop()+e(window).height()==e(document).height())k.scroll_lockdown=!0,e(a).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next");else{var o=n.options.eventList.scrolloffset&&""!=n.options.eventList.scrolloffset?n.options.eventList.scrolloffset:e(window).height()/2,o=o-paddingForMobile;document_bottom=e(document).scrollTop()+e(window).height(),bottom_position=i.top+r.outerHeight(),document_bottom>bottom_position+o&&(k.scroll_lockdown=!0,e(a).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next"))}}}}function c(){}function f(e){t.css("min-height","200px"),t.css("height","auto")}function h(){}function p(){}function v(a,r){var i=e(rhc_event_tpl),o=i.find(".fc-event-list-item").clone().removeClass("fc-remove"),s=i.find(".fc-event-list-date").clone().removeClass("fc-remove"),l=i.find(".fc-event-list-no-events").clone().removeClass("fc-remove");n.options.eventList&&n.options.eventList.eventListNoEventsText&&l.find(".fc-no-list-events-message").html(n.options.eventList.eventListNoEventsText),widget_templates=!1,n.options.eventList&&n.options.eventList.eventlist_template&&""!=n.options.eventList.eventlist_template&&e(n.options.eventList.eventlist_template).length>0&&(widget_templates=!0,o=e(n.options.eventList.eventlist_template).find(".rhc-widget-upcoming-item"));var d=n.options.eventList.stack&&"1"==n.options.eventList.stack?!0:!1;if(d&&k.direction>0)var c=t.find(".fc-events-holder");else{var c=t.find(".fc-events-holder").empty();k.rendered_events=[]}if(i.appendTo(c).find(".fc-remove").remove(),d&&e(c).find(".fc-event-list-no-events").parents(".fc-event-list-container").remove(),a.length>0)if(k.have_events=!0,widget_templates){var f=n.options,h=n.options.widgetlist,p=a,v="#"+h.sel;h.dayspast=h.dayspast?h.dayspast:0;var y=e.fullCalendar.parseDate(h.end);if(!h.horizon||"hour"!=h.horizon&&"end"!=h.horizon){var b=[],C=new Date;C.setDate(C.getDate()-h.dayspast),h.historic&&""!=h.specific_date&&(C=e.fullCalendar.parseDate(h.specific_date));for(var D=0;D<p.length;D++){var x=new Date(p[D].start);C.setHours(0,0,0,0),x.setHours(0,0,0,0),x.getTime()<C.getTime()||x.getTime()>y.getTime()||(b[b.length]=p[D])}p=b}else{var b=[],C=new Date;C.setDate(C.getDate()-h.dayspast),h.historic&&"1"==h.historic&&(C=e.fullCalendar.parseDate(h.specific_date));for(var D=0;D<p.length;D++){if(p[D].end&&"end"==h.horizon){if(p[D].end.getTime()<C.getTime())continue}else if(p[D].start.getTime()<C.getTime())continue;p[D].start.getTime()>y.getTime()||(b[b.length]=p[D])}p=b}if(p.sort(_rhc_sort_events),h.premiere&&"1"==h.premiere){for(var b=[],D=0;D<p.length;D++)p[D].premiere&&(b[b.length]=p[D]);p=b}else if(h.premiere&&"2"==h.premiere){for(var T=[],b=[],D=0;D<p.length;D++)e.inArray(p[D]._id,T)>-1||(T.push(p[D]._id),b.push(p[D]));p=b}p=p.slice(0,h.number);var M=[];e.each(p,function(t,n){var a=o.clone(),r=n,s=r.description.split(" ");s=s.slice(0,h.words),r.description=s.join(" "),h.using_calendar_url&&""!=h.using_calendar_url&&(r.url=h.using_calendar_url);var l=r.url,d=o.clone();if(d.find(".rhc-title-link").html(r.title).data("rhc_event",r).attr("href",l).end().find(".rhc-event-link").data("rhc_event",r).attr("href",l).end().find(".rhc-description").html(r.description).end().find(".rhc-widget-date").html("").end().find(".rhc-widget-time").html("").end().find(".rhc-widget-end-date").html("").end().find(".rhc-widget-end-time").html("").end(),""!=h.fcdate_format){d.find(".rhc-widget-date").html(e.fullCalendar.formatDate(r.start,h.fcdate_format,f)),d.find(".rhc-widget-end-date").html(e.fullCalendar.formatDate(r.end,h.fcdate_format,f)),dstart=e.fullCalendar.formatDate(r.start,"yyyy-MM-dd",f),dend=e.fullCalendar.formatDate(r.end,"yyyy-MM-dd",f);var c=Math.floor((Date.parse(dend)-Date.parse(dstart))/864e5);c>0?(b=e.fullCalendar.formatDate(r.start,h.fcdate_format,f)+" &#8211; "+e.fullCalendar.formatDate(r.end,h.fcdate_format,f),d.find(".rhc-widget-date-range").html(b),d.find(".rhc-day_diff0").hide()):(d.find(".rhc-widget-date-range").html(e.fullCalendar.formatDate(r.start,h.fcdate_format,f)),d.find(".rhc-day_diff1").hide())}""==h.fctime_format||r.allDay||(d.find(".rhc-widget-time").html(e.fullCalendar.formatDate(r.start,h.fctime_format,f)),d.find(".rhc-widget-end-time").html(e.fullCalendar.formatDate(r.end,h.fctime_format,f))),r.allDay&&(d.addClass("fc-is-allday"),d.find(".rhc-widget-time").hide()),d.find(".rhc-date-start").each(function(t,n){e(n).html(e.fullCalendar.formatDate(r.start,e(n).html(),f))});var u=e.fullCalendar.formatDate(r.start,"yyyyMMdd",f);-1==e.inArray(u,M)?M.push(u):d.find(".hide-repeat-date").addClass("repeated-date"),1==h.showimage?(d.addClass("featured-1"),r.image&&r.image[0]&&""!=r.image[0]&&e("<a></a>").addClass("rhc-image-link").data("rhc_event",r).attr("href",l).append(e("<img></img>").attr("src",r.image[0])).appendTo(d.find(".rhc-widget-upcoming-featured-image"))):(d.addClass("featured-0"),d.find(".rhc-widget-upcoming-featured-image").remove()),e(d).find(".rhc-title-link,.rhc-event-link,.rhc-image-link").click(function(e){var t={url:r.url};return r.gotodate&&(t.gotodate=r.gotodate),r.event_rdate&&(t.event_rdate=r.event_rdate),_rhc_widget_link_click(t,this)}),a=d,a.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),n.terms&&n.terms.length>0&&e.each(n.terms,function(t,n){if(a.find(".taxonomy-"+n.taxonomy).parent().find("a").length>0&&a.find(".taxonomy-"+n.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),n.name&&""!=n.name&&a.find(".taxonomy-"+n.taxonomy).length>0&&(""==n.url?e("<span>"+n.name+"</span>").appendTo(a.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy")):e("<a>"+n.name+"</a>").attr("href",n.url).appendTo(a.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy"))),a.find(".taxonomy-"+n.taxonomy+"-gaddress").length>0&&n.gaddress&&""!=n.gaddress){a.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().find("a").length>0&&a.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var r="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(n.gaddress);e("<a>"+n.gaddress+"</a>").attr("href",r).attr("target","_blank").appendTo(a.find(".taxonomy-"+n.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}for(var i in n)"taxonomy"!=i&&(term_property_value=n[i],a.find(".taxonomy-"+n.taxonomy+"-"+i).length>0&&""!=term_property_value&&e("<span>"+term_property_value+"</span>").appendTo(a.find(".taxonomy-"+n.taxonomy+"-"+i)));
}),d.find(".move-out").length>0&&d.find(".move-out").appendTo(v),triggerRes=g("eventRender",n,n,d),!1===triggerRes||i.find(".fc-event-list-holder").append(d),g("loading",null,!1)})}else{n.options.widgetlist.dayspast=n.options.widgetlist.dayspast?n.options.widgetlist.dayspast:0,events=[];var $=new Date;if($.setDate($.getDate()-n.options.widgetlist.dayspast),e.each(a,function(e,t){if(d&&k.rendered_events.length>0)for(var a=0;a<k.rendered_events.length;a++)if(test_event=k.rendered_events[a],"function"==typeof test_event.start.getTime&&"function"==typeof t.start.getTime&&test_event.id==t.id&&test_event.start.getTime()==t.start.getTime())return;if(k.rendered_events.push(t),!(n.options.eventList&&1==parseInt(n.options.eventList.removeended)&&null!=t.end&&t.end<$)){if(n.options.eventList&&"1"==n.options.eventList.outofrange){if(null!=t.end&&t.end<k.visStart)return}else{if(t.start<k.visStart)return;if(t.start>k.visEnd)return}events[events.length]=t}}),0==events.length)return;"1"==n.options.eventList.reverse?events.sort(w):events.sort(_);var E=[],S=n.options.eventList.extendedDetails&&"1"==n.options.eventList.extendedDetails?!0:!1,O="",M=[];if(e.each(events,function(t,a){if(!("undefined"!=typeof n.options.eventList.display&&n.options.eventList.display>0&&t>=n.options.eventList.display)){var r=o.clone();a.gcal||""==a.url?r.find(".fc-event-list-title").parent().empty().append(e("<span></span>").addClass("fc-event-list-title").html(a.title)):a.direct_link?r.find(".fc-event-list-title").html(a.title).end().find("a.fc-event-link").attr("href",a.url).end():r.find(".fc-event-list-title").html(a.title).end().find("a.fc-event-link").attr("target","").attr("href","javascript:void(0);").bind("click",function(e){var t=n.options.eventClick?n.options.eventClick:fc_click;t(a,e,k)}).end();var l=a.local_feed?!0:!1;if(S&&l&&(r.find(".fe-extrainfo-container").addClass("skip-render").addClass("ext_det_"+a.id).hide().data("ev",a).before('<div class="ext-list-loading loading-events"><div class="ext-list-loading-1 ajax-loader loading-events"><div class="ext-list-loading-2x xspinner icon-xspinner-3"></div></div></div>'),-1==e.inArray(a.id,E)&&E.push(a.id)),r.find(".fc-event-list-description").html(a.description).end(),a.description&&""==a.description.replace(" ","")&&r.find(".fc-event-list-description").addClass("rhc-empty-description"),"none"==a.fc_click_link&&r.find("a.fc-event-link").addClass("fc-no-link"),a.image&&a.image[0]?r.find("img.fc-event-list-image").attr("src",a.image[0]):r.find(".fc-event-list-featured-image").empty(),a.allDay){r.find(".fc-time").remove(),r.find(".fc-end-time").remove();var d=n.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}else{r.find(".fc-time").html(e.fullCalendar.formatDate(a.start,"h:mmtt")),r.find(".fc-end-time").html(e.fullCalendar.formatDate(a.end,"h:mmtt"));var d=n.options.eventList.extDateFormat||"dddd MMMM d, yyyy."}if(a.start?r.find(".fc-start").html(e.fullCalendar.formatDate(a.start,d,n.options)):r.find(".fc-start").remove(),a.end?r.find(".fc-end").html(e.fullCalendar.formatDate(a.end,d,n.options)):r.find(".fc-end").parent().addClass("rhc_event-empty-taxonomy").end().remove(),r.find(".fc-event-link.fc-event-list-title").each(function(t,n){parseInt(RHC.disable_event_link)&&"javascript:void(0);"==e(n).attr("href")&&e(n).replaceWith(e(n).text())}),r.find(".fc-event-term").empty().hide().parent().addClass("rhc_event-empty-taxonomy"),a.terms&&a.terms.length>0&&e.each(a.terms,function(t,n){if(r.find(".taxonomy-"+n.taxonomy).parent().find("a").length>0&&r.find(".taxonomy-"+n.taxonomy).parent().append('<span class="rhc-event-list tax-term-divider"></span>'),n.name&&""!=n.name&&r.find(".taxonomy-"+n.taxonomy).length>0&&(""==n.url?e("<span>"+n.name+"</span>").appendTo(r.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end()):e("<a>"+n.name+"</a>").attr("href",n.url).appendTo(r.find(".taxonomy-"+n.taxonomy).show().parent().removeClass("rhc_event-empty-taxonomy").end())),r.find(".taxonomy-"+n.taxonomy+"-gaddress").length>0&&n.gaddress&&""!=n.gaddress){r.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().find("a").length>0&&r.find(".taxonomy-"+n.taxonomy+"-gaddress").parent().append('<span class="rhc-event-list tax-term-divider"></span>');var a="http://www.google.com/maps?f=q&hl=en&source=embed&q="+escape(n.gaddress);e("<a>"+n.gaddress+"</a>").attr("href",a).attr("target","_blank").appendTo(r.find(".taxonomy-"+n.taxonomy+"-gaddress").show().parent().removeClass("rhc_event-empty-taxonomy").end())}}),a.meta&&a.meta.length>0&&e.each(a.meta,function(e,t){v=".fc-event-meta-"+t[0],val=t[1],r.find(v).html(val).end()}),triggerRes=g("eventRender",a,a,r),!1===triggerRes);else{if(n.options.eventList.ShowHeader&&1==parseInt(n.options.eventList.ShowHeader)){var c=a.start;if(e.fullCalendar.formatDate(c,"yyyyMMdd")!=e.fullCalendar.formatDate(O,"yyyyMMdd")){O=c;var f=s.clone();f.find(".fc-event-list-date-header").html(e.fullCalendar.formatDate(a.start,n.options.eventList.DateFormat||"dddd MMMM d, yyyy",n.options)),i.find(".fc-event-list-holder").append(f)}}i.find(".fc-event-list-holder").append(r)}}}),E.length>0){"undefined"==typeof n.extended_detail_cache&&(n.extended_detail_cache={});var L=[];if(e.each(E,function(e,t){"undefined"==typeof n.extended_detail_cache[t]&&L.push(t)}),0==L.length)m(e,E,i,n);else{url=RHC.ajaxurl,url+="?rhc_action=extended_details",E.length>0&&e.each(E,function(e,t){url=url+"&ids[]="+t}),ver=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:$.getTime(),url=url+"&ver="+ver,queryString=url.substring(url.indexOf("?")+1),hash=CryptoJS.MD5(queryString),u=hash.toString(CryptoJS.enc.Hex),url=url+"&_="+u;var j={url:url,type:"GET",dataType:"html",not_used_data:{rhc_action:"extended_details",ids:E},success:function(a){e.each(E,function(r,i){e(a).find("."+i).length>0?n.extended_detail_cache[i]=e(a).find("."+i).clone():e(t).find(".skip-render.ext_det_"+i).removeClass("skip-render").removeClass("ext_det_"+i).fadeIn("fast").parent().find(".ext-list-loading").fadeOut("fast")}),m(e,E,i,n)},error:function(){e(t).find(".skip-render").show(),e(t).parent().find(".ext-list-loading").fadeOut("fast"),m(e,E,i,n)}};e.ajax(j)}}}else k.have_events=!1,i.find(".fc-event-list-holder").append(l),i.find(".fc-no-list-events-message").show();g("loading",null,!1)}function m(e,t,n,a){e.each(t,function(t,r){"undefined"!=typeof a.extended_detail_cache[r]&&n.find(".ext_det_"+r).each(function(t,n){var i=a.extended_detail_cache[r].clone(),o=e(n).data("ev");if(i.find(".postmeta-fc_start .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extDateFormat||"MMMM d, yyyy",a.options)),i.find(".postmeta-fc_start_time .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extTimeFormat||"h:mm tt",a.options)),i.find(".postmeta-fc_start_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.start,a.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",a.options)),i.find(".postmeta-fc_end .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extDateFormat||"MMMM d, yyyy",a.options)),i.find(".postmeta-fc_end_time .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extTimeFormat||"h:mm tt",a.options)),i.find(".postmeta-fc_end_datetime .fe-extrainfo-value").html(e.fullCalendar.formatDate(o.end,a.options.eventList.extDateTimeFormat||"MMMM d, yyyy. h:mm tt",a.options)),i.find(".fc-button-social-panels").length>0){var s=i.find(".fc-button-social-panels");new_rhp_vars=s.data("rhp_vars"),new_rhp_vars.shareLink=o.url,new_rhp_vars.shareRedirectURI=o.url,s.data("rhp_vars",new_rhp_vars)}i.find(".fe-image-holder").RHCLink(o,e(n).closest(".fullCalendar").fullCalendar("getView")),original=e(n).replaceWith(i),i.parent().find(".ext-list-loading").fadeOut("fast")})}),e("BODY").trigger("dbox.loaded")}function g(e,t){return n.trigger.apply(n,[e,t||k].concat(Array.prototype.slice.call(arguments,2),[k]))}function y(t,n,a){t?(k.scroll_lockdown=!0,e(n.element).parents(".rhc_holder").addClass("stacking-loading")):(k.scroll_lockdown=!1,e(n.element).parents(".rhc_holder").removeClass("stacking-loading"))}function _(e,t){return e.start>t.start?1:e.start<t.start?-1:0}function w(e,t){return e.start<t.start?1:e.start>t.start?-1:0}var b,k=this;k.name="rhc_event",k.render=l,k.unselect=c,k.setHeight=f,k.setWidth=h,k.clearEvents=p,k.renderEvents=v,k.trigger=g,k.viewChanged=a,k.beforeAnimation=s,k.setEventData=r,k.clearEventData=i,k.triggerEventDestroy=o,k.element=t,k.oldView=null,k.calendar=n,fc=e.fullCalendar,k.direction=0,k.first_date=null,k.scroll_lockdown=!1,k.loading=y,k.have_events=!1,k.rendered_events=[],n.options.eventList.daysahead&&parseInt(n.options.eventList.delta)>parseInt(n.options.eventList.daysahead)&&(n.options.eventList.delta=n.options.eventList.daysahead)}function a(t,n){function a(){}function r(e){}function i(n,a){h.start=n;var r=!u;r&&(e('<div class="fc-detail-view-holder"><div class="fc-detail-view-content">TODO: a single event details. The button will be removed on the top right controls, and this view will be triggered when selecting an event.</div><div class="fc-detail-view-wp_footer" style="display:none;"></div></div>').appendTo(t),u=!0)}function o(){}function s(e){t.css("min-height","200px"),t.css("height","auto")}function l(){}function d(){e(".fc-detail-view-content").html("")}function c(){var t={id:n.last_clicked_event.id};e.post(n.options.singleSource,t,function(t){"OK"==t.R&&(0==e("body .fc-single-item-holder").length&&e("body").append('<div class="fc-single-item-holder"></div>'),e("body .fc-single-item-holder").empty(),e(t.DATA.footer).each(function(t,n){if(n.nodeName&&"SCRIPT"==n.nodeName){var a=document.createElement("script");e(n).attr("type")&&(a.type=e(n).attr("type")||""),e(n).attr("src")?a.src=e(n).attr("src")||"":a.text=e(n).html()||"",document.body.appendChild(a)}else e("body .fc-single-item-holder").append(n)}),e(".fc-detail-view-content").html(t.DATA.body))},"json")}function f(){}var u,h=this;h.name="rhc_detail",h.render=i,h.unselect=o,h.setHeight=s,h.setWidth=l,h.clearEvents=d,h.renderEvents=c,h.trigger=f,h.viewChanged=a,h.beforeAnimation=r,h.element=t}e.fullCalendar.views.WeekEventList=t,e.fullCalendar.views.rhc_event=n,e.fullCalendar.views.rhc_detail=a}(jQuery);var CryptoJS=CryptoJS||function(e,t){var n={},a=n.lib={},r=function(){},i=a.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var r=0;e>r;r++)t[a+r>>>2]|=(n[r>>>2]>>>24-8*(r%4)&255)<<24-8*((a+r)%4);else if(65535<n.length)for(r=0;e>r;r+=4)t[a+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],a=0;t>a;a+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],a=0;e>a;a++){var r=t[a>>>2]>>>24-8*(a%4)&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;t>a;a+=2)n[a>>>3]|=parseInt(e.substr(a,2),16)<<24-4*(a%8);return new o.init(n,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],a=0;e>a;a++)n.push(String.fromCharCode(t[a>>>2]>>>24-8*(a%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;t>a;a++)n[a>>>2]|=(255&e.charCodeAt(a))<<24-8*(a%4);return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,a=n.words,r=n.sigBytes,i=this.blockSize,s=r/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,r=e.min(4*t,r),t){for(var l=0;t>l;l+=i)this._doProcessBlock(a,l);l=a.splice(0,t),n.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new u.HMAC.init(e,n).finalize(t)}}});var u=n.algo={};return n}(Math);!function(e){function t(e,t,n,a,r,i,o){return e=e+(t&n|~t&a)+r+o,(e<<i|e>>>32-i)+t}function n(e,t,n,a,r,i,o){return e=e+(t&a|n&~a)+r+o,(e<<i|e>>>32-i)+t}function a(e,t,n,a,r,i,o){return e=e+(t^n^a)+r+o,(e<<i|e>>>32-i)+t}function r(e,t,n,a,r,i,o){return e=e+(n^(t|~a))+r+o,(e<<i|e>>>32-i)+t}for(var i=CryptoJS,o=i.lib,s=o.WordArray,l=o.Hasher,o=i.algo,d=[],c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;o=o.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var s=i+o,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var o=this._hash.words,s=e[i+0],l=e[i+1],c=e[i+2],f=e[i+3],u=e[i+4],h=e[i+5],p=e[i+6],v=e[i+7],m=e[i+8],g=e[i+9],y=e[i+10],_=e[i+11],w=e[i+12],b=e[i+13],k=e[i+14],C=e[i+15],D=o[0],x=o[1],T=o[2],M=o[3],D=t(D,x,T,M,s,7,d[0]),M=t(M,D,x,T,l,12,d[1]),T=t(T,M,D,x,c,17,d[2]),x=t(x,T,M,D,f,22,d[3]),D=t(D,x,T,M,u,7,d[4]),M=t(M,D,x,T,h,12,d[5]),T=t(T,M,D,x,p,17,d[6]),x=t(x,T,M,D,v,22,d[7]),D=t(D,x,T,M,m,7,d[8]),M=t(M,D,x,T,g,12,d[9]),T=t(T,M,D,x,y,17,d[10]),x=t(x,T,M,D,_,22,d[11]),D=t(D,x,T,M,w,7,d[12]),M=t(M,D,x,T,b,12,d[13]),T=t(T,M,D,x,k,17,d[14]),x=t(x,T,M,D,C,22,d[15]),D=n(D,x,T,M,l,5,d[16]),M=n(M,D,x,T,p,9,d[17]),T=n(T,M,D,x,_,14,d[18]),x=n(x,T,M,D,s,20,d[19]),D=n(D,x,T,M,h,5,d[20]),M=n(M,D,x,T,y,9,d[21]),T=n(T,M,D,x,C,14,d[22]),x=n(x,T,M,D,u,20,d[23]),D=n(D,x,T,M,g,5,d[24]),M=n(M,D,x,T,k,9,d[25]),T=n(T,M,D,x,f,14,d[26]),x=n(x,T,M,D,m,20,d[27]),D=n(D,x,T,M,b,5,d[28]),M=n(M,D,x,T,c,9,d[29]),T=n(T,M,D,x,v,14,d[30]),x=n(x,T,M,D,w,20,d[31]),D=a(D,x,T,M,h,4,d[32]),M=a(M,D,x,T,m,11,d[33]),T=a(T,M,D,x,_,16,d[34]),x=a(x,T,M,D,k,23,d[35]),D=a(D,x,T,M,l,4,d[36]),M=a(M,D,x,T,u,11,d[37]),T=a(T,M,D,x,v,16,d[38]),x=a(x,T,M,D,y,23,d[39]),D=a(D,x,T,M,b,4,d[40]),M=a(M,D,x,T,s,11,d[41]),T=a(T,M,D,x,f,16,d[42]),x=a(x,T,M,D,p,23,d[43]),D=a(D,x,T,M,g,4,d[44]),M=a(M,D,x,T,w,11,d[45]),T=a(T,M,D,x,C,16,d[46]),x=a(x,T,M,D,c,23,d[47]),D=r(D,x,T,M,s,6,d[48]),M=r(M,D,x,T,v,10,d[49]),T=r(T,M,D,x,k,15,d[50]),x=r(x,T,M,D,h,21,d[51]),D=r(D,x,T,M,w,6,d[52]),M=r(M,D,x,T,f,10,d[53]),T=r(T,M,D,x,y,15,d[54]),x=r(x,T,M,D,l,21,d[55]),D=r(D,x,T,M,m,6,d[56]),M=r(M,D,x,T,C,10,d[57]),T=r(T,M,D,x,p,15,d[58]),x=r(x,T,M,D,b,21,d[59]),D=r(D,x,T,M,u,6,d[60]),M=r(M,D,x,T,_,10,d[61]),T=r(T,M,D,x,c,15,d[62]),x=r(x,T,M,D,g,21,d[63]);o[0]=o[0]+D|0,o[1]=o[1]+x|0,o[2]=o[2]+T|0,o[3]=o[3]+M|0},_doFinalize:function(){var t=this._data,n=t.words,a=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(a/4294967296);for(n[(r+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(r+64>>>9<<4)+14]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,a=0;4>a;a++)r=n[a],n[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=l._createHelper(o),i.HmacMD5=l._createHmacHelper(o)}(Math),function($){function allday_group(e,t){return _allday_group="undefined"!=typeof t.allday_group&&0<parseInt(t.allday_group)?parseInt(t.allday_group):0,0<_allday_group&&$.each(e,function(e,t){"undefined"!=typeof t.color&&""!=t.color&&(1==_allday_group?t.title='<span style="display:none;">'+t.color+"</span>"+t.title:2==_allday_group&&"undefined"!=typeof t.menu_order&&(t.title='<span style="display:none;">'+parseInt(t.menu_order)+"</span>"+t.title))}),e}function preload_events(o,fc_options){fc_options.preload&&$(o).find(".rhc-preload").length&&$(o).find(".rhc-preload").each(function(i,el){if(!$(el).data("preloaded")){$(el).data("preloaded",!0);try{if(cache=$(el).data("request"),cache=eval(cache),cache)if($(el).data("events")?(tmp_events=$(el).data("events"),data=eval(tmp_events)):data=$.parseJSON($(el).html()),external_source=$(el).data("external_source")||!1,"OK"==data.R){if(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url)){cache.events=data.EVENTS;var events=[];start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=rhc_events_to_fc_events(start,end,data,!0),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}else if(external_source&&"object"==typeof data&&(cache.url=$(el).data("url"),!in_rhc_events_cache(cache.start,cache.end,cache.url))){cache.events=data.EVENTS;var events=data;start=new Date(1e3*cache.start),end=new Date(1e3*cache.end),events=handle_local_tz(events,fc_options,data),cache.events=events,rhc_events_cache[rhc_events_cache.length]=cache}}catch(e){}}})}function in_rhc_events_cache(e,t,n){for(var a=0;a<rhc_events_cache.length;a++)if(rhc_events_cache[a].start<=e&&rhc_events_cache[a].end>=t&&rhc_events_cache[a].url==n)return!0;return!1}function handle_local_tz(e,t,n){if(local_tz="local_tz"in t?parseInt(t.local_tz):0,0==local_tz)return e;if("GMT_OFFSET"in n){var a=-1*n.GMT_OFFSET*60,r=(new Date).getTimezoneOffset();if(a==r)return e;for(var i=0;i<e.length;i++)if(!e[i].allDay){"object"==typeof e[i].start&&(e[i].start=date_change_offset(e[i].start,a)),"object"==typeof e[i]._start&&(e[i]._start=date_change_offset(e[i]._start,a)),"object"==typeof e[i].end&&(e[i].end=date_change_offset(e[i].end,a)),"object"==typeof e[i]._end&&(e[i]._end=date_change_offset(e[i]._end,a));var o=jQuery.fullCalendar.formatDate(e[i].start,"yyyyMMddHHmmss"),s=jQuery.fullCalendar.formatDate(e[i].end,"yyyyMMddHHmmss");o&&""!=o&&(s&&""!=s&&(o=o+","+s),e[i].event_rdate=o,e[i].url=""==e[i].url?"":_add_param_to_url(e[i].url,"event_rdate",e[i].event_rdate))}}return e}function date_change_offset(e,t){return new Date(e.getTime()-6e4*(e.getTimezoneOffset()-t))}function handle_field_map(e){return e.MAP&&e.MAP.length>0&&e.EVENTS&&e.EVENTS.length>0&&(new_events=[],jQuery.each(e.EVENTS,function(t,n){new_ev={},jQuery.each(e.MAP,function(e,t){n[t[0]]&&(new_ev[t[1]]=n[t[0]])}),"undefined"==typeof new_ev.allDay&&(new_ev.allDay=!1),new_ev.terms&&new_ev.terms.length>0&&(new_terms=[],jQuery.each(new_ev.terms,function(t,n){"object"==typeof n?new_terms[t]=n:new_terms[t]=e.TERMS[n]}),new_ev.terms=new_terms,new_terms=[],jQuery.each(new_ev.terms,function(t,n){new_term={},jQuery.each(e.MAP,function(e,t){n[t[0]]&&(new_term[t[1]]=n[t[0]])}),new_terms[new_terms.length]=new_term}),new_ev.terms=new_terms),new_events[new_events.length]=new_ev}),e.EVENTS=new_events),e}function rhc_events_to_fc_events(e,t,n,a){var r=[];if(n=handle_field_map(n),n.EVENTS.length>0&&$(n.EVENTS).each(function(n,i){if(i.premiere=!0,i.description="undefined"==typeof i.description?"":i.description,i.local_feed="undefined"==typeof i.local_feed?a:i.local_feed,(!i.color||""==i.color||"#"==i.color)&&i.terms&&i.terms.length>0)for(var o=0;o<i.terms.length;o++){var s=i.terms[o].background_color&&i.terms[o].background_color.length>1?i.terms[o].background_color:!1,l=i.terms[o].color&&i.terms[o].color.length>1?i.terms[o].color:!1;if(l=s&&!1===l?"#fff":l,s=l&&!1===s?"#fff":s,s&&l){i.color=s,i.textColor=l;break}}if("undefined"!=typeof i.start&&null!=i.start)if(i.src_start=i.start,i.fc_rrule=i.fc_rrule?i.fc_rrule:"",""==i.fc_rrule&&""==i.fc_rdate)r[r.length]=i;else{var d=!1,c=new Date($.fullCalendar.parseDate(i.start));if(i.end){var f=new Date($.fullCalendar.parseDate(i.end));d=f.getTime()-c.getTime()}var u=$.fullCalendar.parseDate(i.start);i.fc_rrule=""==i.fc_rrule?"FREQ=DAILY;INTERVAL=1;COUNT=1":i.fc_rrule;try{if(scheduler=new Scheduler(u,i.fc_rrule,!0),""!=i.fc_interval&&i.fc_exdate){var h=exdate_to_array_of_dates(i.fc_exdate);h.length>0&&scheduler.add_exception_dates(h)}if(i.fc_rdate&&""!=i.fc_rdate){var p=exdate_to_array_of_dates(i.fc_rdate);p.length>0&&scheduler.add_rdates(p)}occurrences=scheduler.occurrences_between(e,t),occurrences.length>0&&$(occurrences).each(function(e,t){var n=new Date(t),a=$.extend(!0,{},i);if(a.premiere=n.getTime()==c.getTime(),a._start=n,a.start=n,a.fc_start=$.fullCalendar.formatDate(n,"yyyy-MM-dd"),a.fc_start_time=$.fullCalendar.formatDate(n,"HH:mm:ss"),a.fc_date_time=$.fullCalendar.formatDate(n,"yyyy-MM-dd HH:mm:ss"),d){var o=n.getTime()+d,s=new Date;s.setTime(o),a._end=s,a.end=s,a.fc_end=$.fullCalendar.formatDate(s,"yyyy-MM-dd"),a.fc_end_time=$.fullCalendar.formatDate(s,"HH:mm:ss")}else a.end=a.start,a._end=a._start;a.repeat_instance=!0,a=_add_repeat_instance_data_to_event(a),r[r.length]=a}),e>=c&&f>e&&(i.start=c,i.end=f,r[r.length]=i)}catch(v){console.log(v.message,i)}}}),r.length>0&&!r[0].local_feed){r.sort(_rhc_sort_events);var i=[];$(r).each(function(e,t){if(!t.local_feed){if(i.length>0)for(var n=0;n<i.length;n++)if(cev=i[n],t.id==cev.id&&t.start.getTime()==cev.start.getTime()&&t.network==cev.network)return!0;i.push(t)}}),r=i}return r}function cb_event_render(e,t,n,a,r,i){if(e||(e=$(r.element).parents(".fullCalendar")),showothermonth=i&&i.showothermonth?parseInt(i.showothermonth):1,showothermonth=r&&r.name&&"month"==r.name?showothermonth:1,"month"==r.name&&$(a).parents(".rhcalendar.not-widget").hasClass("fc-small")&&(showothermonth=0),0==showothermonth&&n.start&&n.end&&r.start&&r.end){if(n.end.getTime()<r.start.getTime())return!1;if(n.start.getTime()>=r.end.getTime())return!1}if(0==showothermonth&&n.start&&null==n.end&&r.start&&r.end){if(n.start.getTime()<r.start.getTime())return!1;if(n.start.getTime()>=r.end.getTime())return!1}if(event_skip=i&&i.event_skip?parseInt(i.event_skip):0,event_skip&&("undefined"==typeof r.event_skip&&(r.event_skip=event_skip),r.event_skip>0))return r.event_skip--,!1;if(1==parseInt(i.upcoming)){var o=new Date;if(n.allDay&&o.setHours(0,0,0,0),n.start.getTime()<o.getTime())return!1}if(norepeat=r.get_norepeat?r.get_norepeat(i.norepeat||!1):i.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&r&&n&&n.id){if(r.rendered=r.rendered?r.rendered:[],-1!=$.inArray(n.id,r.rendered))return!1;r.rendered.push(n.id)}if(i.taxonomycolor&&"1"==i.taxonomycolor&&n.terms){var s=[];$.each(n.terms,function(e,t){str="tax_"+t.taxonomy+"_"+t.slug,str=str.replace(/ /g,"_"),s.push(str)}),s.length>0&&$(a).addClass(s.join(" "))}if(n.venue_directory&&"rhc_gmap"!=r.name)return!1;if("rhc_gmap"==r.name&&n.start)if(1==parseInt(i.gmap_view.upcoming)){if(n.start.getTime()<r.visStart.getTime())return!1}else if(n.end&&2==parseInt(i.gmap_view.upcoming)&&n.end.getTime()<r.visStart.getTime())return!1;var l=$(e).data("rhc_tax_filters");if(l&&l.length>0){var d=!0,c=[],f=[];if($.each(n.terms,function(e,t){$.each(l,function(e,n){-1==$.inArray(n.taxonomy,f)&&f.push(n.taxonomy),n.taxonomy==t.taxonomy&&(t.gaddress&&t.gaddress==n.term?(d=!1,c.push(t.taxonomy)):t.description&&t.description==n.term?(d=!1,c.push(t.taxonomy)):t.name&&t.name==n.term&&(d=!1,c.push(t.taxonomy)))})}),!d&&f.length>0&&$.each(f,function(e,t){-1==$.inArray(t,c)&&(d=!0)}),d)return!1}if(max_events=i&&i.max_events?parseInt(i.max_events):0,max_events){if("undefined"==typeof r.max_events&&(r.max_events=max_events,r.rendered_events_count=0),r.rendered_events_count>=r.max_events)return!1;r.rendered_events_count++}if(t){var u=0;if(n.start&&n.end){var h=new Date(n.start),p=new Date(n.end);h.setHours(0,0,0,0),p.setHours(0,0,0,0),u=Math.floor((p.getTime()-h.getTime())/864e5)}var v=n._start.getDate();if(0==u)$(r.element).find(".fc-day-number").each(function(e,t){v==$(t).html()&&(n.start.getMonth()==r.start.getMonth()?$(t).parent().parent().hasClass("fc-other-month")||$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"):$(t).parent().parent().hasClass("fc-other-month")&&$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none"))});else{var h=new Date(n.start),p=new Date(n.start);h.setHours(0,0,0),p.setHours(23,59,59),$(r.element).find(".fc-day-number").each(function(e,t){current_date_str=$(t).closest(".fc-day").data("date"),current_date=new Date(current_date_str+"T00:00:00Z"),current_date.setTime(current_date.getTime()+60*h.getTimezoneOffset()*1e3),current_date.getTime()<=p.getTime()&&current_date.getTime()>=h.getTime()&&$(t).parent().parent().addClass("fc-state-highlight").addClass("fc-have-event").css("background-image","none")})}return!1}if(sidelist_events.push(n),i.matchBackground&&"1"==i.matchBackground){loop_date=new Date(n._start),compare_date=n._end||n._start;for(var m=0;loop_date<=compare_date&&(sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",original_bg=$(r.element).find(sel).css("background-color"),$(r.element).find(sel).data("original_bg",original_bg).addClass("bg_matched").css("background-color",$(a).length&&$(a).get(0).tagName?$(a).css("background-color")||"":""),loop_date.setDate(loop_date.getDate()+1),!(m++>5e3)););}if(render_something=!1,i.month_event_image&&"1"==i.month_event_image&&"month"==r.name&&n.month_image&&n.month_image[0]&&(loop_date=new Date(n._start),sel=".fc-day[data-date='"+$.fullCalendar.formatDate(loop_date,"yyyy-MM-dd")+"']",ratio=n.month_image[2]/n.month_image[1],container_w=r.element.find(sel).outerWidth(),_w=container_w,_h=_w*ratio,$(a).addClass("has-fc-image").find(".fc-event-inner").prepend($("<div></div>").addClass("fc-image-cont").append($("<img />").attr("src",n.month_image[0]).attr("height",parseInt(_h)).css("height",parseInt(_h)).addClass("fc-image"))),render_something=!0),"month"==r.name){if(i.render_events="undefined"==typeof i.render_events?1:i.render_events,0==parseInt(i.render_events)){if(!render_something)return!1;$(a).find(".fc-event-title").hide(),$(a).find(".fc-event-time").hide(),$(a).css("background-color","transparent")}"undefined"==typeof i.fixed_title||0==i.fixed_title.length||($(a).find(".fc-event-time").html("&nbsp;"),$(a).find(".fc-event-title").html(i.fixed_title))}i.early_dynamic_tooltip&&"1"==i.early_dynamic_tooltip&&cb_event_mouseover(n,null,r),i.tooltip_close_on_title_leave&&parseInt(i.tooltip_close_on_title_leave)&&$(a).mouseleave(function(e){handle=setTimeout(function(){0==$(".fc-event.event-hovered").length&&$(".fct-tooltip").is(":visible")&&($(".fct-tooltip:visible").first().is(":hover")||$(".fct-tooltip:visible").trigger("close-tooltip"))},200)})}function hide_widget_event_list(e,t,n,a,r,i){var o=jQuery(e).parents(".rhc_holder").find(".rhc_calendar_widget_day_click_holder");o.children().length>0&&o.children().fadeOut("fast",function(){})}function cb_event_render_all(e,t,n,a,r,i){if("undefined"==typeof e&&(e=$(r.element).parents(".rhcalendar.rhc_holder")),norepeat=r.get_norepeat?r.get_norepeat(i.norepeat||!1):i.norepeat||!1,norepeat=parseInt(norepeat),norepeat&&r&&(r.rendered=r.handle_rendered?r.handle_rendered():[]),has_sidelist_holder=$(e).parent().find(".rhc-sidelist").length>0?!0:!1,events=sidelist_events||[],events.length>0){var o=$(e).parent().find(".rhc-sidelist-holder .rhc-sidelist-tab-label");o.length>0&&i.sidelist&&i.sidelist.labels&&i.sidelist.labels.tab&&o.html(i.sidelist.labels.tab),render_sidelist(e,events,r.name,i)}sidelist_events=[],-1==$.inArray(r.name,["rhc_event","rhc_gmap"]),$("body").trigger("cb_view_display",[t,e,r,a])}function render_tax_filters(e){var t=e&&e.taxfilter?e.taxfilter:{holder_class:"rh-flat-ui fc-head-control",selectpicker:!0,size:10,menu_class:"tax_filter_menu_medium",multiple:e.tax_filter_multiple&&parseInt(e.tax_filter_multiple)?!0:!1},n=$(this);$(this).find("[class*='fc-button-btn_tax_']").length>0&&n.addClass("rhc-has-tax-filter"),$(this).find("[class*='fc-button-btn_tax_']").each(function(e,a){var r=(a.className.match(/(^|\s)(fc\-button\-btn_tax_([^\s]*))/)||[,,""])[3],i=$('<select class="selectpicker"></select>');if(t.multiple&&i.attr("multiple",!0),i.attr("data-taxonomy",r).append($('<option value="">'+$(this).html()+"</option>")),n.find(".fbd-filter[data-taxonomy='"+r+"']").each(function(e,t){var n=$(t).data("bgcolor")||"transparent";i.append($('<option data-bgcolor="'+n+'" value="'+$(t).val()+'">'+$(t).closest("label").find(".fbd-term-label").html()+"</option>"))}),i.find("option").length>1?($(a).replaceWith(i),i.wrap($('<div class="tax_filter_holder fc-button fc-state-default"></div>').addClass(t.holder_class).addClass(t.menu_class))):($(a).remove(),console.log("Taxonomy filter added to calendar, but disabled in options.  Also turning off the hierarchical filter can help.")),t.selectpicker){i.selectpicker({style:"btn-small btn-taxfilter btn_tax",size:t.size});var o=!1,s=i.parent().find(".dropdown-menu");i.find("option").each(function(e,t){bgcolor=$(t).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(o=!0),s.find('li[rel="'+e+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),o&&s.addClass("rhc-with-tax-color")}i.unbind("change",tax_filter_change).bind("change",{taxonomy:r,holder:n},tax_filter_change)})}function tax_filter_change(e){$(this).attr("rel",$(e.data.holder).attr("id"));var t=$(this).val();t=null==t?"":t;var n=[];return"string"==typeof t?n.push(t):$.each(t,function(e,t){return""==t?!0:void n.push(t)}),e.data.holder.find(".fbd-filter[data-taxonomy='"+e.data.taxonomy+"']").each(function(e,t){-1==$.inArray($(t).val(),n)?$(t).attr("checked",!1):$(t).attr("checked",!0)}),methods.apply_filter.apply($(this),[!1]),!0}function render_sidelist(e,t,n,a){$.each(t,function(t,r){var i=r.skip_sidelist||!1;!i&&"rhc_gmap"==n&&has_sidelist_holder&&a.sidelist&&a.sidelist.template&&$(a.sidelist.template).length>0&&($(e).parent().find(".rhc-sidelist-holder").addClass("has-events"),sidelist=$(e).parent().find(".rhc-sidelist"),render_sidelist_event(sidelist,r,a))}),$(".rhc-sidelist-event-item").show()}function render_sidelist_event(e,t,n){jQuery(document).ready(function(a){var r=new Date(t.start),i=new Date;if(i.setHours(0,0,0,0),r.getTime()<i.getTime())return!1;var o=a(n.sidelist.template).clone();if(o.attr("id","").addClass("rhc-sidelist-event-item"),t.url&&""!=t.url&&"javascript:void(0);"!=t.url){var s=n.sidelist.link_target||"_BLANK";s=""==s?"_BLANK":s;var l=a('<a href="'+t.url+'">'+t.title+"</a>").attr("target",s).attr("href","javascript:void(0);").bind("click",function(e){var a=n.eventClick?n.eventClick:fc_click;t.fc_click_link="page",t.fc_click_target=s,a(t,e,null)})}else var l=a("<span></span").html(t.title);o.find(".rhc-sidelist-title").empty().append(l);var d=o.find(".rhc-sidelist-date").html();if(o.find(".rhc-sidelist-date").html(a.fullCalendar.formatDate(t.start,d,n)),t.image&&t.image[0]&&""!=t.image[0])var c=a("<img></img>").attr("src",t.image[0]);t.venue_directory&&o.addClass("venue-directory-item").find(".rhc-sidelist-date").hide(),o.find(".rhc-sidelist-image").append(c),e.append(o.show())})}function cb_events_loading(e,t,n,a,r,i){i.for_widget?(a.loading&&a.loading(n,a,i),
handle_loading_overlay(e,t,n,a,r,i),n?$(e).find(".fc-have-event").each(function(e,t){$(this).removeClass("fc-state-highlight").removeClass("fc-have-event").css("background-image","")}):cb_events_loaded(t,r,a,i)):(a.loading&&a.loading(n,a,i),n||cb_events_loaded(t,r,a,i),handle_loading_overlay(e,t,n,a,r,i))}function handle_loading_overlay(e,t,n,a,r,i){"undefined"!=typeof i.loadingOverlay&&"1"==i.loadingOverlay&&(n?(0==$(e).find(".fc-content .fc-view-loading").length&&$(e).find(".fullCalendar .fc-content").prepend($('<div class="fc-view-loading"></div>').hide().append('<div class="fc-view-loading-1 ajax-loader"><div class="fc-view-loading-2x xspinner icon-xspinner-3"></div></div>')),$(e).addClass("is-loading").find(".fc-view-loading").addClass("loading-events").find(".ajax-loader").addClass("loading-events").end().stop().fadeIn()):$(e).removeClass("is-loading").find(".fc-view-loading").stop().fadeOut("fast",function(){$(e).find().remove(".fc-view-loading"),"rhc_event"==a.name&&$(e).find(".fc-view-rhc_event").css("min-height","")}))}function cb_events_loaded(e,t,n,a){if(calendar=e,(!a.tax_filter||"1"==a.tax_filter)&&0!=$(calendar).find(".fc-head-control").length){var r=$(calendar).fullCalendar("clientEvents"),i=[];if($.each(r,function(e,t){t.terms&&t.terms.length>0&&$.each(t.terms,function(e,n){if(a.tax_filter_include&&a.tax_filter_include.length>0){if(-1==$.inArray(n.taxonomy,a.tax_filter_include))return}else if(a.tax_filter_skip&&-1!=$.inArray(n.taxonomy,a.tax_filter_skip))return;for(var r=-1,o=0;o<i.length;o++)if(i[o].taxonomy==n.taxonomy){r=o;break}var s="";s=n.gaddress?n.gaddress:n.description?n.description:n.name?n.name:"unknown";var l={value:s,order:n.term_priority?parseInt(n.term_priority):0,local_feed:t.local_feed,term:n};-1==r?i[i.length]={taxonomy:n.taxonomy,label:n.taxonomy_label,terms:[s],uterms:[l],print_priority:n.print_priority?parseInt(n.print_priority):0,filter_type:n.filter_type?n.filter_type:"",color:n.color||"",background_color:n.background_color||""}:-1==$.inArray(s,i[r].terms)&&(i[r].terms.push(s),i[r].uterms.push(l))})}),a.tax_filter_include&&a.tax_filter_include.length>0&&i.length>0&&(new_taxonomies=[],$.each(a.tax_filter_include,function(e,t){$.each(i,function(e,n){t==n.taxonomy&&(new_taxonomies[new_taxonomies.length]=n)})}),i=new_taxonomies),i.length>0){var o=$(calendar).find(".fc-head-control .tax_filter_holder");o.empty(),o.parents(".fc-head-control").removeClass("has-filters"),$.each(i,function(e,t){if(0!=t.terms.lengt){t.uterms.sort(cb_sort_tax_filter),t.terms=[];var n=!1,a=!1;$.each(t.uterms,function(e,r){n&&n!=r.order&&(a=!0),n=r.order,t.terms.push(r.value)}),a||(t.terms.sort(),t.uterms.sort(cb_sort_alphanum));var r=$("<select></select>").attr("title",t.label).attr("multiple","multiple").addClass("tax_filter_field").addClass("selectpicker").data("taxonomy",t.taxonomy).data("taxonomy_filter_type",t.filter_type).append('<option value="">'+t.label+"</option>");$.each(t.uterms,function(e,t){bgcolor=t.term.background_color||"transparent",option_label=t.term&&t.term.name?t.term.name:t.value,_option=$('<option value="'+t.value+'">'+option_label+"</option>").data("term",t),_option.attr("data-bgcolor",bgcolor),r.append(_option)}),r.appendTo(o).wrap('<div class="tax_filter_item_holder"></div>').selectpicker({style:"btn-small btn-taxfilter"});var i=!1,s=r.parent().find(".dropdown-menu");r.find("option").each(function(e,t){bgcolor=$(t).attr("data-bgcolor")||"transparent","transparent"!=bgcolor&&(i=!0),s.find('li[rel="'+e+'"] a').prepend($('<span class="rhc-term-color"></span>').css("background-color",bgcolor).addClass("transparent"==bgcolor?"rhc-no-color":""))}),i&&s.addClass("rhc-with-tax-color"),o.parents(".fc-head-control").addClass("has-filters")}}),o.find(".tax_filter_field").change(function(e){var t=$(this).parents(".fullCalendar"),n=[];$(t).find(".tax_filter_field").each(function(e,t){$(t).find("option:selected").each(function(e,a){var r=$(a).attr("value");if(""!=r){var i=$(t).data("taxonomy_filter_type"),o=$(a).data("term");n.push({taxonomy:$(t).data("taxonomy"),term:r,filter_type:i,slug:o.term&&o.term.slug?o.term.slug:null,term_id:o.term&&o.term.term_id?o.term.term_id:null,local_feed:o.local_feed})}})}),$(t).parent().find(".rhc-sidelist").length>0&&($(t).parent().find(".rhc-sidelist-holder").removeClass("has-events"),$(t).parent().find(".rhc-sidelist").empty()),args={tax_filters:n},a.show_ad&&(args.show_ad=a.show_ad),$(t).data("rhc_tax_filters",n).fullCalendar("rerenderEvents"),$("BODY").trigger("rhc_filter",args)})}}}function cb_view_display(e,t,n,a){t||(t=$(n.element).parents(".fullCalendar")),set_fc_small(t);var r=$(t).fullCalendar("getView");"rhc_gmap"==r.name?$(t).find(".fc-head-control").addClass("show-control"):$(t).find(".fc-head-control").removeClass("show-control"),"rhc_event"==r.name?$(a).parents(".rhc_holder").addClass("view-rhc_event"):$(a).parents(".rhc_holder").removeClass("view-rhc_event"),$(t).data("rhc_tax_filters",[]),$(t).find(".tax_filter_field").each(function(e,t){$(t).val("")});var i=new Date;if(n.visStart<=i&&n.visEnd>=i?$(a).parents(".rhc_holder").addClass("has-current-date").removeClass("not-current-date"):$(a).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),"month"==n.name&&$(a).parents(".rhc_holder").find(".fc-today").length>0&&$(a).parents(".rhc_holder").find(".fc-today").is(".fc-other-month")&&$(a).parents(".rhc_holder").removeClass("has-current-date").addClass("not-current-date"),$(a).parents(".rhc_holder").is(".flat-ui-cal")){var o=$(t).parents(".rhc_holder").data("Calendarize"),s=o.modes[o.mode].options;if($(a).parents(".rhc_holder").is(".has-current-date")){try{var l=$("<div/>").html(s.widget_hformat).text()}catch(d){var l=null}var c=l||"'<span class=''fuiw-dayname''>'dddd'</span><span class=''fuiw-month''>'MMMM'</span><span class=''fuiw-year''>'yyyy'</span><span class=''fuiw-day''>'d'</span>'";$(t).find(".fc-header-title h2").html($.fullCalendar.formatDate(i,c,s))}else{str=$(t).find(".fc-header-title h2").html(),str=str.trim();var f=str.split(" ");2==f.length&&(c=isNaN(f[1])?"<span class='fuiw-month'>"+f[1]+"</span><span class='fuiw-year'>"+f[0]+"</span>":"<span class='fuiw-month'>"+f[0]+"</span><span class='fuiw-year'>"+f[1]+"</span>",$(t).find(".fc-header-title h2").html(c))}_skip=s.widget_onechardaylabel&&1==parseInt(s.widget_onechardaylabel)?!0:!1,_skip||$(t).find(".fc-day-header").each(function(e,t){$(t).html($(t).html().substring(0,1))})}}function cb_sort_tax_filter(e,t){return e.order>t.order?1:e.order<t.order?-1:0}function cb_sort_alphanum(e,t){a=e.value.toString(),b=t.value.toString();var n=/[^a-zA-Z]/g,r=/[^0-9]/g,i=a.replace(n,""),o=b.replace(n,"");if(i===o){var s=parseInt(a.replace(r,""),10),l=parseInt(b.replace(r,""),10);return s===l?0:s>l?1:-1}return i>o?1:-1}function add_footer_button(e){var t=$.extend({calendarize:null,calendar:null,e:null,tm:"fc",buttonName:"undefined",label:"",buttonClick:function(e,t,n){}},e);tm=t.tm;var n=$("<span class='fc-button fc-button-"+t.buttonName+" "+tm+"-state-default '><span class='fc-button-inner'><span class='fc-button-content'>"+t.label+"</span><span class='fc-button-effect'><span></span></span></span></span>");n&&(n.click(function(e){n.hasClass(tm+"-state-disabled")||t.buttonClick(this,e,t)}).mousedown(function(){n.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){n.removeClass(tm+"-state-down")}).hover(function(){n.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){n.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(t.e),n.addClass(tm+"-corner-left"),n.addClass(tm+"-corner-right"))}function ical_footer_button_click(e,t,n){var a=n.calendarize;if(f,$(e).parent().find(".ical-tooltip").length>0)$(e).parent().find(".ical-tooltip").remove();else{var r=$(a).data("Calendarize"),i=r.modes[r.mode].options,o=i.events_source+i.events_source_query;o=o.replace("get_calendar_events","get_icalendar_events");var s=o+"&ics=1",l=i.feed&&""!=i.feed?"&feed="+i.feed:"";o+=l,s+=l;var d=$(".ical-tooltip-template").first().clone();d.removeClass("ical-tooltip-template").addClass("ical-tooltip").find(".ical-url").html(o).end().find(".ical-clip").attr("href",o).on("click",function(e){return $(this).focus(),$(this).select(),!1}).end().find(".ical-close").on("click",function(e){$(this).parents(".fc-footer").find(".fc-button-icalendar").trigger("click")}).end().find(".ical-ics").attr("href",s).end(),$(e).after(d),d.fadeIn("fast",function(e){d.find("textarea.ical-url").focus().select()})}}function cb_dayclick(e,t,n,a,r,i){if(r.dayclick){var o=r.dayclick&&""!=r.dayclick&&window[r.dayclick]?window[r.dayclick]:!1;if(o)return o(e,t,n,a,r,i)}else{var o=r.widget_dayclick&&""!=r.widget_dayclick&&window[r.widget_dayclick]?window[r.widget_dayclick]:!1;if(o)calendar_widget_day_click(e,t,n,a,rhc_events_cache,r,i);else if(r.widget_link){if(r.widget_link_view)var s=r.widget_link_view;else var s="agendaDay";$('<form method="post" />').attr("action",r.widget_link).append('<input type="hidden" name="gotodate" value="'+$.fullCalendar.formatDate(e,"yyyy-MM-dd")+'" />').append('<input type="hidden" name="defaultview" value="'+s+'" />').append('<input type="hidden" name="fcalendar" value="'+(r.ev_calendar?r.ev_calendar:"")+'" />').append('<input type="hidden" name="fvenue" value="'+(r.ev_venue?r.ev_venue:"")+'" />').append('<input type="hidden" name="forganizer" value="'+(r.ev_organizer?r.ev_organizer:"")+'" />').appendTo(i).submit()}}}var methods={init:function(e){function t(e,t){if(e.hasClass("fbd-cell")||(e=e.parents(".fbd-cell")),t.hasClass("fbd-checked"))var n={opacity:0,left:-30};else var n={opacity:0,left:30};var r="linear",i="fast";if(0==t.find(".fbd-cell").length)$(e).animate(n,i,r,function(){$(this).appendTo(t).css("left",-1*n.left).animate({opacity:1,left:0})});else{var o=t.find(".fbd-cell");if(parseInt($(e).data("tab-index"))>parseInt($(o[o.length-1]).data("tab-index")))$(e).animate(n,i,r,function(){$(this).appendTo(t).css("left",-1*n.left).animate({opacity:1,left:0})});else if(parseInt($(e).data("tab-index"))<parseInt($(o[0]).data("tab-index")))$(e).animate(n,i,r,function(){$(o[0]).before(e).prev().css("left",-1*n.left).animate({opacity:1,left:0})});else for(a=0;a<o.length;a++){var s=o[a];if(parseInt($(e).data("tab-index"))>parseInt($(o[a]).data("tab-index"))&&parseInt($(e).data("tab-index"))<parseInt($(o[a+1]).data("tab-index"))){$(e).animate(n,i,r,function(){$(s).after($(this).css("left",-1*n.left).animate({opacity:1,left:0}))});break}}}}var n=$.extend({editable:!1,mode:"view"},e);return $(".fc-dialog").CalendarizeDialog(),this.each(function(){var e=$(this).data("Calendarize");if(!e){if($(this).data("Calendarize",n).Calendarize("mode",n.mode),0==$(this).find(".rhc-sidelist").length&&($('<div class="rhc-sidelist-holder"><div class="rhc-sidelist-tab"><div class="rhc-sidelist-tab-label"></div></div><div class="rhc-sidelist-head"></div><div class="rhc-sidelist"></div></div>').appendTo(this),$(this).find(".rhc-sidelist-tab").click(function(e){$(this).parents(".rhc-sidelist-holder").toggleClass("sidelist-open")})),0==$(this).find("fullCalendar > .fc-head-control").length){var a=".fc-header";$(this).find(a).length>0&&($(this).find(a).after('<div class="fc-head-control rh-flat-ui"><div class="tax_filter_nav"><a href="#" class="tax_filter_previous btn btn-small btn-taxfilter fui-arrow-left"></a></div><div class="tax_filter_holder_viewport"><div class="tax_filter_holder"></div></div></div>'),$(this).find(".tax_filter_previous").click(function(e){var t=$(this).parents(".fc-head-control").find(".tax_filter_holder");if(t.stop(!1,!0),t.find(".tax_filter_item_holder").length>0){var n=t.find(".tax_filter_item_holder").first();n.stop(!1,!0);var a=-1*n.outerWidth(!0),r=n.css("opacity");n.animate({opacity:0},400,"swing"),t.animate({"margin-left":a},500,"swing",function(){n.stop(!1,!0).appendTo(t).css("opacity",r),$(this).css("margin-left",0)})}}))}0==$(this).find(".fc-lower-head-tools").length&&($(this).find(".fc-header").after('<div class="fc-lower-head-tools"></div>'),0==$(this).find(".fc-lower-head-tools .fc-filters-dialog").length&&$(this).find(".fc-filters-dialog-holder .fc-filters-dialog").clone().appendTo($(this).find(".fc-lower-head-tools")));var r=.6*parseInt($(this).find(".fc-content").innerHeight());r=300>r?300:r,$(this).find(".fc-lower-head-tools .fc-filters-dialog").find(".fbd-unchecked").css("max-height",r+"px"),$(this).find(".fc-filters-dialog .fbd-tabs").on("click",function(e){$(this).parent().parent().find(".fbd-tabs").removeClass("fbd-active-tab").end().find(".fbd-tabs-panel").hide().end().find($(this).find("a").data("tab-target")).show(),$(this).addClass("fbd-active-tab")}).first().trigger("click"),$(this).find('.fbd-cell input[type="checkbox"]').attr("checked",!1),$(this).find('.fbd-cell input[type="checkbox"]').on("click",function(e){if($(this).is(":checked"))var n=$(this).parent().parent().parent().parent().find(".fbd-checked");else var n=$(this).parent().parent().parent().parent().find(".fbd-unchecked");t($(this).parent().parent(),n)}),$(this).find(".fullCalendar .fbd-dg-apply,.fullCalendar .fbd-dg-remove").attr("rel",$(this).attr("id")),$(this).find(".fullCalendar .fbd-dg-apply").on("click",function(e){return methods.apply_filter.apply($(this),[])}),$(this).find(".fbd-close-tooltip a").unbind("click").click(function(e){$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fbd-dg-remove").on("click",function(e){$(this).parents(".rhc_holder").find("input[name=s]").val("").trigger("change"),$("#"+$(this).attr("rel")).find("input[type=checkbox].fbd-filter").each(function(e,n){if("undefined"!=typeof $(n).attr("checked")){$(n).attr("checked",!1);var a=$(this).parent().parent().parent().parent().find(".fbd-unchecked");t($(this).parents(".fbd-cell"),a)}}).end().find(".fbd-dg-apply").trigger("click"),$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click")}),$(this).find(".fullCalendar .fc-header").on("click",function(e){$(".fct-tooltip").trigger("close-tooltip")}),$(document).keyup(function(e){27==e.keyCode&&($(".fct-tooltip").trigger("close-tooltip"),$(".fc-filters-dialog:visible").stop().find(".fbd-unchecked").css("overflow-y","hidden").end().animate({opacity:0,top:-10},"fast","linear",function(){$(this).hide()}))}),0==$(this).find("fc-view-loading-bottom").length&&$(this).find(".fullCalendar .fc-footer").before($('<div class="fc-view-loading-bottom"></div>').append($('<div class="fc-view-loading-bottom-1"><div class="fc-view-loading-bottom-2 fc-next-arrow"></div></div>').click(function(e){$(this).parents(".rhc_holder").find(".fullCalendar").fullCalendar("next")}))),$(this).trigger("rhc_loaded")}})},mode:function(e){var t=this,n=$(this).data("Calendarize");if(n&&n.modes){var a=$.extend(n.common,n.modes[e].options);preload_events(this,a),a.for_widget?(a.eventRender=function(e,t,n){return cb_event_render(o,!0,e,t,n,a)},a.eventAfterAllRender=function(e){return hide_widget_event_list(o,!1,null,null,e,a),cb_event_render_all(o,!0,null,null,e,a)},a.dayClick=function(e,n,r,i){return cb_dayclick(e,n,r,i,a,t)}):(a.eventRender=function(e,t,n){return"rhc_grid"!=n.name&&$(".fc-event-title",t).html(e.title),cb_event_render(o,!1,e,t,n,a)},a.eventAfterAllRender=function(e){return cb_event_render_all(o,!1,null,null,e,a)}),a.loading=function(e,n){return cb_events_loading(t,this,e,n,o,a)},a.eventDataTransform=function(e){if(e.start&&e.start.getFullYear){e.terms||(e.terms=[]);var t={filter_type:"AND",term_priority:parseInt(e.start.getMonth()),description:$.fullCalendar.formatDate(e.start,"MMMM",a),taxonomy:"core_month",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.month?a.tax_filter_label.month:"month",slug:$.fullCalendar.formatDate(e.start,"M",a)};e.terms.unshift(t);var n=e.start.getFullYear(),t={filter_type:"AND",term_priority:parseInt(n),description:n,taxonomy:"core_year",taxonomy_label:a.tax_filter_label&&a.tax_filter_label.year?a.tax_filter_label.year:"year",slug:parseInt(n)};e.terms.unshift(t)}return e};var r=function(e,t,n){$.fn.Calendarize.events_source(e,t,n,a)};a.eventSources=[],"1"!=a.json_only&&a.eventSources.push(r),a.json_feed&&a.json_feed.length>0&&("1"==a.json_only&&(a.events=null,a.singleSource=null),a.json_feed&&a.json_feed.length>0&&$.each(a.json_feed,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){var n=function(e,n,r){$.fn.Calendarize.rhc_feed_src(e,n,r,t,a)};a.eventSources[a.eventSources.length]=n}else{var r=function(e,n,r){$.fn.Calendarize.ext_events_source(e,n,r,t,a)};a.eventSources[a.eventSources.length]=r}})),a.viewRender=function(e,t){cb_view_display(a.for_widget,o,e,t)},a.eventMouseover=function(e,t,n){cb_event_mouseover(e,t,n),a.tooltip_on_hover&&"1"==a.tooltip_on_hover&&$(t.target).closest("a").click(),$(t.target).closest("a").addClass("event-hovered")},a.eventMouseout=function(e,t,n){$(t.target).closest("a").removeClass("event-hovered")},a.calendar_id=$(this).attr("id"),f=$(this).find(".fullCalendar").fullCalendar(a),n.editable&&0==f.find(".fc-edit-tools").length&&f.prepend('<div class="fc-edit-tools"></div>'),0==f.find(".fc-footer").length&&(f.append('<div class="fc-footer"></div>'),a.icalendar_align&&$(".fc-footer").css("text-align",a.icalendar_align).addClass("dlg-align-"+a.icalendar_align)),a.header&&0==(a.header.center+a.header.left+a.header.right).length&&($(this).find(".fc-header").css("display","none"),$(this).find(".fc-edit-tools").css("display","none"),$(this).find(".fc-head-control").css("display","none"),$(this).find(".fc-lower-head-tools").css("display","none"),$(this).find(".fc-header").attr("hello",1));var i=f.find(".fc-footer"),o=f,s=a.theme?"ui":"fc";if($(".ical-tooltip-template").length>0){var l=$(".ical-tooltip-template").first().data("button_text");add_footer_button({calendar:f,calendarize:t,e:i,tm:s,label:l,buttonName:"icalendar",buttonClick:ical_footer_button_click})}a.gotodate&&""!=a.gotodate&&$(this).find(".fullCalendar").fullCalendar("gotoDate",$.fullCalendar.parseDate(a.gotodate)),$(this).find(".fullCalendar").data("starting_date",$(this).find(".fullCalendar").fullCalendar("getDate")),render_tax_filters.apply(this,[a])}},destroy:function(){return this.each(function(){var e=$(this),t=e.data("Calendarize");$(window).unbind(".Calendarize"),t.Calendarize.remove(),e.removeData("Calendarize")})},apply_filter:function(e){return e="undefined"==typeof e?!0:e,this.each(function(){var t="#"+$(this).attr("rel");$(t+" .fullCalendar").find(".bg_matched").each(function(e,t){$(t).css("background-color",$(t).data("original_bg")||"")});var n=[];$(t+" .fullCalendar").find(".fbd-filter-group").each(function(e,t){var a=[];$(t).find("input[type=checkbox].fbd-filter:checked").each(function(e,t){a[a.length]=$(t).val()}),a.length>0&&(n[n.length]={taxonomy:$(this).data("taxonomy"),terms:a.join(","),terms_array:a})});var a=$(t).data("Calendarize"),r=a.modes[a.mode].options;r.calendar_id=$(t).attr("id");var i=$(t+" .fullCalendar"),o=i.fullCalendar("getView");o.clear_events=!0;var s="";if(n&&$.each(n,function(e,t){s+=r.replace_square_brackets?"&tax%5B"+t.taxonomy+"%5D="+t.terms:"&tax["+t.taxonomy+"]="+t.terms}),$(t).find(".fc-lower-head-tools  input[name=s]").length){var l=$(t).find(".fc-lower-head-tools  input[name=s]").val();""!=l&&(s+="&s="+escape(l))}r.events_source_query_original=r.events_source_query_original?r.events_source_query_original:r.events_source_query,""!=s?(i.fullCalendar("removeEventSources"),r.events_source_query=r.events_source_query_original+s):(i.fullCalendar("removeEventSources"),r.events_source_query=r.events_source_query_original);var d=function(e,t,n){$.fn.Calendarize.events_source(e,t,n,r)};if(i.fullCalendar("addEventSource",d),0==n.length)r.json_feed&&r.json_feed.length>0&&$.each(r.json_feed,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){var n=function(e,n,a){$.fn.Calendarize.rhc_feed_src(e,n,a,t,r)};i.fullCalendar("addEventSource",n)}else{var a=function(e,n,a){$.fn.Calendarize.ext_events_source(e,n,a,t,r)};i.fullCalendar("addEventSource",a)}});else{var c=[];$.each(n,function(e,t){$.each(t.terms_array,function(e,n){r.json_feed&&r.json_feed.length>0&&$.each(r.json_feed,function(e,a){if(!($.inArray(a,c)>-1)&&a.terms&&a.terms.length>0)for(var e=0;e<a.terms.length;e++)if(a.terms[e].taxonomy==t.taxonomy&&a.terms[e].slug==n)return void(-1==$.inArray(a,c)&&c.push(a))})})}),$.each(c,function(e,t){if(t.rhc_feed&&"1"==t.rhc_feed){var n=function(e,n,a){$.fn.Calendarize.rhc_feed_src(e,n,a,t,r)};i.fullCalendar("addEventSource",n)}else{var a=function(e,n,a){$.fn.Calendarize.ext_events_source(e,n,a,t,r)};i.fullCalendar("addEventSource",a)}})}("rhc_gmap"==o.name||"rhc_grid"==o.name)&&$(this).closest(".fullCalendar").fullCalendar("gotoDate",$(this).closest(".fullCalendar").data("starting_date")),e&&$(this).parents(".fullCalendar").find(".fc-button-rhc_search").trigger("click"),$(this).closest(".fullCalendar").find(".fc-no-list-events-message").hide()})}};$.fn.Calendarize=function(e){return methods[e]?methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.Calendarize"):methods.init.apply(this,arguments)};var rhc_events_cache=[];$.fn.Calendarize.rhc_feed_src=function(e,t,n,a,r){jQuery(document).ready(function(i){for(var o=!0,s=[],l=new Date,d=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:l.getTime(),c={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),_:d,"data[]":s},f=0;f<rhc_events_cache.length;f++)if(o&&rhc_events_cache[f].start<=c.start&&rhc_events_cache[f].end>=c.end&&rhc_events_cache[f].url==a.url)return parseInt(r.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void n(rhc_events_cache[f].events);var u=c;u.url=a.url,i.post(a.url,c,function(a){if("OK"==a.R){var r=[];r=rhc_events_to_fc_events(e,t,a,!1),u.events=r,in_rhc_events_cache(u.start,u.end,u.url)||(rhc_events_cache[rhc_events_cache.length]=u),n(r)}else"ERR"==a.R},"json")})},$.fn.Calendarize.ext_events_source=function(e,t,n,a,r){jQuery(document).ready(function(i){for(var o=!0,s=[],l=new Date,d=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:l.getTime(),c={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),_:d,"data[]":s},f=0;f<rhc_events_cache.length;f++)if(o&&rhc_events_cache[f].start<=c.start&&rhc_events_cache[f].end>=c.end&&rhc_events_cache[f].url==a.url)return parseInt(r.debugjs)&&rhc_console("rhc_feed_src.  Loading from rhc_events_cache."),void n(rhc_events_cache[f].events);var u=c;u.url=a.url,i.post(a.url,c,function(e){u.events=e,in_rhc_events_cache(u.start,u.end,u.url)||(rhc_events_cache[rhc_events_cache.length]=u),n(u.events)},"json")})},$.fn.Calendarize.events_source=function(e,t,n,a){jQuery(document).ready(function(r){function i(r){if("OK"==r.R){var i=[];i=rhc_events_to_fc_events(e,t,r,!0),i=handle_local_tz(i,a,r),i=allday_group(i,a),h.events=i,in_rhc_events_cache(h.start,h.end,h.url)||(rhc_events_cache[rhc_events_cache.length]=h),n(i)}else"ERR"==r.R}var o=[];r(".calendarize_meta_data").each(function(e,t){"checkbox"==t.type?o[o.length]=[t.name,r(t).is(":checked")?1:0]:o[o.length]=[t.name,r(t).val()]});var s=a.events_source+a.events_source_query;"undefined"!=typeof icl_lang?s+="&lang="+icl_lang:"undefined"!=typeof icl_vars&&icl_vars.current_language&&(s+="&lang="+icl_vars.current_language),a.calendar_id&&""!=a.calendar_id?(vo=r("#"+a.calendar_id).find(".fullCalendar").fullCalendar("getView"),view_name=vo.name):view_name="";for(var l=!0,d=new Date,c=RHC.last_modified&&""!=RHC.last_modified?RHC.last_modified:d.getTime(),f={start:Math.round(e.getTime()/1e3),end:Math.round(t.getTime()/1e3),rhc_shrink:a.shrink?parseInt(a.shrink):"",view:view_name,ver:c,_:"","data[]":o},u=0;u<rhc_events_cache.length;u++)if(l&&rhc_events_cache[u].start<=f.start&&rhc_events_cache[u].end>=f.end&&rhc_events_cache[u].url==s)return parseInt(a.debugjs)&&rhc_console("Loading from rhc_events_cache."),void n(rhc_events_cache[u].events);var h=f;h.url=s,s=s+"&start="+f.start+"&end="+f.end+"&rhc_shrink="+f.rhc_shrink+"&view="+f.view+"&ver="+f.ver,o.length>0&&r.each(o,function(e,t){s=s+"&data["+e+"][0]="+t[0],s=s+"&data["+e+"][1]="+t[1]}),queryString=s.substring(s.indexOf("?")+1),hash=CryptoJS.MD5(queryString),f._=hash.toString(CryptoJS.enc.Hex),s=s+"&_="+f._,r.ajax({url:s,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",cache:!0,success:function(e){i(e)},error:function(e,t,n){if("parsererror"==t)try{response=e.responseText.replace(/<!--[\s\S]*?-->/g,""),o=r.parseJSON(response),i(o)}catch(a){}}})})},$.fn.RHCLink=function(e,t){var n=t,a=t.calendar,r=a.options,i=($.extend({eventClick:"fc_click"},r),e.fc_click_target||"_self");return e.gcal||""==e.url?$(this):e.direct_link?$(this).wrap($("<a></a>").attr("href",e.url).attr("target",i)).parent():$(this).wrap($("<a></a>").attr("target",i).attr("href",e.url).unbind("click").bind("click",function(t){var r=a.options.eventClick?a.options.eventClick:fc_click;return r(e,t,n)})).parent()};var sidelist_events=[]}(jQuery),function(e){var t={init:function(t){var n=e.extend({draggable:!0},t);return this.each(function(){var t=e(this).data("CalendarizeDialog");t||(e(this).data("CalendarizeDialog",n),n.draggable&&e(this).draggable({handle:".ui-widget-header"}),e(this).find(".ui-dialog-titlebar-close").on("click",function(t){e(this).parent().parent().parent().CalendarizeDialog("close")}),j),e(this).hide()})},open:function(t){e(this).show().css("margin-left",0).offset(t.offset).css("margin-left",t.margin_left)},close:function(){e(this).hide()}};e.fn.CalendarizeDialog=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.CalendarizeDialog"):t.init.apply(this,arguments)}}(jQuery),function(e){function t(t){var n=[];return t.children().each(function(t,a){n.push({name:e(a).html(),lon:e(a).data("glon"),lat:e(a).data("glat"),info:e(a).data("ginfo"),address:e(a).data("gaddress"),marker_active:e(a).data("marker_active"),marker_inactive:e(a).data("marker_active"),marker_size:e(a).data("marker_size")})}),n}function n(t,a,r){function i(e,a){var i=function(i,o){return o==google.maps.GeocoderStatus.OK&&(latlng=i[0].geometry.location,e[a].lat=latlng.lat(),e[a].lon=latlng.lng()),n(t,e,r)};return i}if(r++,r>10)return!1;if("interactive"!=t.data("type"))return!1;if(0==a.length)return!1;for(var o=0;o<a.length;o++)if(!a[o].lat&&!a[o].lon&&a[o].address){var s=new google.maps.Geocoder;return void s.geocode({address:a[o].address},i(a,o))}t.uniqueId(),ratio=t.data("ratio"),ratio=""==ratio?"4:3":ratio,ratio_arr=ratio.split(":"),h=t.width()*ratio_arr[1]/ratio_arr[0],t.height(h),maptype=t.data("maptype")||"ROADMAP",settings={mapTypeId:google.maps.MapTypeId[maptype],center:new google.maps.LatLng(a[0].lat,a[0].lon)},t.data("zoom")&&(settings.zoom=t.data("zoom"));var l=new google.maps.Map(t.get(0),settings),d=new google.maps.LatLngBounds,c=new google.maps.InfoWindow;e.each(a,function(e,t){marker=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:l}),d.extend(marker.position),google.maps.event.addListener(marker,"click",function(e,n){return function(){c.setContent(t.info||t.name||t.address),c.open(l,e)}}(marker,e))}),a.length>1&&l.fitBounds(d)}var a={init:function(a){e.extend({todo:!1},a);return this.each(function(){var a=e(this),r=a.data("rhc_gmap");return r?void 0:(a.data("rhc_gmap",!0),n(a,t(a),0),!0)})}};e.fn.rhcGmap=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.rhcGmap"):a.init.apply(this,arguments)}}(jQuery),jQuery(document).ready(function(e){init_rhc()});