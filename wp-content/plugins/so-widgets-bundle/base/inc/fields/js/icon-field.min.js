!function(i){var e={};i(document).on("sowsetupformfield",".siteorigin-widget-field-type-icon",function(t){var n=i(this),o=n.find(".siteorigin-widget-icon-selector"),s=o.find(".siteorigin-widget-icon-icon"),a=n.find(".siteorigin-widget-icon-selector-current"),d=n.find(".so-icon-remove"),c=n.find(".siteorigin-widget-icon-search");a.click(function(){o.slideToggle(),c.val(""),r()}),d.click(function(i){i.preventDefault(),n.find(".siteorigin-widget-active").click()});var r=function(){var e=c.val().toLowerCase();""===e?o.find(".siteorigin-widget-icon-icons-icon").show():o.find(".siteorigin-widget-icon-icons-icon").each(function(){var t=i(this),n=t.attr("data-value");n=n.replace(/-/," "),n.indexOf(e)===-1?t.hide():t.show()})};c.keyup(r).change(r);var g=function(){var t=o.find("select.siteorigin-widget-icon-family").val(),n=o.find(".siteorigin-widget-icon-icons");if("undefined"!=typeof e[t]){n.empty(),0===i("#siteorigin-widget-font-"+t).length&&i("<link rel='stylesheet' type='text/css'>").attr("id","siteorigin-widget-font-"+t).attr("href",e[t].style_uri).appendTo("head");for(var c in e[t].icons){var g=i('<div data-sow-icon="'+e[t].icons[c]+'"/>').attr("data-value",t+"-"+c).addClass("sow-icon-"+t).addClass("siteorigin-widget-icon-icons-icon").click(function(){var e=i(this);e.hasClass("siteorigin-widget-active")?(e.removeClass("siteorigin-widget-active"),s.val(""),a.find("span").hide(),d.hide()):(n.find(".siteorigin-widget-icon-icons-icon").removeClass("siteorigin-widget-active"),e.addClass("siteorigin-widget-active"),s.val(e.data("value")),a.find("span").show().attr("data-sow-icon",e.attr("data-sow-icon")).attr("class","").addClass("sow-icon-"+t),d.show()),s.trigger("change"),o.slideUp()});n.append(g),s.val()===t+"-"+c&&(a.find("span").show().attr("data-sow-icon",g.attr("data-sow-icon")).attr("class","").addClass("sow-icon-"+t),g.addClass("siteorigin-widget-active"))}n.prepend(n.find(".siteorigin-widget-active")),r()}},l=function(){var t=o.find("select.siteorigin-widget-icon-family").val(),n=o.find("select.siteorigin-widget-icon-family option:selected").data("icons");null!==n&&(e[t]=n),"undefined"!=typeof t&&""!==t&&("undefined"==typeof e[t]?i.getJSON(soWidgets.ajaxurl,{action:"siteorigin_widgets_get_icons",family:o.find("select.siteorigin-widget-icon-family").val()},function(i){e[t]=i,g()}):g())};l(),o.find("select.siteorigin-widget-icon-family").change(function(){o.find(".siteorigin-widget-icon-icons").empty(),l()})})}(jQuery);