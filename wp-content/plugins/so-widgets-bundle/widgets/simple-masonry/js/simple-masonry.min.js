var sowb=window.sowb||{};jQuery(function(t){sowb.setupSimpleMasonries=function(){var t=jQuery,i=t(".sow-masonry-grid"),a=function(){i.each(function(){var i=t(this),a=i.data("layouts"),e=window.matchMedia("(max-width: "+a.tablet.breakPoint+"px)"),s=window.matchMedia("(max-width: "+a.mobile.breakPoint+"px)"),o=a.desktop;s.matches?o=a.mobile:e.matches&&(o=a.tablet);var h=o.numColumns;i.css("width","auto");var n=o.gutter*(h-1),r=Math.floor((i.width()-n)/h);i.width(r*h+n),i.imagesLoaded(function(){i.find("> .sow-masonry-grid-item").each(function(){var i=t(this),a=i.data("colSpan");a=Math.max(Math.min(a,o.numColumns),1),i.width(r*a+o.gutter*(a-1));var e=i.data("rowSpan");e=Math.max(Math.min(e,o.numColumns),1);var s=o.rowHeight||r;i.css("height",s*e+o.gutter*(e-1));var h=i.find("> img,> a > img"),n=h.attr("height")>0?h.attr("width")/h.attr("height"):1,m=i.height()>0?i.width()/i.height():1;if(n=parseFloat(n.toFixed(3)),m=parseFloat(m.toFixed(3)),n>m){h.css("width","auto"),h.css("height","100%"),h.css("margin-top","");var d=(h.width()-i.width())*-.5;h.css("margin-left",d+"px")}else{h.css("height","auto"),h.css("width","100%"),h.css("margin-left","");var w=(h.height()-i.height())*-.5;h.css("margin-top",w+"px")}}),i.packery({itemSelector:".sow-masonry-grid-item",columnWidth:r,gutter:o.gutter})})})};t(window).on("resize panelsStretchRows",a),setTimeout(function(){a()},100)},sowb.setupSimpleMasonries(),t(sowb).on("setup_widgets",sowb.setupSimpleMasonries)});