/*! 
 * BuddyBoss Wall JavaScript Library 
 * @package BuddyBoss Wall 
 */function budyboss_wall_comment_like_unlike(a){if(jq=jQuery,a=jq(a),a.hasClass("fav-comment")||a.hasClass("unfav-comment")){var b=a.hasClass("fav-comment")?"fav":"unfav",c=a.closest("[id^=acomment-]"),d=c.attr("id").substr(9,c.attr("id").length);a.addClass("loading"),jq.post(ajaxurl,{action:"activity_mark_"+b,cookie:bp_get_cookies(),id:d,item_type:"comment"},function(c){a.removeClass("loading"),a.fadeOut(200,function(){jq(this).html(c),jq(this).attr("title","fav"==b?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),jq(this).fadeIn(200)}),"fav"==b?(jq(".item-list-tabs #activity-favs-personal-li").length||(jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)),a.removeClass("fav-comment"),a.addClass("unfav-comment")):(a.removeClass("unfav-comment"),a.addClass("fav-comment"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1),Number(jq(".item-list-tabs ul #activity-favorites span").html())||(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove()))})}return!1}function bb_url_scrapeURL(a){var b="";if(a.indexOf("http://")>=0?b=bb_url_getUrl("http://",a):a.indexOf("https://")>=0?b=bb_url_getUrl("https://",a):a.indexOf("www.")>=0&&(b=bb_url_getUrl("www",a)),""!=b){var c=document.createElement("a");c.href=b;var d=c.hostname;window.Code.BuddyBoss_Wall_Util.state.excluded_oembed_hosts.indexOf(d)!=-1&&(b="")}return""===b?(jQuery("#bb-url-scrapper").hide(),void jQuery(".bb-url-scrapper-container").hide()):void bb_load_url_preview(b)}function bb_load_url_preview(a){bb_is_valid_url(a)&&bb_url_getUrlData(a)}function bb_url_abortTimer(){null!=bb_url_tid&&clearTimeout(bb_url_tid)}function bb_url_getUrlData(a){jQuery("#whats-new-submit input").prop("disabled",!0),jQuery(".bb-url-scrapper-container").show(),jQuery(".bb-url-scrapper-loading").show(),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-error").hide();var b={action:"bb_url_parser",url:a};jQuery.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(b){if(jQuery("#whats-new-submit input").prop("disabled",!1),jQuery("#buddyboss-media-add-photo-button").prop("disabled",!1),jQuery("#bb-url-scrapper-img-holder").show(),""==b.title)return void jQuery(".bb-url-scrapper-container").hide();if(jQuery(".bb-url-scrapper-loading").hide(),""==b.error){jQuery("#bb-url-error").hide(),jQuery("#bb-url-scrapper").show(),bb_urlInUse=a;var c="";jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage",""),bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,c=b.title,jQuery("#bb-url-scrapper-title").html(c),jQuery("#bb-url-scrapper-title-hidden").val(c),jQuery("#bb-url-scrapper-url").text(a),jQuery("#bb-url-scrapper-url-hidden").val(a),jQuery("#bb-url-scrapper-description").html(b.description),jQuery("#bb-url-scrapper-description-hidden").val(b.description),jQuery.each(b.images,function(a,b){bb_url_imgSrcArray.push(b)}),0!=bb_url_imgSrcArray.length&&jQuery("#buddyboss-media-add-photo-button").prop("disabled",!0)}else jQuery("#bb-url-error").text(b.error),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-error").show();jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text("1 of "+bb_url_imgSrcArray.length)}})}function bb_is_valid_url(a){var b=/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return b.test(a)}function bb_url_getUrl(a,b){for(var c="",d=b.indexOf(a),e=d;e<b.length&&(" "!=b[e]&&"\n"!=b[e]);e++)c+=b[e];return"www"===a&&(a="http://",c=a+c),c}var jq=$=jQuery;window.Code=window.Code||{},window.Code.BuddyBoss_Wall_Util=function(a,b,c,d){var e={state:c,lang:function(a){var a=a||"undefined key!";return c[a]||"Language key missing for: "+a}};return e}(window,window.jQuery,window.BuddyBoss_Wall_Appstate||!1),window.Code.BuddyBoss_Wall=function(a,b,c,d){var e=c.state||{},f=(c.lang,{on:null,setup_form:function(){var a=b("#buddyboss-wall-tpl-form"),c=b("body.just-me.has-activity #item-body > .activity").first(),d=b("#whats-new-form");!d.length&&a.length&&c.length},setup_comments:function(){var a=b(".buddyboss-wall-tpl-activity-comments");a.each(function(){var a=b(this),c=a.parent().find(".activity-comments");c.length&&!a.data("buddyboss-wall-appended")&&(a.data("buddyboss-wall-appended",!0),c.prepend(a.html()))})},setup_link_previews:function(){jQuery("#whats-new").addClass("bblinkBox"),jQuery("#whats-new-textarea").append('<div class="bb-url-scrapper-container"><i class="bb-url-scrapper-loading buddyboss-wall-ajax-loader fa fa-spinner"></i><div id="bb-url-scrapper"><div id="bb-url-scrapper-img-holder"><div id="bb-url-scrapper-img"><img src="" /><a title="Cancel Preview Image" href="#" id="bbimagecloselinksuggestion"><i class="fa fa-times"></i></a></div><div class="bb-url-thumb-nav"><input type="button" id="bb-url-prevPicButton" value="<" /><input type="button" id="bb-url-nextPicButton" value=">"><div id="bb-url-scrapper-img-count"></div></div></div><div id="bb-url-scrapper-text-holder"><div id="bb-url-scrapper-title"></div><div id="bb-url-scrapper-url"></div><div id="bb-url-scrapper-description"></div><div id="bb-url-error"></div><a title="Cancel Preview" href="#" id="bbcloselinksuggestion"><i class="fa fa-times"></i></a></div></div></div>'),jQuery("#whats-new-form").append('<input type="hidden" id="bb-url-scrapper-img-hidden" name="bb-url-scrapper-img-hidden" value="" /><input type="hidden" id="bb-url-scrapper-title-hidden"  name="bb-url-scrapper-title-hidden" value="" /><input type="hidden" id="bb-url-scrapper-url-hidden" name="bb-url-scrapper-url-hidden" value="" /><input type="hidden" id="bb-url-scrapper-description-hidden" name="bb-url-scrapper-description-hidden" value="" /><input type="hidden" id="bb-url-no-scrapper" name="bb-url-no-scrapper" value="1" />'),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-nextPicButton").click(function(a){bb_url_imgArrayCounter++,bb_url_imgArrayCounter>=bb_url_imgSrcArray.length&&(bb_url_imgArrayCounter=0),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bb-url-prevPicButton").click(function(a){bb_url_imgArrayCounter--,bb_url_imgArrayCounter<0&&(bb_url_imgArrayCounter=bb_url_imgSrcArray.length-1),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bbimagecloselinksuggestion").click(function(a){a.preventDefault(),jQuery("#bb-url-scrapper-img-holder").hide(),jQuery("#bb-url-scrapper-img-hidden").val(""),jQuery("#buddyboss-media-add-photo-button").prop("disabled",!1)}),jQuery("#bbcloselinksuggestion").click(function(a){a.preventDefault(),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-no-scrapper").val("1"),jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage","")}),jQuery(".bblinkBox").on("keyup",function(a){"1"===jQuery("#bb-url-no-scrapper").val()&&(urlText=this.value,bb_url_abortTimer(),bb_url_tid=setTimeout(function(){bb_url_scrapeURL(urlText)},1e3),13==a.which&&this.rows++)})},setup:function(){f.on=!0,b.ajaxPrefilter(f.prefilter),b(document).ajaxSuccess(function(a){f.setup_comments(),setTimeout(f.setup_comments,205),setTimeout(f.setup_comments,500)}),f.setup_form(),f.setup_comments(),e.enabled_link_preview&&f.setup_link_previews();var a=b("#buddyboss-wall-tpl-greeting").html(),c=b("#whats-new-form .activity-greeting");c.length&&a&&c.html(a).show()},teardown:function(){f.on=!1},prefilter:function(a,c,d){item_type=c.data&&c.data.item_type||"";var g,h=parseInt(c.data&&c.data.id||0),i=c.data&&c.data.action||"",j="activity_mark_fav"===i||"activity_mark_unfav"===i,k="post_update"===i,l="comment"===item_type;k&&e.enabled_link_preview&&(g=b("#bb-url-scrapper-url").html().length,g>0&&(a.data+="&bb_link_url="+encodeURIComponent(b("#bb-url-scrapper-url-hidden").val()),a.data+="&bb_link_title="+encodeURIComponent(b("#bb-url-scrapper-title-hidden").val()),a.data+="&bb_link_img="+encodeURIComponent(b("#bb-url-scrapper-img-hidden").val()),a.data+="&bb_link_description="+encodeURIComponent(b("#bb-url-scrapper-description-hidden").val()),b(".bb-url-scrapper-container").hide(),b("#bb-url-no-scrapper").val("1"),b("#bb-url-scrapper-description").text(""),b("#bb-url-scrapper-description-hidden").val(""),b("#bb-url-scrapper-title").text(""),b("#bb-url-scrapper-title-hidden").val(""),b("#bb-url-scrapper-url").text(""),b("#bb-url-scrapper-url-hidden").val(""),b("#bb-url-scrapper-img").css("backgroundImage",""))),j&&h>0&&(g=b("#activity-"+h).find(".button.loading"),type=g.hasClass("fav")?"fav":"unfav",l&&(g=b("#acomment-"+h).find(".acomment-like.loading"),type=g.hasClass("fav-comment")?"fav":"unfav"),a.success=function(a){return function(c,d,e){c[0]+c[1]==="-1"&&b.isFunction(a)?a(c):f.success(g,type,l,c,d,e)}}(a.success))},success:function(a,b,c,e,f,g){var h=!1,i="",j="",k=0,l=!1,m=e.indexOf("{")!=-1&&jQuery.parseJSON(e);if(i=m&&m.but_text?m.but_text:e,m&&m.hasOwnProperty("like_count")&&(m.like_count?(h=!0,j=m.num_likes):l=!0),a.fadeOut(200,function(){var a=jq(this),d=a.parents(".activity-item"),e=d.find(".activity-comments"),f=e.find("ul").first(),g=e.find(".activity-like-count:not(.reply-like-count)"),k=e.find("li").not(".activity-like-count"),m=j;c&&(e=a.parents(".acomment-options"),f=e.find("ul").first(),g=e.find(".activity-like-count"),k=e.find("li").not(".activity-like-count"),m=j),a.html(i),a.attr("title","fav"==b?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),a.fadeIn(200),g.remove(),h&&(f.length?f.prepend(m):c?e.append('<ul class="acomment-reply-like-content">'+m+"</ul>"):e.prepend("<ul>"+m+"</ul>")),l&&f.length&&!k.length&&f.remove()}),"fav"==b){var n=jq(".item-list-tabs ul #activity-favorites span").html();n!=d&&(k=Number(n.replace(/,/g,""))+1),jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#" class="localized">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),c?(a.removeClass("fav-comment"),a.addClass("unfav-comment")):(a.removeClass("fav"),a.addClass("unfav")),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}else{var n=jq(".item-list-tabs ul #activity-favorites span").html();n!=d&&(k=Number(n.replace(/,/g,""))-1),c?(a.removeClass("unfav-comment"),a.addClass("fav-comment")):(a.removeClass("unfav"),a.addClass("fav")),n&&jq(".item-list-tabs ul #activity-favorites span").html(k),0==k&&(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove())}"activity-favorites"==jq(".item-list-tabs li.selected").attr("id")&&a.closest(".activity-item").slideUp(100),a.removeClass("loading")}});b(document).ready(function(){f.setup(),jQuery.ajax=function(a){function b(a){return!e.test(a)&&/:\/\//.test(a)}var c=location.protocol,d=location.hostname,e=RegExp(c+"//"+d),f="http"+(/^https/.test(c)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",g='select * from html where url="{URL}" and xpath="*"';return function(c){var d=c.url;return/get/i.test(c.type)&&!/json/i.test(c.dataType)&&b(d)&&(c.url=f,c.dataType="json",c.data={q:g.replace("{URL}",d+(c.data?(/\?/.test(d)?"&":"?")+jQuery.param(c.data):"")),format:"xml"},!c.success&&c.complete&&(c.success=c.complete,delete c.complete),c.success=function(a){return function(b){a&&a.call(this,{responseText:(b.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(c.success)),a.apply(this,arguments)}}(jQuery.ajax),String.prototype.startsWith=function(a){return this.match("^"+a)==a}});var g={setup:function(){f.setup()},teardown:function(){f.teardown()}};return g}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util),function(a,b,c,d){var e={ajaxResetTimeout:201},f=c.state||{},g=(c.lang,{}),h={};g.init=function(){h.document=b(document),h.document.ajaxSuccess(g.ajaxSuccessListener),g.initTooltips(),BP_DTheme&&f&&b.extend(BP_DTheme,f)},g.ajaxSuccessListener=function(b,c,d){g.destroyTooltips(),a.setTimeout(g.initTooltips,e.ajaxResetTimeout)},g.destroyTooltips=function(){h.tooltips&&h.tooltips.length&&(h.tooltips.tooltipster("destroy"),h.tooltips=null)},g.initTooltips=function(){h.tooltips=b(".buddyboss-wall-tt-others"),h.tooltips.length&&h.tooltips.tooltipster({contentAsHTML:!0,functionInit:g.getTooltipContent,interactive:!0,position:"top-left",theme:"tooltipster-buddyboss"})},g.getTooltipContent=function(a,b){var c=a.parent().find(".buddyboss-wall-tt-content").detach().html();return c},f.load_tooltips&&(g.load_tooltips=!0),jQuery(document).ready(function(){g.load_tooltips===!0&&g.init()})}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util);var bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,bb_url_tid;